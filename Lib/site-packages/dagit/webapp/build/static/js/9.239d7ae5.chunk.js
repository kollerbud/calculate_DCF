(this["webpackJsonp@dagit/app"]=this["webpackJsonp@dagit/app"]||[]).push([[9],{1065:function(e,t,n){"use strict";n.r(t),n.d(t,"WorkspaceRoot",(function(){return Io}));var r,i,o,a,s,c,l,d=n(9),u=n(29),p=n(1),j=n.n(p),b=n(38),h=n(46),m=n(52),f=n(11),O=n(10),x=n(595),g=n(172),y=n(653),v=n(813),S=n(71),P=n(626),E=n(720),k=n(0),w=function(e){return Object(k.jsx)(P.c,{axis:"vertical",identifier:"execution",firstInitialPercent:75,firstMinSize:100,first:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(E.a,{children:Object(k.jsx)(S.a,{purpose:"section"})}),Object(k.jsx)(u.r,Object(d.a)({},e))]}),second:Object(k.jsx)("div",{})})},R=n(814),N=function(){return Object(k.jsx)(P.c,{axis:"vertical",identifier:"execution",firstInitialPercent:75,firstMinSize:100,first:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(R.a,{isLoading:!0,message:"Loading pipeline and partition sets..."}),Object(k.jsx)(E.a,{})]}),second:Object(k.jsx)(R.a,{isLoading:!0,message:"Loading pipeline and partition sets..."})})},C=p.lazy((function(){return Promise.all([n.e(6),n.e(11)]).then(n.bind(null,1067))})),_=function(e){var t,n,r=e.pipelinePath,i=e.repoAddress,o=Object(g.b)(r),a=o.pipelineName,s=o.pipelineMode,c=Object(h.e)().flagPipelineModeTuples;Object(y.a)(o),Object(g.e)(e);var l=i.name,d=i.location,u=Object(O.useQuery)(T,{variables:{repositoryName:l,repositoryLocationName:d,pipelineName:a},fetchPolicy:"cache-and-network",partialRefetch:!0}),j=null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.pipelineOrError,b=null===u||void 0===u||null===(n=u.data)||void 0===n?void 0:n.partitionSetsOrError;if(!j||!b)return Object(k.jsx)(N,{});if("PipelineNotFoundError"===b.__typename||"PipelineNotFoundError"===j.__typename){var m="PipelineNotFoundError"===j.__typename?j.message:"No data returned from GraphQL";return""!==a?Object(k.jsx)(w,{icon:x.a.FLOW_BRANCH,title:c?"Job not found":"Pipeline not found",description:m}):Object(k.jsx)(w,{icon:x.a.FLOW_BRANCH,title:c?"Select a job":"Select a pipeline"})}if(j&&"InvalidSubsetError"===j.__typename)throw new Error("Should never happen because we do not request a subset");return j&&"PythonError"===j.__typename?Object(k.jsx)(w,{icon:x.a.ERROR,title:"Python Error",description:j.message}):b&&"PythonError"===b.__typename?Object(k.jsx)(w,{icon:x.a.ERROR,title:"Python Error",description:b.message}):Object(k.jsx)(p.Suspense,{fallback:Object(k.jsx)("div",{}),children:Object(k.jsx)(C,{pipeline:j,pipelineMode:c?s:void 0,partitionSets:b,repoAddress:i})})},I=Object(O.gql)(r||(r=Object(f.a)(["\n  fragment ExecutionSessionContainerPipelineFragment on Pipeline {\n    id\n    ...ConfigEditorGeneratorPipelineFragment\n    modes {\n      id\n      name\n      description\n    }\n  }\n  ","\n"])),v.b),A=Object(O.gql)(i||(i=Object(f.a)(["\n  fragment ExecutionSessionContainerPartitionSetsFragment on PartitionSets {\n    ...ConfigEditorGeneratorPartitionSetsFragment\n  }\n  ","\n"])),v.a),T=Object(O.gql)(o||(o=Object(f.a)(["\n  query PipelineExecutionRootQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n      ... on Pipeline {\n        id\n        ...ExecutionSessionContainerPipelineFragment\n      }\n    }\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ...ExecutionSessionContainerPartitionSetsFragment\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n    }\n  }\n\n  ","\n  ","\n"])),I,A),F=n(17),L=n(620),D=n.n(L),G=n(142),q=n(35),M=function(e){var t=e.pipelinePath,n=e.repoAddress,r=Object(g.b)(t);Object(y.a)(r);var i=r.pipelineName,o=Object(G.g)(n.name,i),a=Object(F.a)(o,2),s=a[0],c=a[1],l=L.parse(window.location.search);return p.useEffect((function(){if(l.config||l.mode||l.solidSelection){var e={};"string"===typeof l.config&&(e.runConfigYaml=l.config),"string"===typeof l.mode&&(e.mode=l.mode),l.solidSelection instanceof Array?e.solidSelection=l.solidSelection:"string"===typeof l.solidSelection&&(e.solidSelection=[l.solidSelection]),"string"===typeof l.solidSelectionQuery&&(e.solidSelectionQuery=l.solidSelectionQuery),c(Object(G.b)(s,e))}})),Object(k.jsx)(b.b,{to:{pathname:Object(q.b)(n,"/pipelines/".concat(i,"/playground"))}})},z=n(289),$=n(6),H=n(624),B=n(19),U=n(604),K=n(139),Q=n(22),Y=n(82),W=n(73),J=n(36),V=n(709),Z=n(673),X=n(27),ee=n(72),te=n(684),ne=n(79),re=$.c.div.withConfig({displayName:"ListComponents__RowContainer",componentId:"k10ify-0"})(["display:flex;color:",";margin-bottom:9px;border:1px solid ",";box-shadow:0 1px 1px rgba(0,0,0,0.2);padding:2px 10px;text-decoration:none;"],Q.a.DARK_GRAY5,Q.a.LIGHT_GRAY1),ie=$.c.div.withConfig({displayName:"ListComponents__ScrollContainer",componentId:"k10ify-1"})(["overflow:auto;width:100%;"]),oe=p.forwardRef((function(e,t){var n=e.runsByPartitionName,r=e.getPipelineDataForRun,i=e.getStepDataForRun,o=e.title,a=e.yLabel,s=Object(h.e)().flagPipelineModeTuples,c=p.useState((function(){return{}})),l=Object(F.a)(c,2),u=l[0],j=l[1],b=p.useRef(null);p.useImperativeHandle(t,(function(){return{getChartInstance:function(){var e;return null===(e=b.current)||void 0===e?void 0:e.chartInstance}}}));var m=p.useCallback((function(e){var t,n=null===(t=b.current)||void 0===t?void 0:t.chartInstance;if(n){var r=n.scales["x-axis-0"];if(r){var i=e.offsetX,o=e.offsetY;if("click"===e.type&&i<=n.chartArea.right&&i>=n.chartArea.left&&o<=n.chartArea.bottom&&o>=n.chartArea.top&&e.shiftKey){var a=r.getValueForPixel(i),s=n.data.labels[a];j((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(ee.a)({},s,!e[s]))}))}}}}),[]),f=p.useMemo((function(){return{title:o?{display:!0,text:o}:void 0,scales:a?{y:{id:"y",title:{display:!0,text:a}},x:{id:"x",title:{display:!0,text:"Partition"}}}:void 0,plugins:{legend:{display:!1,onClick:function(e,t){}}},onClick:m}}),[m,o,a]),O=function(){var e=[],t={},o=Object.keys(n);return o.forEach((function(o){var a=function(e){if(!e||!e.length)return null;var t=e.slice();return t.sort(se),t[0]}(n[o]),s=!!u[o];if(e.push({x:o,y:a&&!s?r(a):void 0}),a){var c=i(a);Object.keys(c).forEach((function(e){t[e]=[].concat(Object(X.a)(t[e]||[]),[{x:o,y:s?void 0:c[e]}])}))}})),Object.keys(t).forEach((function(e){t[e]=ae(o,t[e])})),{pipelineData:e,stepData:t}}(),x=O.pipelineData,g=O.stepData,y={labels:Object.keys(n),datasets:[{label:s?"Total job":"Total pipeline",data:x,borderColor:Q.a.GRAY2,backgroundColor:"rgba(0,0,0,0)"}].concat(Object(X.a)(Object.keys(g).map((function(e){return{label:e,data:g[e],borderColor:Object(ne.d)(e),backgroundColor:"rgba(0,0,0,0)"}}))))};return Object(k.jsx)(re,{style:{margin:"20px 0"},children:Object(k.jsx)(te.a,{type:"line",data:y,height:100,options:f,ref:b})})})),ae=function(e,t){var n={};return t.forEach((function(e){n[e.x]=e.y})),e.map((function(e){return{x:e,y:n[e]}}))},se=function(e,t){return e.stats&&"PipelineRunStatsSnapshot"===e.stats.__typename&&e.stats.startTime?t.stats&&"PipelineRunStatsSnapshot"===t.stats.__typename&&t.stats.startTime?t.stats.startTime-e.stats.startTime:-1:1},ce=n(1025),le=Object(O.gql)(a||(a=Object(f.a)(["\n  fragment PartitionGraphFragment on PipelineRun {\n    id\n    runId\n    stats {\n      ... on PipelineRunStatsSnapshot {\n        id\n        startTime\n        endTime\n        materializations\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n    stepStats {\n      __typename\n      stepKey\n      startTime\n      endTime\n      status\n      materializations {\n        __typename\n      }\n      expectationResults {\n        success\n      }\n    }\n  }\n"]))),de=function(e){var t=e.stats;if(t&&"PipelineRunStatsSnapshot"===t.__typename&&t.endTime&&t.startTime)return t.endTime-t.startTime},ue=function(e){var t=e.stepStats,n={};return t.forEach((function(e){e.endTime&&e.startTime&&(n[e.stepKey]=e.endTime-e.startTime)})),n},pe=function(e){var t=e.stats;if(t&&"PipelineRunStatsSnapshot"===t.__typename)return t.materializations},je=function(e){var t=e.stepStats,n={};return t.forEach((function(e){var t;n[e.stepKey]=(null===(t=e.materializations)||void 0===t?void 0:t.length)||0})),n},be=function(e){var t=he(e);return ge(Object.values(t))},he=function(e){var t=e.stepStats,n={};return t.forEach((function(e){var t;n[e.stepKey]=(null===(t=e.expectationResults)||void 0===t?void 0:t.filter((function(e){return e.success})).length)||0})),n},me=function(e){var t=fe(e);return ge(Object.values(t))},fe=function(e){var t=e.stepStats,n={};return t.forEach((function(e){var t;n[e.stepKey]=(null===(t=e.expectationResults)||void 0===t?void 0:t.filter((function(e){return!e.success})).length)||0})),n},Oe=function(e){var t=he(e),n=fe(e),r=ge(Object.values(t)),i=r+ge(Object.values(n));return i?r/i:0},xe=function(e){var t=e.stepStats,n={};return t.forEach((function(e){var t=e.expectationResults||[];n[e.stepKey]=t.length?t.filter((function(e){return e.success})).length/t.length:0})),n},ge=function(e){var t=0;return e.forEach((function(e){return t+=e})),t},ye=function(e){var t=e.all,n=e.hidden,r=e.onChangeHidden,i=Object(h.e)().flagPipelineModeTuples?"Total job":"Total pipeline",o=function(e){return function(i){if(i.shiftKey)r(n.includes(e)?n.filter((function(t){return t!==e})):[].concat(Object(X.a)(n),[e]));else{var o=t.filter((function(t){return t!==e}));Object(ce.isEqual)(o,n)?r([]):r(o)}}};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(ve,{children:["Run steps",Object(k.jsx)("div",{style:{flex:1}}),Object(k.jsx)("span",{style:{fontSize:13,opacity:.5},children:"Tip: Shift-click to multi-select"})]}),Object(k.jsx)(Se,{children:[i].concat(Object(X.a)(t)).map((function(e){return Object(k.jsxs)(Pe,{shown:!n.includes(e),onClick:o(e),color:e===i?Q.a.GRAY2:Object(ne.d)(e),children:[Object(k.jsx)("div",{style:{display:"inline-block",marginRight:5,borderRadius:5,height:10,width:10,backgroundColor:n.includes(e)?"#aaaaaa":e===i?Q.a.GRAY2:Object(ne.d)(e)}}),e]},e)}))})]})},ve=$.c.div.withConfig({displayName:"PartitionGraphUtils__NavSectionHeader",componentId:"sc-13zm069-0"})(["border-bottom:1px solid ",";margin-bottom:10px;padding-bottom:5px;display:flex;"],Q.a.GRAY5),Se=$.c.div.withConfig({displayName:"PartitionGraphUtils__NavSection",componentId:"sc-13zm069-1"})(["margin-bottom:30px;"]),Pe=$.c.div.withConfig({displayName:"PartitionGraphUtils__Item",componentId:"sc-13zm069-2"})(["list-style-type:none;padding:5px 2px;cursor:pointer;text-decoration:",";user-select:none;font-size:12px;color:",";white-space:nowrap;"],(function(e){return e.shown?"none":"line-through"}),(function(e){return e.shown?e.color:"#aaaaaa"})),Ee=function(e){var t=e.partitions,n=e.allStepKeys,r=p.useState([]),i=Object(F.a)(r,2),o=i[0],a=i[1],s=p.useRef(void 0),c=p.useRef(void 0),l=p.useRef(void 0),d=p.useRef(void 0),u=p.useRef(void 0),j=[s,c,l,d,u],b={};return t.forEach((function(e){b[e.name]=e.runs})),Object(k.jsxs)(Re,{children:[Object(k.jsxs)("div",{style:{flex:1,minWidth:450},children:[Object(k.jsx)(oe,{title:"Execution Time by Partition",yLabel:"Execution time (secs)",runsByPartitionName:b,getPipelineDataForRun:de,getStepDataForRun:ue,ref:s}),Object(k.jsx)(oe,{title:"Materialization Count by Partition",yLabel:"Number of materializations",runsByPartitionName:b,getPipelineDataForRun:pe,getStepDataForRun:je,ref:c}),Object(k.jsx)(oe,{title:"Expectation Successes by Partition",yLabel:"Number of successes",runsByPartitionName:b,getPipelineDataForRun:be,getStepDataForRun:he,ref:l}),Object(k.jsx)(oe,{title:"Expectation Failures by Partition",yLabel:"Number of failures",runsByPartitionName:b,getPipelineDataForRun:me,getStepDataForRun:fe,ref:d}),Object(k.jsx)(oe,{title:"Expectation Rate by Partition",yLabel:"Rate of success",runsByPartitionName:b,getPipelineDataForRun:Oe,getStepDataForRun:xe,ref:u})]}),Object(k.jsx)("div",{style:{width:450},children:Object(k.jsx)(we,{children:Object(k.jsx)(ye,{all:n,hidden:o,onChangeHidden:function(e){a(e),j.forEach((function(t){var n,r,i=null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.getChartInstance();((null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.datasets)||[]).forEach((function(t,n){i.getDatasetMeta(n).hidden=e.includes(t.label)}))}))}})})})]})},ke=Object(O.gql)(s||(s=Object(f.a)(["\n  fragment PartitionGraphSetRunFragment on PipelineRun {\n    id\n    status\n    tags {\n      key\n      value\n    }\n    ...PartitionGraphFragment\n  }\n  ","\n"])),le),we=$.c.div.withConfig({displayName:"PartitionGraphSet__NavContainer",componentId:"gs7o00-0"})(["margin:20px 0 0 10px;padding:10px;background-color:#fff;border:1px solid ",";overflow:auto;"],Q.a.GRAY5),Re=$.c.div.withConfig({displayName:"PartitionGraphSet__PartitionContentContainer",componentId:"gs7o00-1"})(["display:flex;flex-direction:row;position:relative;margin:0 auto;"]),Ne=function(e){var t=e.value,n=e.onChange;return Object(k.jsxs)(Ce,{children:[[7,30,120].map((function(e){return Object(k.jsxs)(u.c,{active:e===t,onClick:function(){n(e)},children:[Object(k.jsx)("span",{className:e>7?"hideable-button-text":"",children:"Last "}),e]},e)})),Object(k.jsx)(u.c,{active:"all"===t,onClick:function(){n("all")},children:"All"})]})},Ce=Object($.c)(u.d).withConfig({displayName:"PartitionPageSizeSelector__PartitionPageSizeButtonGroup",componentId:"qa07ra-0"})(["text-align:center;white-space:nowrap;@media (max-width:1000px){& .hideable-button-text{display:none;}}"]),_e=n(77),Ie=n(3),Ae=n(196),Te=n(106),Fe=n(665),Le=n(820),De=n(15),Ge=n(649),qe=n(21),Me=n(18),ze=n(629),$e=n.n(ze),He=n(25),Be=n(648),Ue=n(211),Ke=n(173),Qe=n(86),Ye=n(650),We=n(634),Je=n(24),Ve=n(638),Ze=function(e){var t=e.pipelineName,n=e.repoAddress,r=e.backfillId,i=p.useState(!0),o=Object(F.a)(i,2),a=o[0],s=o[1],c=p.useState(!1),l=Object(F.a)(c,2),j=l[0],b=l[1],h=Object(O.useQuery)(tt,{fetchPolicy:"network-only",pollInterval:a?We.a:void 0,notifyOnNetworkStatusChange:!0,variables:{backfillId:r,limit:1e5}}),m=h.data,f=h.refetch,x=p.useMemo((function(){return m&&(null===m||void 0===m?void 0:m.partitionBackfillOrError)?"PythonError"===m.partitionBackfillOrError.__typename?null:m.partitionBackfillOrError:null}),[m]),g=p.useMemo((function(){if(!x)return null;var e={};x.runs.forEach((function(t){var n=t.tags.filter((function(e){return e.key===Qe.a.Partition})).map((function(e){return e.value})),r=Object(F.a)(n,1)[0];r&&!e[r]&&(e[r]=t)}));var t=Object.values(e),n=t.reduce((function(e,t){var n=t.status;return{numQueued:e.numQueued+(Ke.e.has(n)?1:0),numInProgress:e.numInProgress+(Ke.d.has(n)?1:0),numSucceeded:e.numSucceeded+(Ke.f.has(n)?1:0),numFailed:e.numFailed+(Ke.c.has(n)?1:0)}}),{numQueued:0,numInProgress:0,numSucceeded:0,numFailed:0});return{numQueued:n.numQueued,numInProgress:n.numInProgress,numSucceeded:n.numSucceeded,numFailed:n.numFailed,numPartitionRuns:t.length,numTotalRuns:x.runs.length}}),[x]);if(p.useEffect((function(){if(g){var e=g.numPartitionRuns,t=g.numSucceeded,n=g.numFailed;s(e!==t+n)}}),[g]),!g||!x)return Object(k.jsx)("div",{});var y=g.numQueued,v=g.numInProgress,S=g.numSucceeded,P=g.numFailed,E=g.numPartitionRuns,w=g.numTotalRuns,R=S+P,N=x.numTotal-x.numRequested,C=x.numRequested-E,_=x.numTotal,I=Object(k.jsx)(et,{children:Object(k.jsxs)("tbody",{children:[Object(k.jsx)(Xe,{runStatus:Je.j.QUEUED,humanText:"Queued",count:y,numTotal:_}),Object(k.jsx)(Xe,{runStatus:Je.j.STARTED,humanText:"In progress",count:v,numTotal:_}),Object(k.jsx)(Xe,{runStatus:Je.j.SUCCESS,humanText:"Succeeded",count:S,numTotal:_}),Object(k.jsx)(Xe,{runStatus:Je.j.FAILURE,humanText:"Failed",count:P,numTotal:_}),C>0?Object(k.jsx)(Xe,{humanText:"Skipped",count:C,numTotal:_}):null,Object(k.jsx)(Xe,{humanText:"To be scheduled",count:N,numTotal:_})]})}),A=x.runs.filter((function(e){return!Ke.b.has(null===e||void 0===e?void 0:e.status)})).reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(ee.a)({},t.id,t.canTerminate))}),{});return Object(k.jsxs)(B.a,{flex:{alignItems:"center",grow:1,justifyContent:"space-between"},children:[Object(k.jsxs)(qe.a,{direction:"row",spacing:8,alignItems:"center",children:[Object(k.jsx)(Y.a,{content:I,children:Object(k.jsxs)(qe.a,{direction:"row",spacing:8,alignItems:"center",children:[w?Object(k.jsxs)("div",{style:{fontVariantNumeric:"tabular-nums"},children:[Object(k.jsxs)(He.b,{to:"/instance/backfills",children:[R," / ",_]}),Object(k.jsx)("span",{children:" partitions completed"}),w?Object(k.jsxs)("span",{children:[" ","(",Object(k.jsxs)(He.b,{to:Object(q.b)(n,"/pipelines/".concat(t,"/runs?").concat($e.a.stringify({q:Object(Ve.b)([{token:"tag",value:"dagster/backfill=".concat(r)}])}))),children:[w," runs"]}),")"]}):null,N?Object(k.jsx)("span",{children:", "}):null]}):null,N?Object(k.jsx)(He.b,{to:"/instance/backfills",children:Object(k.jsxs)("div",{style:{fontVariantNumeric:"tabular-nums"},children:[N," to be scheduled"]})}):null]})}),Object.keys(A).length?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(u.c,{minimal:!0,icon:"stop",intent:"danger",onClick:function(){return b(!0)},children:"Terminate"}),Object(k.jsx)(Ye.a,{isOpen:j,onClose:function(){return b(!1)},onComplete:function(){return f()},selectedRuns:A})]}):null]}),a&&!j?Object(k.jsx)(Be.a,{pollInterval:We.a,queryResult:h}):null]})},Xe=function(e){var t=e.runStatus,n=e.humanText,r=e.count,i=e.numTotal;return!r||r<0?null:Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:Object(k.jsxs)(qe.a,{direction:"row",spacing:8,alignItems:"center",children:[t?Object(k.jsx)(Ue.b,{status:t,size:10}):null,Object(k.jsx)("div",{children:n})]})}),Object(k.jsxs)("td",{children:[r,"/",i]})]})},et=$.c.table.withConfig({displayName:"PartitionProgress__TooltipTable",componentId:"aoga53-0"})(["border-spacing:0;td{font-variant-numeric:tabular-nums;}td:first-child{width:120px;}td:last-child{text-align:right;}"]),tt=Object(O.gql)(c||(c=Object(f.a)(["\n  query PartitionProgressQuery($backfillId: String!, $limit: Int) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        backfillId\n        status\n        numRequested\n        numTotal\n        runs(limit: $limit) {\n          id\n          canTerminate\n          status\n          tags {\n            key\n            value\n          }\n        }\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n  ","\n"])),J.a),nt=n(654),rt=n(666),it=function(e){var t=Object(O.useQuery)(ct,{variables:{filter:{pipelineName:e.pipelineName,tags:[{key:Qe.a.Partition,value:e.partitionName}]}}}),n=t.data;return t.loading||!n?Object(k.jsx)(S.a,{purpose:"section"}):"PipelineRuns"!==n.pipelineRunsOrError.__typename?Object(k.jsx)(u.r,{icon:x.a.ERROR,title:"Query Error",description:n.pipelineRunsOrError.message}):Object(k.jsx)("div",{children:Object(k.jsx)(nt.b,{runs:n.pipelineRunsOrError.results,onSetFilter:function(){},additionalColumnHeaders:[Object(k.jsx)("th",{style:{maxWidth:150},children:"Step Info"},"context")],additionalColumnsForRow:function(t){return[Object(k.jsx)(ot,{stats:e.stepStatsByRunId[t.runId]||null,linkToLogs:"/instance/runs/".concat(t.runId,"?").concat(D.a.stringify({selection:e.stepName,logs:"step:".concat(e.stepName)}))},"context")]}})})},ot=function(e){var t=e.stats,n=e.linkToLogs;return Object(k.jsx)("td",{style:{maxWidth:150,borderRight:0},children:t?Object(k.jsxs)("div",{children:[Object(k.jsxs)(at,{children:[Object(k.jsx)("div",{style:{width:17,height:17,background:t.status?rt.e[t.status]:"#eee"}}),Object(k.jsx)(Y.a,{content:"Expectation Results",children:Object(k.jsx)(st,{children:"".concat(t.expectationResults.filter((function(e){return e.success})).length," /\n      ").concat(t.expectationResults.length)})}),Object(k.jsx)(Y.a,{content:"Materializations",children:Object(k.jsx)(st,{children:"".concat(t.materializations.length)})})]}),Object(k.jsx)(He.b,{to:n,component:u.c,small:!0,rightIcon:"share",children:"Step Logs"})]}):Object(k.jsx)("div",{children:"No step data."})},"context")},at=$.c.div.withConfig({displayName:"PartitionRunListForStep__StatSummaryLine",componentId:"on7g95-0"})(["display:flex;align-items:flex-start;margin-bottom:4px;"]),st=$.c.div.withConfig({displayName:"PartitionRunListForStep__StatBox",componentId:"on7g95-1"})(["border:1px solid ",";margin-left:4px;padding:1px 5px;font-size:11px;"],Q.a.LIGHT_GRAY2),ct=Object(O.gql)(l||(l=Object(f.a)(["\n  query PartitionRunListForStepQuery($filter: PipelineRunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n          runId\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n  ","\n  ","\n"])),nt.a,J.a),lt=n(664),dt=n.n(lt),ut=["tag"],pt=function(e){var t=e.runs,n=e.tokens,r=e.onChange,i=[{token:"tag",values:function(){var e=t.map((function(e){return e.tags})).reduce((function(e,t){return[].concat(Object(X.a)(e),Object(X.a)(t))}),[]).map((function(e){return"".concat(e.key,"=").concat(e.value)}));return dt()(e).sort()}}],o=Object(Ve.d)(Object(Ve.b)(n),i);return Object(k.jsx)(Ve.a,{small:!0,values:o,onChange:r,placeholder:"Filter partition runs...",suggestionProviders:i,loading:!1})},jt=n(81),bt=n(97),ht=n.n(bt),mt=function(e){var t=e.minUnix,n=e.maxUnix,r=e.value,i=e.disabled,o=e.onChange,a=n-t,s=j.a.useRef();return Object(k.jsx)("div",{style:{width:160},onClick:function(e){return e.stopPropagation()},children:Object(k.jsx)(ft,{min:0,max:1,disabled:i,stepSize:.01,labelRenderer:function(e){return Object(k.jsxs)("span",{style:{whiteSpace:"nowrap"},children:["Run Start > ",ht.a.unix(a*e+t).format("YYYY-MM-DD")]})},onChange:function(e){s.current&&clearTimeout(s.current),s.current=setTimeout((function(){return o(a*e[0]+t)}),10)},children:Object(k.jsx)(u.q.Handle,{value:(r-t)/a,type:"full",intentAfter:jt.a.PRIMARY})})})},ft=Object($.c)(u.q).withConfig({displayName:"SliceSlider__SliderWithHandleLabelOnly",componentId:"sln2im-0"})(["&.bp3-slider{height:19px;}.bp3-slider-axis > .bp3-slider-label{display:none;}.bp3-slider-handle > .bp3-slider-label{display:none;}.bp3-slider-handle.bp3-active > .bp3-slider-label{display:initial;}"]),Ot=n(1026),xt=n(632),gt=n(682),yt=n(672),vt=n(780),St={"FAILURE-SUCCESS":"SUCCESS","SKIPPED-SUCCESS":"SUCCESS","SUCCESS-FAILURE":"FAILURE","SKIPPED-FAILURE":"FAILURE","FAILURE-SKIPPED":"SKIPPED","SUCCESS-SKIPPED":"SKIPPED"};function Pt(e){return"startTime"in e.stats&&e.stats.startTime||0}function Et(e,t){return Pt(e)-Pt(t)}function kt(e,t){var n=new RegExp(e+"\\[.*\\]");return t===e||t==="".concat(e,".compute")||t.match(n)}var wt,Rt,Nt,Ct,_t,It=function(e){var t=j.a.useRef();if(!e.solidHandles)return null;if(t.current&&Object(Ot.shallowCompareKeys)(e,t.current.inputs))return t.current.result;var n=Object(vt.a)(e.solidHandles).map((function(e){return e.solid})),r=Object(xt.a)(n,e.stepQuery),i=function(e,t,n){t.forEach((function(e){return e.runs.sort(Et)}));var r=t.map((function(t){return{name:t.name,runs:t.runs,steps:e.boxes.map((function(e){var n=e.node,r=t.runs.map((function(e,t){var r;return{runIdx:t,status:null===(r=e.stepStats.find((function(e){return kt(n.name,e.stepKey)})))||void 0===r?void 0:r.status}})).filter((function(e){return!!e.status})).reverse();if(0===r.length)return{name:n.name,color:"MISSING",unix:0};var i=r.slice(1).find((function(e){return e.status!==r[0].status})),o=i?"".concat(i.status,"-").concat(r[0].status):r[0].status;return{name:n.name,unix:Pt(t.runs[r[0].runIdx]),color:o}}))}})),i=r.filter((function(e){return e.runs.length>0})).length,o=e.boxes.map((function(e,t){var n=r.filter((function(e){return e.steps[t].color.includes("FAILURE")})),o=r.filter((function(e){return e.steps[t].color.endsWith("FAILURE")}));return{x:e.x,name:e.node.name,totalFailurePercent:i?Math.round(n.length/i*100):0,finalFailurePercent:i?Math.round(o.length/i*100):0}}));if(n.showFailuresAndGapsOnly){for(var a=function(e){0===o[e].finalFailurePercent&&(o.splice(e,1),r.forEach((function(t){return t.steps.splice(e,1)})))},s=o.length-1;s>=0;s--)a(s);for(var c=r.length-1;c>=0;c--)(0===r[c].runs.length||r[c].steps.every((function(e){return e.color.includes("SUCCESS")})))&&r.splice(c,1)}return{stepRows:o,partitions:t,partitionColumns:r}}(Object(yt.c)({nodes:r.all,mode:gt.c.FLAT}),e.partitions,e.options);return t.current={result:i,inputs:e},i},At="This step failed at least once for this percent of partitions.",Tt="This step failed to run successfully for this percent of partitions.",Ft="FINAL_ASC",Lt="FINAL_DESC",Dt="TOTAL_ASC",Gt="TOTAL_DESC",qt=function(e){var t=e.filter((function(e){return"tag"===e.token&&e.value.startsWith("dagster/backfill=")})).map((function(e){return e.value.split("=")[1]}));return Object(F.a)(t,1)[0]},Mt={encode:function(e){return{partitionName:null===e||void 0===e?void 0:e.partitionName,stepName:null===e||void 0===e?void 0:e.stepName}},decode:function(e){return e.partitionName&&e.stepName?{partitionName:e.partitionName,stepName:e.stepName}:null}},zt={decode:function(e){return{showPrevious:"true"===e.showPrevious,colorizeByAge:"true"===e.colorizeByAge,showFailuresAndGapsOnly:"true"===e.showFailuresAndGapsOnly}},defaults:{showPrevious:!1,colorizeByAge:!1,showFailuresAndGapsOnly:!1}},$t=function(e){var t,n,r=p.useContext(Te.a).basePath,i=Object(Fe.a)(),o=i.viewport,a=i.containerProps,s=p.useState(0),c=Object(F.a)(s,2),l=c[0],j=c[1],b=p.useState(null),h=Object(F.a)(b,2),m=h[0],f=h[1],x=Object(H.a)(Mt),g=Object(F.a)(x,2),y=g[0],v=g[1],S=Object(H.a)({queryKey:"stepSort"}),P=Object(F.a)(S,2),E=P[0],w=void 0===E?"":E,R=P[1],N=Object(H.a)(zt),C=Object(F.a)(N,2),_=C[0],I=C[1],A=Object(K.a)(e.repoAddress),T=Object(d.a)(Object(d.a)({},A),{},{pipelineName:e.pipelineName}),L=Object(O.useQuery)(Kt,{variables:{pipelineSelector:T}}),G="PipelineSnapshot"===(null===(t=L.data)||void 0===t?void 0:t.pipelineSnapshotOrError.__typename)&&L.data.pipelineSnapshotOrError.solidHandles,q=It({partitions:e.partitions,stepQuery:e.stepQuery,solidHandles:G,options:_});if(!q||!G)return Object(k.jsx)("span",{});var M=q.stepRows,z=q.partitionColumns,$=q.partitions;w===Ft?M.sort((function(e,t){return e.finalFailurePercent-t.finalFailurePercent})):w===Lt?M.sort((function(e,t){return t.finalFailurePercent-e.finalFailurePercent})):w===Dt?M.sort((function(e,t){return e.totalFailurePercent-t.totalFailurePercent})):w===Gt&&M.sort((function(e,t){return t.totalFailurePercent-e.totalFailurePercent}));var U,Y=function(e){var t={};return e.forEach((function(e){return t[e.name]=e})),M.map((function(e){return t[e.name]}))},W=Math.max(0,Math.floor((o.left-150)/23)),J=Math.ceil((o.width+300)/23),V=z.slice(W,W+J),Z=Date.now()/1e3,te=1,ne=Object(_e.a)(z);try{for(ne.s();!(U=ne.n()).done;){var re,ie=U.value,oe=Object(_e.a)(ie.steps);try{for(oe.s();!(re=oe.n()).done;){var ae=re.value;if(0!==ae.unix){var se=[Math.min(Z,ae.unix),Math.max(te,ae.unix)];Z=se[0],te=se[1]}}}catch(ce){oe.e(ce)}finally{oe.f()}}}catch(ce){ne.e(ce)}finally{ne.f()}return Object(k.jsxs)(Ht,{children:[Object(k.jsxs)(u.h,{isOpen:!!y,onClose:function(){return v(null)},style:{width:"90vw"},title:y?"".concat(y.partitionName," runs (").concat(y.stepName,")"):"",children:[Object(k.jsx)("div",{style:{background:Q.a.WHITE,padding:15,marginBottom:15},children:y&&Object(k.jsx)(it,{pipelineName:e.pipelineName,partitionName:y.partitionName,stepName:y.stepName,stepStatsByRunId:Object.assign.apply(Object,[{}].concat(Object(X.a)(((null===(n=e.partitions.find((function(e){return e.name===y.partitionName})))||void 0===n?void 0:n.runs)||[]).map((function(e){return Object(ee.a)({},e.runId,e.stepStats.find((function(e){return kt(y.stepName,e.stepKey)})))})))))})}),Object(k.jsx)("div",{className:Ie.a.DIALOG_FOOTER,children:Object(k.jsx)("div",{className:Ie.a.DIALOG_FOOTER_ACTIONS,children:Object(k.jsx)(u.c,{intent:"primary",autoFocus:!0,onClick:function(){return v(null)},children:"OK"})})})]}),Object(k.jsxs)(B.a,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:4},children:[Object(k.jsxs)(qe.a,{direction:"row",alignItems:"center",spacing:12,children:[Object(k.jsx)("strong",{children:"Run Matrix"}),Object(k.jsx)(pt,{runs:$.reduce((function(e,t){return[].concat(Object(X.a)(e),Object(X.a)(t.runs))}),[]),onChange:e.setRunTags,tokens:e.runTags})]}),e.runTags.length&&qt(e.runTags)?Object(k.jsx)(B.a,{flex:{grow:1},margin:{left:12,right:8},children:Object(k.jsx)(Ze,{pipelineName:e.pipelineName,repoAddress:e.repoAddress,backfillId:qt(e.runTags)})}):null,Object(k.jsx)(u.t,{position:"bottom-left",content:Object(k.jsxs)(u.n,{children:[Object(k.jsx)(u.p,{text:"Show previous status",icon:Object(k.jsx)(Me.a,{name:"done",color:_.showPrevious?De.a.Gray700:De.a.Gray200}),onClick:function(){return I(Object(d.a)(Object(d.a)({},_),{},{showPrevious:!_.showPrevious}))},shouldDismissPopover:!1}),Object(k.jsx)(u.p,{text:"Only show failures and gaps",icon:Object(k.jsx)(Me.a,{name:"done",color:_.showFailuresAndGapsOnly?De.a.Gray700:De.a.Gray200}),onClick:function(){return I(Object(d.a)(Object(d.a)({},_),{},{showFailuresAndGapsOnly:!_.showFailuresAndGapsOnly}))},shouldDismissPopover:!1}),Object(k.jsx)(u.p,{tagName:"div",text:Object(k.jsxs)(qe.a,{direction:"column",spacing:8,children:[Object(k.jsx)("div",{children:"Colorize by age"}),_.colorizeByAge?Object(k.jsx)(mt,{disabled:!1,value:Math.max(Z,l),onChange:j,maxUnix:te,minUnix:Z}):null]}),icon:Object(k.jsx)(Me.a,{name:"done",color:_.colorizeByAge?De.a.Gray700:De.a.Gray200}),onClick:function(){return I(Object(d.a)(Object(d.a)({},_),{},{colorizeByAge:!_.colorizeByAge}))},shouldDismissPopover:!1})]}),children:Object(k.jsx)(u.c,{icon:"settings",minimal:!0,text:"Settings"})})]}),Object(k.jsxs)("div",{style:{position:"relative",display:"flex",border:"1px solid ".concat(Q.a.GRAY5),borderLeft:0},children:[Object(k.jsxs)(rt.b,{floating:o.left>0,children:[Object(k.jsxs)(rt.a,{disabled:!0,style:{flex:1,flexShrink:1,overflow:"hidden"},children:[Object(k.jsx)(rt.f,{children:Object(k.jsx)(Ge.a,{small:!0,width:260,items:G.map((function(e){return e.solid})),value:e.stepQuery,placeholder:"Type a Step Subset",onChange:e.setStepQuery})}),M.map((function(e){return Object(k.jsx)(rt.d,{style:{paddingLeft:e.x},"data-tooltip":e.name,hovered:e.name===(null===m||void 0===m?void 0:m.stepName),children:e.name},e.name)})),Object(k.jsx)(Bt,{}),Object(k.jsx)(rt.d,{style:{paddingLeft:5},children:"Runs"})]}),_.showPrevious&&Object(k.jsxs)(rt.a,{disabled:!0,children:[Object(k.jsx)(rt.f,{children:Object(k.jsx)("div",{style:{cursor:"pointer"},className:"square failure-blank",title:At,onClick:function(){return R(w===Gt?Dt:Gt)}})}),M.map((function(e,t){var n=e.totalFailurePercent,r=e.name;return Object(k.jsx)(rt.d,{title:At,hovered:r===(null===m||void 0===m?void 0:m.stepName),redness:n/100,children:"".concat(n,"%")},t)})),Object(k.jsx)(Bt,{})]}),Object(k.jsxs)(rt.a,{disabled:!0,children:[Object(k.jsx)(rt.f,{children:Object(k.jsx)("div",{style:{cursor:"pointer"},className:"square failure",title:Tt,onClick:function(){return R(w===Lt?Ft:Lt)}})}),M.map((function(e,t){var n=e.finalFailurePercent,r=e.name;return Object(k.jsx)(rt.d,{title:Tt,hovered:r===(null===m||void 0===m?void 0:m.stepName),redness:n/100,children:"".concat(n,"%")},t)})),Object(k.jsx)(Bt,{})]})]}),Object(k.jsx)(rt.c,Object(d.a)(Object(d.a)({},a),{},{children:Object(k.jsx)("div",{style:{width:23*z.length,position:"relative",height:"100%"},children:V.map((function(e,t){return Object(k.jsxs)(rt.a,{style:{zIndex:V.length-t,width:23,position:"absolute",left:23*(t+W)},dimSuccesses:!_.colorizeByAge,children:[Object(k.jsx)(rt.g,{label:e.name}),Y(e.steps).map((function(t){var n=t.name,i=t.color,o=t.unix;return Object(k.jsx)(Ae.a,{minimal:!0,disabled:0===e.runs.length,interactionKind:"click",placement:"bottom-start",content:e.runs.length?Object(k.jsxs)(u.n,{children:[Object(k.jsx)(u.p,{icon:"share",text:"Show Logs From Last Run",href:"".concat(r,"/instance/runs/").concat(e.runs[e.runs.length-1].runId,"?").concat(D.a.stringify({selection:n,logs:"step:".concat(n)}))}),Object(k.jsx)(u.p,{icon:"list",text:"View Runs (".concat(e.runs.length,")"),onClick:function(){return e.runs.length>0&&v({stepName:n,partitionName:e.name})}})]}):Object(k.jsx)("span",{}),children:Object(k.jsx)("div",{className:"\n                      square\n                      ".concat(0===e.runs.length&&"empty","\n                      ").concat((_.showPrevious?i:St[i]||i).toLowerCase(),"\n                    "),onMouseEnter:function(){return f({stepName:n,partitionName:e.name})},onMouseLeave:function(){return f(null)},style:_.colorizeByAge?{opacity:o>=l?.3+(o-Z)/(te-Z)*.7:.08}:{}})},n)})),Object(k.jsx)(Bt,{}),Object(k.jsx)(rt.d,{style:{textAlign:"center"},children:e.runs.length})]},e.name)}))})}))]})]})},Ht=$.c.div.withConfig({displayName:"PartitionRunMatrix__PartitionRunMatrixContainer",componentId:"sc-8t07p0-0"})(["display:block;"]),Bt=$.c.div.withConfig({displayName:"PartitionRunMatrix__Divider",componentId:"sc-8t07p0-1"})(["height:1px;width:100%;margin-top:5px;border-top:1px solid ",";"],Q.a.GRAY5),Ut=Object(O.gql)(wt||(wt=Object(f.a)(["\n  fragment PartitionRunMatrixRunFragment on PipelineRun {\n    id\n    runId\n    tags {\n      key\n      value\n    }\n    stats {\n      __typename\n      ... on PipelineRunStatsSnapshot {\n        id\n        startTime\n      }\n    }\n    stepStats {\n      __typename\n      stepKey\n      status\n      materializations {\n        __typename\n      }\n      expectationResults {\n        success\n      }\n    }\n  }\n"]))),Kt=Object(O.gql)(Rt||(Rt=Object(f.a)(["\n  query PartitionRunMatrixPipelineQuery($pipelineSelector: PipelineSelector) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...PipelineExplorerSolidHandleFragment\n        }\n      }\n    }\n  }\n  ","\n"])),Le.b),Qt=function(e){var t=e.partitionSets,n=e.selected,r=e.onSelect,i=p.useState(!1),o=Object(F.a)(i,2),a=o[0],s=o[1];return Object(k.jsx)(u.t,{isOpen:a,onInteraction:s,minimal:!0,wrapperTagName:"span",position:"bottom-left",content:Object(k.jsx)(u.n,{style:{minWidth:280},children:t.map((function(e,t){return Object(k.jsx)(u.p,{onClick:function(){return r(e)},active:n.name===e.name,icon:"git-repo",text:Object(k.jsx)("div",{children:e.name})},t)}))}),children:Object(k.jsx)(u.c,{text:"Partition Set: ".concat(n.name),rightIcon:"caret-down"})})},Yt=n(62),Wt=n.n(Yt),Jt=n(94),Vt=n(95),Zt=n(708),Xt=n(815),en=n(621),tn=n(78),nn="DefaultRunLauncher";var rn,on,an,sn=function(e){var t,n=e.partitionSetName,r=e.pipelineName,i=e.onLaunch,o=e.onSubmit,a=e.repoAddress,s=Object(K.a)(a),c=p.useState(),l=Object(F.a)(c,2),j=l[0],b=l[1],m=p.useState([]),f=Object(F.a)(m,2),x=f[0],g=f[1],y=p.useState(!1),v=Object(F.a)(y,2),P=v[0],E=v[1],w=p.useState([]),R=Object(F.a)(w,2),N=R[0],C=R[1],_=p.useState(""),I=Object(F.a)(_,2),A=I[0],T=I[1],L=p.useState({reexecute:!1,fromFailure:!1}),D=Object(F.a)(L,2),G=D[0],q=D[1],M=Object(h.e)().flagPipelineModeTuples,z=Object(Fe.a)({initialOffset:p.useCallback((function(e){return{left:e.scrollWidth-e.clientWidth,top:0}}),[])}).containerProps;p.useEffect((function(){var e=function(){return b(void 0)};return window.addEventListener("mouseup",e),function(){return window.removeEventListener("mouseup",e)}}));var $=p.useRef(!0);p.useEffect((function(){return $.current=!0,function(){$.current=!1}}),[i]);var H=Object(O.useQuery)(dn,{variables:{repositorySelector:s,partitionSetName:n,pipelineSelector:Object(d.a)(Object(d.a)({},s),{},{pipelineName:r})},fetchPolicy:"network-only"}),U=H.loading,V=H.data,Z=Object(O.useLazyQuery)(un,{variables:{repositorySelector:s,partitionSetName:n},fetchPolicy:"cache-and-network"}),ee=Object(F.a)(Z,2),te=ee[0],ne=ee[1],re=ne.loading,ie=ne.data;if(!V||U)return Object(k.jsx)(B.a,{margin:{vertical:32},flex:{justifyContent:"center"},children:Object(k.jsx)(S.a,{purpose:"section"})});if("PartitionSetNotFoundError"===V.partitionSetOrError.__typename)return Object(k.jsx)(u.r,{icon:"error",title:"Partition Set Not Found",description:V.partitionSetOrError.message});if("PipelineNotFoundError"===V.pipelineSnapshotOrError.__typename)return Object(k.jsx)(u.r,{icon:"error",title:M?"Job not found":"Pipeline not found",description:V.pipelineSnapshotOrError.message});if("PipelineSnapshotNotFoundError"===V.pipelineSnapshotOrError.__typename)return Object(k.jsx)(u.r,{icon:"error",title:M?"Job not found":"Pipeline not found",description:V.pipelineSnapshotOrError.message});if("PythonError"===V.partitionSetOrError.__typename)return Object(k.jsx)(B.a,{margin:20,children:Object(k.jsx)(J.b,{error:V.partitionSetOrError})});if("PythonError"===V.pipelineSnapshotOrError.__typename)return Object(k.jsxs)(B.a,{margin:20,children:[Object(k.jsx)(J.b,{error:V.pipelineSnapshotOrError}),";"]});if("PythonError"===(null===ie||void 0===ie?void 0:ie.partitionSetOrError.__typename))return Object(k.jsx)(B.a,{margin:20,children:Object(k.jsx)(J.b,{error:null===ie||void 0===ie?void 0:ie.partitionSetOrError})});var oe=V.partitionSetOrError,ae=V.pipelineSnapshotOrError,se=V.instance,ce=ae.solidHandles.map((function(e){return e.solid})),le="Partitions"===oe.partitionsOrError.__typename?oe.partitionsOrError.results:null;if(!ce||!le)return Object(k.jsx)("span",{});var de,ue=le.map((function(e){return e.name})),pe="PartitionSet"===(null===ie||void 0===ie?void 0:ie.partitionSetOrError.__typename)&&"PartitionStatuses"===ie.partitionSetOrError.partitionStatusesOrError.__typename?ie.partitionSetOrError.partitionStatusesOrError.results:[],je=pe.filter((function(e){return e.runStatus===Je.j.SUCCESS})).map((function(e){return e.partitionName})),be=pe.filter((function(e){return e.runStatus===Je.j.FAILURE||e.runStatus===Je.j.CANCELED||e.runStatus===Je.j.CANCELING})).map((function(e){return e.partitionName})),he=G.reexecute?G.fromFailure?be:je:ue,me=Object(xt.a)(ce,A),fe=Object(yt.c)({nodes:me.all,mode:gt.c.FLAT}).boxes.map((function(e){return{x:e.x,name:e.node.name}})),Oe=(null===(t=se.runLauncher)||void 0===t?void 0:t.name)===nn,xe=j?function(e,t){var n=he.indexOf(e),r=he.indexOf(t);return he.slice(Math.min(n,r),Math.max(n,r)+1)}(j.start,j.end):[],ge=function(e,t){for(var n=Object(X.a)(e).sort((function(e,n){return t.indexOf(e)-t.indexOf(n)})),r="";n.length;){for(var i=n.shift(),o=t.indexOf(i),a=o,s=-1;a<t.length-1&&-1!==(s=n.indexOf(t[a+1]));)a++,n.splice(s,1);r+=a!==o?"[".concat(i,"...").concat(t[a],"], "):"".concat(i,", ")}return r.replace(/, $/,"")}(x,ue);return Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{className:Ie.a.DIALOG_BODY,children:[Object(k.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:4},children:[Object(k.jsx)("strong",{style:{display:"block"},children:"Partitions"}),Object(k.jsx)(u.e,{label:"Select all",disabled:!he.length,style:{marginBottom:0,marginLeft:10},checked:x.length===he.length,onClick:function(){return g(x.length===he.length?[]:he)}})]}),Object(k.jsx)(u.m,{small:!0,fill:!0,placeholder:(de=ue,de.length<4?"ex: ".concat(de[0],", ").concat(de[1]):"ex: ".concat(de[0],", ").concat(de[1],", [").concat(de[2],"...").concat(de[de.length-1],"]")),defaultValue:ge,onBlur:function(e){try{g(function(e,t){var n,r=e.split(",").map((function(e){return e.trim()})),i=[],o=Object(_e.a)(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(0!==a.length){var s=/^\[(.*)\.\.\.(.*)\]$/g.exec(a);if(s){var c=Object(F.a)(s,3),l=c[1],d=c[2],u=t.indexOf(l),p=t.indexOf(d);if(-1===u||-1===p)throw new Error("Could not find partitions for provided range: ".concat(l,"...").concat(d));i.push.apply(i,Object(X.a)(t.slice(u,p+1)))}else if(a.includes("*"))!function(){var e=a.split("*"),n=Object(F.a)(e,2),r=n[0],o=n[1];i.push.apply(i,Object(X.a)(t.filter((function(e){return e.startsWith(r)&&e.endsWith(o)}))))}();else{if(-1===t.indexOf(a))throw new Error("Could not find partition: ".concat(a));i.push(a)}}}}catch(j){o.e(j)}finally{o.f()}return i.sort((function(e,n){return t.indexOf(e)-t.indexOf(n)}))}(e.target.value,ue))}catch(t){e.preventDefault(),Object(W.b)({body:t.message})}}},ge),Object(k.jsxs)("div",{style:{display:"flex",marginTop:10},children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("strong",{style:{display:"block",marginBottom:4},children:"Step Subset"}),Object(k.jsx)(Ge.a,{small:!0,disabled:G.fromFailure,width:260,items:ce,value:A,placeholder:"Type a Step Subset",onChange:T})]}),Object(k.jsxs)("div",{style:{marginLeft:20},children:[Object(k.jsx)("strong",{style:{display:"block",marginBottom:6},children:"Options"}),Object(k.jsxs)("div",{style:{display:"flex"},children:[Object(k.jsx)(u.e,{checked:G.fromFailure,onChange:function(){ie||te(),g([]),T(""),q(Object(d.a)(Object(d.a)({},G),{},{reexecute:!G.reexecute,fromFailure:!G.fromFailure}))},children:Object(k.jsxs)(B.a,{flex:{display:"inline-flex",alignItems:"center"},children:[Object(k.jsx)(B.a,{margin:{right:4},children:"Re-execute from failures"}),Object(k.jsx)(Y.a,{content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed.",children:Object(k.jsx)(Me.a,{name:"info",color:De.a.Gray500})})]})}),re?Object(k.jsx)("div",{style:{marginLeft:"8px",marginTop:"3px"},children:Object(k.jsx)(S.a,{purpose:"body-text"})}):null]})]})]}),Object(k.jsxs)("div",{style:{display:"flex",marginTop:20,paddingTop:20,borderTop:"1px solid ".concat(Q.a.LIGHT_GRAY3),justifyContent:"space-between"},children:[Object(k.jsx)("strong",{style:{display:"block",marginBottom:4},children:"Preview"}),Object(k.jsx)("div",{style:{color:Q.a.GRAY3},children:"Click or drag to edit selected partitions"})]}),Object(k.jsxs)("div",{style:{display:"flex",border:"1px solid ".concat(Q.a.LIGHT_GRAY1)},children:[A&&Object(k.jsx)(rt.b,{floating:!0,children:Object(k.jsxs)(rt.a,{disabled:!0,children:[Object(k.jsx)(rt.f,{}),fe.map((function(e){return Object(k.jsx)(rt.d,{style:{paddingLeft:e.x},children:e.name},e.name)}))]})}),Object(k.jsx)(rt.c,Object(d.a)(Object(d.a)({},z),{},{children:Object(k.jsx)("div",{style:{display:"flex",paddingLeft:10},children:ue.map((function(e,t){return Object(k.jsxs)(rt.a,{style:{zIndex:ue.length-t,userSelect:"none"},disabled:re||!he.includes(e),focused:x.includes(e),multiselectFocused:xe.includes(e),onMouseDown:function(){var t;b({start:t=e,end:t})},onMouseUp:function(){return function(e){if(xe.length){if(xe.every((function(e){return x.includes(e)})))g(x.filter((function(e){return!xe.includes(e)})));else{var t=new Set(x);xe.forEach((function(e){return t.add(e)})),g(Array.from(t))}b(void 0)}}()},onMouseOver:function(){return function(e){if(j){var t=j.start;b({start:t,end:e})}}(e)},children:[Object(k.jsx)(rt.g,{label:e}),G.reexecute?G.fromFailure?Object(k.jsx)("div",{className:"square ".concat(he.includes(e)?"failure":"disabled")}):fe.map((function(t){return Object(k.jsx)("div",{className:"square ".concat(he.includes(e)?"missing":"disabled")},"".concat(e,":").concat(t.name))})):Object(k.jsx)("div",{className:"square ".concat(he.includes(e)?"missing":"disabled")})]},e)}))})}))]}),se.daemonHealth.daemonStatus.healthy?null:Object(k.jsx)("div",{style:{marginTop:10},children:Object(k.jsx)(en.a,{intent:"warning",title:"The backfill daemon is not running.",description:Object(k.jsxs)("div",{children:["See the"," ",Object(k.jsx)("a",{href:"https://docs.dagster.io/overview/daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}),Oe&&!se.runQueuingSupported?Object(k.jsx)("div",{style:{marginTop:10},children:Object(k.jsx)(en.a,{intent:"warning",title:Object(k.jsxs)("div",{children:["Using the default run launcher ",Object(k.jsx)("code",{children:nn})," for launching backfills without a queued run coordinator is not advised."]}),description:Object(k.jsxs)("div",{children:["Check your instance configuration in ",Object(k.jsx)("code",{children:"dagster.yaml"})," to either configure"," ","the"," ",Object(k.jsx)("a",{href:"https://docs.dagster.io/overview/pipeline-runs/run-coordinator",target:"_blank",rel:"noreferrer",children:"queued run coordinator"})," ","or to configure a run launcher more appropriate for launching a large number of jobs."]})})}):null]}),Object(k.jsx)("div",{className:Ie.a.DIALOG_FOOTER,children:Object(k.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[Object(k.jsx)(Xt.b,{tagsFromSession:N,onChange:C,open:P,onRequestClose:function(){return E(!1)}}),N.length?Object(k.jsx)("div",{style:{border:"1px solid #ececec",borderBottom:"none"},children:Object(k.jsx)(Xt.a,{tags:{fromSession:N},onRequestEdit:function(){return E(!0)}})}):Object(k.jsx)(tn.a,{color:"#106ba3",onClick:function(){return E(!0)},style:{margin:"9px  9px 0 9px"},children:"+ Add tags to backfill runs"}),Object(k.jsx)(cn,{partitionNames:x,partitionSetName:oe.name,reexecutionSteps:!G.fromFailure&&me.all.length<ce.length?fe.map((function(e){return e.name})):void 0,fromFailure:G.fromFailure,tags:N,onSubmit:o,onSuccess:function(e){Vt.a.show({message:Object(k.jsxs)("div",{children:["Created backfill job:"," ",Object(k.jsx)(ln,{href:"/instance/backfills",children:e})]}),intent:jt.a.SUCCESS}),null===i||void 0===i||i(e,A)},onError:function(e){var t=null===e||void 0===e?void 0:e.launchPartitionBackfill,n=Object(k.jsx)(k.Fragment,{});"PythonError"===(null===t||void 0===t?void 0:t.__typename)||"PartitionSetNotFoundError"===(null===t||void 0===t?void 0:t.__typename)?n=Object(k.jsx)(J.b,{error:t}):"InvalidStepError"===(null===t||void 0===t?void 0:t.__typename)?n=Object(k.jsx)("div",{children:"Invalid step: ".concat(t.invalidStepKey)}):"InvalidOutputError"===(null===t||void 0===t?void 0:t.__typename)?n=Object(k.jsx)("div",{children:"Invalid output: ".concat(t.invalidOutputName," for ").concat(t.stepKey)}):t&&"errors"in t&&(n=Object(k.jsx)(k.Fragment,{children:t.errors.map((function(e,t){return Object(k.jsx)(J.b,{error:e},t)}))}));var r=Object(k.jsxs)(qe.a,{direction:"column",spacing:4,children:[Object(k.jsx)("div",{children:"An unexpected error occurred. This backfill was not launched."}),n?Object(k.jsx)(tn.a,{color:Q.a.WHITE,underline:"always",onClick:function(){Object(W.b)({body:n})},children:"View error"}):null]});Vt.a.show({message:r,icon:"error",intent:jt.a.DANGER})},repoAddress:a})]})})]})},cn=function(e){var t=e.partitionSetName,n=e.partitionNames,r=e.reexecutionSteps,i=e.fromFailure,o=e.tags,a=e.onSuccess,s=e.onError,c=e.onSubmit,l=e.repoAddress,d=Object(K.a)(l),u=p.useRef(!0),j=Object(O.useMutation)(pn),b=Object(F.a)(j,2),h=b[0],m=b[1].loading;p.useEffect((function(){return u.current=!0,function(){u.current=!1}}),[a]);var f=function(){var e=Object(Jt.a)(Wt.a.mark((function e(){var l,p;return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.next=3,h({variables:{backfillParams:{selector:{partitionSetName:t,repositorySelector:d},partitionNames:n,reexecutionSteps:r,fromFailure:i,tags:o}}});case 3:if(l=e.sent,p=l.data,u.current){e.next=7;break}return e.abrupt("return");case 7:p&&"LaunchBackfillSuccess"===p.launchPartitionBackfill.__typename?null===a||void 0===a||a(p.launchPartitionBackfill.backfillId):null===s||void 0===s||s(p);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=n.length,g=null===r||void 0===r?void 0:r.length,y=[m?"Submitting ".concat(x," ").concat(1===x?"run":"runs","\u2026"):x?"Submit ".concat(x," ").concat(1===x?"run":"runs"):"Select partitions to submit",!m&&g?"(".concat(g," selected ").concat(1===g?"step":"steps",")"):""].join(" ");return Object(k.jsx)(B.a,{flex:{justifyContent:"flex-end",alignItems:"center"},margin:{top:12},children:Object(k.jsx)(Zt.a,{runCount:x,config:{title:y,icon:"send-to",disabled:!x||m,onClick:f}})})},ln=$.c.a.withConfig({displayName:"PartitionsBackfill__FilteredRunsLink",componentId:"pww8rq-0"})(["text-decoration:underline;"]),dn=Object(O.gql)(Nt||(Nt=Object(f.a)(['\n  query PartitionsBackfillSelectorQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $pipelineSelector: PipelineSelector!\n  ) {\n    partitionSetOrError(\n      partitionSetName: $partitionSetName\n      repositorySelector: $repositorySelector\n    ) {\n      ... on PartitionSet {\n        id\n        name\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              name\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      runLauncher {\n        name\n      }\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "BACKFILL") {\n          id\n          healthy\n        }\n      }\n      runQueuingSupported\n    }\n  }\n  ',"\n"])),J.a),un=Object(O.gql)(Ct||(Ct=Object(f.a)(["\n  query PartitionStatusQuery($partitionSetName: String!, $repositorySelector: RepositorySelector!) {\n    partitionSetOrError(\n      partitionSetName: $partitionSetName\n      repositorySelector: $repositorySelector\n    ) {\n      ... on PartitionSet {\n        id\n        name\n        partitionStatusesOrError {\n          ... on PartitionStatuses {\n            results {\n              id\n              partitionName\n              runStatus\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n"])),J.a),pn=Object(O.gql)(_t||(_t=Object(f.a)(["\n  mutation LaunchPartitionBackfill($backfillParams: LaunchBackfillParams!) {\n    launchPartitionBackfill(backfillParams: $backfillParams) {\n      __typename\n      ... on LaunchBackfillSuccess {\n        backfillId\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n      ... on InvalidStepError {\n        invalidStepKey\n      }\n      ... on InvalidOutputError {\n        stepKey\n        invalidOutputName\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineRunConflict {\n        message\n      }\n      ... on ConflictingExecutionParamsError {\n        message\n      }\n      ... on PresetNotFoundError {\n        message\n      }\n      ... on PipelineConfigValidationInvalid {\n        pipelineName\n        errors {\n          __typename\n          message\n          path\n          reason\n        }\n      }\n    }\n  }\n  ","\n"])),J.a),jn={encode:function(e){return{cursor:e.cursor||void 0,cursorStack:e.cursorStack.length?e.cursorStack.join(","):void 0,pageSize:e.pageSize}},decode:function(e){return{cursor:e.cursor||null,cursorStack:e.cursorStack?e.cursorStack.split(","):[],pageSize:"all"===e.pageSize?"all":Number(e.pageSize||30)}}},bn={runs:[],partitionNames:[],loading:!1,loadingPercent:0};function hn(e,t){return mn.apply(this,arguments)}function mn(){return(mn=Object(Jt.a)(Wt.a.mark((function e(t,n){var r;return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query({fetchPolicy:"network-only",query:kn,variables:n});case 2:return r=e.sent,e.abrupt("return","PipelineRuns"===r.data.pipelineRunsOrError.__typename&&r.data.pipelineRunsOrError.results||[]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fn(e){var t,n=[],r=Object(_e.a)(e.partitionNames);try{var i=function(){var r=t.value;n.push({__typename:"Partition",name:r,runs:e.runs.filter((function(e){return e.tags.some((function(e){return e.key===Qe.a.Partition&&e.value===r}))}))})};for(r.s();!(t=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}return n}var On,xn,gn,yn,vn,Sn,Pn,En=Object(O.gql)(rn||(rn=Object(f.a)(["\n  fragment PartitionSetLoaderRunFragment on PipelineRun {\n    id\n    ...PartitionGraphSetRunFragment\n    ...PartitionRunMatrixRunFragment\n  }\n  ","\n  ","\n"])),Ut,ke),kn=Object(O.gql)(on||(on=Object(f.a)(["\n  query PartitionSetLoaderQuery($filter: PipelineRunsFilter!, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, cursor: $cursor, limit: $limit) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...PartitionSetLoaderRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n  ","\n  ","\n"])),En,J.a),wn=Object(O.gql)(an||(an=Object(f.a)(["\n  query PartitionSetNamesQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $limit: Int\n    $cursor: String\n    $reverse: Boolean\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        name\n        partitionsOrError(cursor: $cursor, limit: $limit, reverse: $reverse) {\n          ... on Partitions {\n            results {\n              name\n            }\n          }\n          ... on PythonError {\n            ...PythonErrorFragment\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),J.a),Rn=function(e){var t=e.pipelineName,n=e.pipelineMode,r=e.partitionSet,i=e.partitionSets,o=e.onChangePartitionSet,a=e.repoAddress,s=Object(h.e)().flagPipelineModeTuples,c=Object(V.c)(ut),l=Object(F.a)(c,2),j=l[0],b=l[1],f=Object(H.a)({queryKey:"stepQuery"}),g=Object(F.a)(f,2),y=g[0],v=void 0===y?"":y,P=g[1],E=p.useState(!1),w=Object(F.a)(E,2),R=w[0],N=w[1],C=p.useState(!1),_=Object(F.a)(C,2),I=_[0],A=_[1],T=function(e,t,n){var r=Object(K.a)(n),i=Object(O.useApolloClient)(),o=p.useRef(0),a=p.useState(bn),s=Object(F.a)(a,2),c=s[0],l=s[1],u=c.loading,j=c.loadingPercent,b=Object(H.a)(jn),h=Object(F.a)(b,2),m=h[0],f=m.cursor,x=m.cursorStack,g=m.pageSize,y=h[1];return p.useEffect((function(){var n=o.current+1;o.current=n,l((function(e){return Object(d.a)(Object(d.a)({},e),{},{runs:[],loading:!0,loadingPercent:0})}));var a=t.map((function(e){var t=e.value.split("="),n=Object(F.a)(t,2);return{key:n[0],value:n[1]}}));return function(){var t=Object(Jt.a)(Wt.a.mark((function t(){var s,c,u,p,j,b,h,m,O;return Wt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.query({fetchPolicy:"network-only",query:wn,variables:{partitionSetName:e,repositorySelector:r,reverse:!0,cursor:f,limit:"all"===g?1e5:g}});case 2:if(s=t.sent,o.current===n){t.next=5;break}return t.abrupt("return");case 5:c="PartitionSet"===s.data.partitionSetOrError.__typename&&"Partitions"===s.data.partitionSetOrError.partitionsOrError.__typename&&s.data.partitionSetOrError.partitionsOrError.results.map((function(e){return e.name}))||[],"PartitionSet"===s.data.partitionSetOrError.__typename&&"PythonError"===s.data.partitionSetOrError.partitionsOrError.__typename?(u=s.data.partitionSetOrError,p="PythonError"===u.partitionsOrError.__typename?u.partitionsOrError:void 0,l((function(e){return Object(d.a)(Object(d.a)({},e),{},{error:p,partitionNames:[]})}))):l((function(e){return Object(d.a)(Object(d.a)({},e),{},{partitionNames:c,loadingPercent:.05})})),j=5,b=Wt.a.mark((function t(r){var s,u,p;return Wt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Math.max(r-j,0),u=c.slice(s,r),t.next=4,Promise.all(u.map((function(t){return hn(i,{limit:1e3,filter:{tags:[].concat(Object(X.a)(a),[{key:Qe.a.PartitionSet,value:e},{key:Qe.a.Partition,value:t}])}})})));case 4:if(p=t.sent,o.current===n){t.next=7;break}return t.abrupt("return",{v:void 0});case 7:l((function(e){var t;return Object(d.a)(Object(d.a)({},e),{},{runs:(t=Object(X.a)(e.runs)).concat.apply(t,Object(X.a)(p)),loading:s>0,loadingPercent:.05+(c.length-s)/c.length*.95})}));case 8:case"end":return t.stop()}}),t)})),h=c.length;case 10:if(!(h>=0)){t.next=18;break}return t.delegateYield(b(h),"t0",12);case 12:if("object"!==typeof(m=t.t0)){t.next=15;break}return t.abrupt("return",m.v);case 15:h-=j,t.next=10;break;case 18:O=setInterval(Object(Jt.a)(Wt.a.mark((function t(){var r,s,u;return Wt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.current===n){t.next=2;break}return t.abrupt("return",clearInterval(O));case 2:return l((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!0,loadingPercent:0})})),t.next=5,hn(i,{limit:10,filter:{tags:[].concat(Object(X.a)(a),[{key:Qe.a.PartitionSet,value:e}])}});case 5:return r=t.sent,t.next=8,hn(i,{filter:{statuses:[Je.j.STARTED],tags:[].concat(Object(X.a)(a),[{key:Qe.a.PartitionSet,value:e}])}});case 8:if(s=t.sent,o.current===n){t.next=11;break}return t.abrupt("return",clearInterval(O));case 11:u=[].concat(Object(X.a)(s),Object(X.a)(r)).filter((function(e){return e.tags.find((function(e){return e.key===Qe.a.Partition&&c.includes(e.value)}))})),l((function(e){var t=e.runs.filter((function(e){return!u.some((function(t){return t.runId===e.runId}))})).concat(u);return Object(d.a)(Object(d.a)({},e),{},{loading:!1,runs:t})}));case 13:case"end":return t.stop()}}),t)}))),1e4);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){o.current+=1}}),[g,f,i,e,t,r]),{loading:u,loadingPercent:j,partitions:fn(c),error:c.error,pageSize:g,setPageSize:function(e){y({cursor:null,cursorStack:[],pageSize:e})},paginationProps:{hasPrevCursor:null!==f,hasNextCursor:c.partitionNames.length>=g,popCursor:function(){null!==f&&(l({loading:!1,loadingPercent:0,partitionNames:[],runs:[]}),y({pageSize:g,cursorStack:x.slice(0,x.length-1),cursor:x.length?x[x.length-1]:null}))},advanceCursor:function(){l({loading:!1,loadingPercent:0,partitionNames:[],runs:[]}),y({pageSize:g,cursorStack:f?[].concat(Object(X.a)(x),[f]):x,cursor:c.partitionNames[0]})},reset:function(){l(bn)}}}}(r.name,j,a),L=T.loading,D=T.error,G=T.loadingPercent,q=T.partitions,M=T.paginationProps,z=T.pageSize,$=T.setPageSize,U=Object(m.c)().canLaunchPartitionBackfill,ee=p.useCallback((function(){return A(!0)}),[]);p.useEffect((function(){D&&Object(W.b)({body:Object(k.jsx)(J.b,{error:D})})}),[D]);var te=new Set;q.forEach((function(e){e.runs.forEach((function(e){e.stepStats.forEach((function(e){te.add(e.stepKey)}))}))}));var ne=i.filter((function(e){return e.mode===n}));return Object(k.jsxs)("div",{children:[Object(k.jsx)(u.h,{canEscapeKeyClose:!I,canOutsideClickClose:!I,onClose:function(){return N(!1)},style:{width:800,background:Q.a.WHITE},title:"Launch ".concat(r.name," backfill"),isOpen:R,children:R&&Object(k.jsx)(sn,{partitionSetName:r.name,pipelineName:t,onLaunch:function(e,t){P(t),b([{token:"tag",value:"dagster/backfill=".concat(e)}]),N(!1)},onSubmit:ee,repoAddress:a})}),Object(k.jsxs)(Nn,{children:[s&&ne.length<=1?null:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Qt,{selected:r,partitionSets:i,onSelect:o}),Object(k.jsx)("div",{style:{width:10,height:10}})]}),Object(k.jsxs)(B.a,{flex:{justifyContent:"space-between",alignItems:"center"},style:{flex:1},children:[U?Object(k.jsx)(u.c,{style:{flexShrink:0},onClick:function(){return N(!R)},icon:x.a.ADD,active:R,children:"Launch backfill"}):Object(k.jsx)(Y.a,{content:m.a,children:Object(k.jsx)(u.c,{style:{flexShrink:0},icon:x.a.ADD,disabled:!0,children:"Launch backfill"})}),L&&Object(k.jsxs)(B.a,{margin:{horizontal:8},flex:{alignItems:"center"},style:{overflow:"hidden"},children:[Object(k.jsx)(S.a,{purpose:"body-text",value:G}),Object(k.jsx)("div",{style:{width:5,flexShrink:0}}),Object(k.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:"Loading\xa0partitions\u2026"})]}),Object(k.jsx)("div",{style:{flex:1}}),Object(k.jsx)(Ne,{value:M.hasPrevCursor?void 0:z,onChange:function(e){$(e),M.reset()}}),Object(k.jsx)("div",{style:{width:10}}),Object(k.jsx)(Z.a,Object(d.a)({},M))]})]}),Object(k.jsxs)("div",{style:{position:"relative"},children:[Object(k.jsx)($t,{partitions:q,pipelineName:t,repoAddress:a,runTags:j,setRunTags:b,stepQuery:v,setStepQuery:P}),Object(k.jsx)(Ee,{partitions:q,allStepKeys:Array.from(te).sort()})]})]})},Nn=$.c.div.withConfig({displayName:"PartitionView__PartitionPagerContainer",componentId:"sc-1hyhlj4-0"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;flex-direction:row;@media (max-width:1000px){flex-direction:column;align-items:stretch;}"]),Cn=function(e){var t=e.pipelinePath,n=e.repoAddress,r=Object(g.b)(t),i=r.pipelineMode,o=r.pipelineName;Object(y.a)(r),Object(g.e)(e);var a=Object(K.a)(n),s=Object(O.useQuery)(_n,{variables:{repositorySelector:a,pipelineName:o},fetchPolicy:"network-only"}),c=Object(H.a)({queryKey:"partitionSet"}),l=Object(F.a)(c,2),d=l[0],p=void 0===d?void 0:d,j=l[1];return Object(k.jsx)(U.a,{queryResult:s,children:function(e){var t=e.partitionSetsOrError;if("PartitionSets"!==t.__typename)return Object(k.jsx)(In,{children:Object(k.jsx)(u.r,{icon:"multi-select",title:"Partitions",description:t.message})});if(!t.results.length)return Object(k.jsx)(In,{children:Object(k.jsx)(u.r,{icon:"multi-select",title:"Partitions",description:Object(k.jsxs)("p",{children:["There are no partition sets defined for pipeline ",Object(k.jsx)("code",{children:o}),"."]})})});var r=p&&!!t.results.filter((function(e){return e.name===p})).length&&p?t.results.filter((function(e){return e.name===p}))[0]:t.results[0];return Object(k.jsx)(B.a,{padding:20,children:Object(k.jsx)(Rn,{partitionSet:r,partitionSets:t.results,onChangePartitionSet:function(e){return j(e.name)},pipelineName:o,pipelineMode:i,repoAddress:n})})}})},_n=Object(O.gql)(On||(On=Object(f.a)(["\n  query PipelinePartitionsRootQuery(\n    $pipelineName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetsOrError(pipelineName: $pipelineName, repositorySelector: $repositorySelector) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          mode\n          name\n        }\n      }\n    }\n  }\n"]))),In=$.c.div.withConfig({displayName:"PipelinePartitionsRoot__Wrapper",componentId:"h8uhw4-0"})(["width:100%;height:100%;min-width:0;"]),An=n(804),Tn=n(710),Fn=n(51),Ln=n(640),Dn=n(781),Gn=n(617),qn=n(805),Mn=function(e){var t=Object(h.e)().flagPipelineModeTuples,n=Object(Fn.g)(e.repoAddress,e.explorerPath.pipelineName),r=Object(O.useQuery)(zn,{fetchPolicy:"cache-and-network",partialRefetch:!0,variables:{pipelineSelector:n}});return Object(k.jsx)(U.a,{queryResult:r,children:function(n){var r=n.pipelineSnapshotOrError;if("PipelineSnapshot"!==r.__typename)return Object(k.jsx)(Dn.a,{result:r});var i=r.modes;return t&&(i=i.filter((function(t){return t.name===e.explorerPath.pipelineMode}))),Object(k.jsxs)("div",{children:[Object(k.jsx)(Gn.d,{title:"Description",children:Object(k.jsx)(B.a,{padding:12,children:Object(k.jsx)(Ln.a,{description:r.description||"No description provided"})})}),Object(k.jsx)(Gn.d,{title:"Resources",children:Object(k.jsx)(B.a,{padding:12,children:i.map((function(e){return Object(k.jsx)(qn.b,{mode:e},e.name)}))})})]})}})},zn=Object(O.gql)(xn||(xn=Object(f.a)(["\n  query JobOverviewSidebarQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        description\n        modes {\n          id\n          ...SidebarModeInfoFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n    }\n  }\n  ","\n"])),qn.a),$n=function(e){var t=e.match,n=e.repoAddress,r=Object(b.h)(),i=Object(b.i)(),o=Object(g.b)(t.params[0]),a=Object(h.e)().flagPipelineModeTuples;return Object(y.a)(o),Object(g.e)({pipelinePath:Object(g.c)(o)}),Object(k.jsx)(An.a.Provider,{value:{sidebarTab:Object(k.jsx)(Mn,{repoAddress:n,explorerPath:o})},children:Object(k.jsx)(Tn.a,{repoAddress:n,explorerPath:o,onChangeExplorerPath:function(e,t){r[t]({search:i.search,pathname:Object(q.b)(n,"/".concat(a?"jobs":"pipelines","/").concat(Object(g.c)(e)))})}})})},Hn=n(808),Bn=function(e){var t=e.repoAddress,n=Object(m.c)().canLaunchPipelineExecution;return Object(g.d)(),Object(k.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[Object(k.jsx)(z.a,{repoAddress:t}),Object(k.jsxs)(b.e,{children:[Object(k.jsx)(b.c,{path:["/workspace/:repoPath/pipelines/:pipelinePath/playground/setup","/workspace/:repoPath/jobs/:pipelinePath/playground/setup"],render:function(e){var r=e.match.params,i=r.pipelinePath,o=r.repoPath;return n?Object(k.jsx)(M,{pipelinePath:i,repoAddress:t}):Object(k.jsx)(b.b,{to:"/workspace/".concat(o,"/pipelines/").concat(i)})}}),Object(k.jsx)(b.c,{path:["/workspace/:repoPath/pipelines/:pipelinePath/playground","/workspace/:repoPath/jobs/:pipelinePath/playground"],render:function(e){var r=e.match.params,i=r.pipelinePath,o=r.repoPath;return n?Object(k.jsx)(_,{pipelinePath:e.match.params.pipelinePath,repoAddress:t}):Object(k.jsx)(b.b,{to:"/workspace/".concat(o,"/pipelines/").concat(i)})}}),Object(k.jsx)(b.c,{path:["/workspace/:repoPath/pipelines/:pipelinePath/runs/:runId","/workspace/:repoPath/jobs/:pipelinePath/runs/:runId"],render:function(e){return Object(k.jsx)(b.b,{to:"/instance/runs/".concat(e.match.params.runId)})}}),Object(k.jsx)(b.c,{path:["/workspace/:repoPath/pipelines/:pipelinePath/runs","/workspace/:repoPath/jobs/:pipelinePath/runs"],render:function(e){return Object(k.jsx)(Hn.a,{pipelinePath:e.match.params.pipelinePath})}}),Object(k.jsx)(b.c,{path:["/workspace/:repoPath/pipelines/:pipelinePath/partitions","/workspace/:repoPath/jobs/:pipelinePath/partitions"],render:function(e){return Object(k.jsx)(Cn,{pipelinePath:e.match.params.pipelinePath,repoAddress:t})}}),Object(k.jsx)(b.c,{path:["/workspace/:repoPath/pipelines/:pipelinePath/overview","/workspace/:repoPath/jobs/:pipelinePath/overview"],render:function(e){return Object(k.jsx)(b.b,{to:"/workspace/".concat(e.match.params.repoPath,"/jobs/").concat(e.match.params.pipelinePath)})}}),Object(k.jsx)(b.c,{path:["/workspace/:repoPath/pipelines/(/?.*)","/workspace/:repoPath/jobs/(/?.*)"],render:function(e){return Object(k.jsx)($n,Object(d.a)(Object(d.a)({},e),{},{repoAddress:t}))}})]})]})},Un=n(609),Kn=n(204),Qn=n(683),Yn=n(1055),Wn=n(107),Jn=n(83),Vn=n(633),Zn=(gn={},Object(ee.a)(gn,Je.f.SUCCESS,Q.a.BLUE3),Object(ee.a)(gn,Je.f.FAILURE,Q.a.RED3),Object(ee.a)(gn,Je.f.STARTED,Q.a.GRAY3),Object(ee.a)(gn,Je.f.SKIPPED,Q.a.GOLD3),gn),Xn=function(e){var t=e.ticks,n=e.nextTick,r=e.onHoverTick,i=e.onSelectTick,o=p.useState(Date.now()),a=Object(F.a)(o,2),s=a[0],c=a[1],l=p.useState(Date.now()),d=Object(F.a)(l,2),u=d[0],j=d[1],b=p.useState(!1),h=Object(F.a)(b,2),m=h[0],f=h[1];p.useEffect((function(){var e=setInterval((function(){!m&&c(Date.now())}),100);return function(){return clearInterval(e)}})),p.useEffect((function(){m||n&&!(s<1e3*n.timestamp)||j(s)}),[m,n,s]);var O=n&&1e3*n.timestamp<=s?4+Math.sin(2*Math.PI*(s%2e3)/2e3):3,x=t.map((function(e){return{x:1e3*e.timestamp,y:0}})),g=t.map((function(e){return Zn[e.status]})),y=Array(t.length).fill(3);n&&(x.push({x:1e3*n.timestamp,y:0}),g.push(Q.a.GRAY5),y.push(O));var v={labels:["ticks"],datasets:[{label:"now",data:[{x:u-6e5,y:0},{x:u,y:0}],borderColor:Q.a.LIGHT_GRAY4,borderWidth:1,pointBorderWidth:2,pointBorderColor:Q.a.GRAY5,pointRadius:1,pointHoverRadius:1},{label:"ticks",data:x,borderColor:Q.a.LIGHT_GRAY4,borderWidth:0,backgroundColor:"rgba(0,0,0,0)",pointBackgroundColor:"rgba(0,0,0,0)",pointBorderWidth:2,pointBorderColor:g,pointRadius:y,pointHoverBorderWidth:2,pointHoverRadius:5,pointHoverBorderColor:g}]},S={animation:{duration:0},scales:{y:{id:"y",display:!1,grid:{display:!1},title:{display:!1}},x:{id:"x",type:"time",title:{display:!1},grid:{display:!0},bounds:"ticks",min:u-3e5,max:u+6e4,time:{minUnit:"minute"}}},plugins:{legend:{display:!1},tooltip:{displayColors:!1,callbacks:{label:function(e){var n;if(!e.datasetIndex)return"Current time";if(void 0===e.dataIndex)return"";if(e.dataIndex===t.length)return"";var r=t[e.dataIndex];return r.status===Je.f.SKIPPED&&r.skipReason?r.skipReason:r.status===Je.f.SUCCESS&&r.runIds.length?r.runIds:r.status===Je.f.SUCCESS&&r.originRunIds?r.originRunIds:r.status===Je.f.FAILURE&&(null===(n=r.error)||void 0===n?void 0:n.message)?r.error.message:""}}}},onClick:function(e,n){if(n.length){var r=Object(F.a)(n,1)[0];if(void 0!==r.datasetIndex&&void 0!==r.index){var o=t[r.index];i(o)}}},onHover:function(e,n){if((null===e||void 0===e?void 0:e.target)instanceof HTMLElement&&(e.target.style.cursor=n.length?"pointer":"default"),n.length&&!m){f(!0);var i=n.filter((function(e){return 1===e.datasetIndex&&void 0!==e.index&&e.index<t.length})),o=Object(F.a)(i,1)[0];if(!o)return;var a=t[o.index];r(a)}else!n.length&&m&&(f(!1),r(void 0))}};return Object(k.jsx)(te.a,{type:"line",data:v,height:30,options:S},"100%")};n(818);Qn.a.register(Yn.a);var er,tr,nr,rr,ir,or,ar=18e5,sr=(yn={},Object(ee.a)(yn,Je.f.SUCCESS,Q.a.BLUE3),Object(ee.a)(yn,Je.f.FAILURE,Q.a.RED3),Object(ee.a)(yn,Je.f.STARTED,Q.a.GRAY3),Object(ee.a)(yn,Je.f.SKIPPED,Q.a.GOLD3),yn),cr=(vn={},Object(ee.a)(vn,Je.f.SUCCESS,!0),Object(ee.a)(vn,Je.f.FAILURE,!0),Object(ee.a)(vn,Je.f.STARTED,!0),Object(ee.a)(vn,Je.f.SKIPPED,!0),vn),lr=(Sn={},Object(ee.a)(Sn,Je.f.SUCCESS,"Requested"),Object(ee.a)(Sn,Je.f.FAILURE,"Failed"),Object(ee.a)(Sn,Je.f.STARTED,"Started"),Object(ee.a)(Sn,Je.f.SKIPPED,"Skipped"),Sn),dr=[{id:"recent",label:"Recent",range:1},{id:"1d",label:"1 day",range:1},{id:"7d",label:"7 days",range:7},{id:"14d",label:"14 days",range:14},{id:"30d",label:"30 days",range:30},{id:"all",label:"All"}],ur=function(e){var t,n=e.name,r=e.repoAddress,i=e.onHighlightRunIds,o=e.showRecent,a=p.useState("recent"),s=Object(F.a)(a,2),c=s[0],l=s[1],j=p.useState(cr),b=Object(F.a)(j,2),h=b[0],m=b[1],f=p.useState(!1),x=Object(F.a)(f,2),g=x[0],y=x[1],v=p.useState(),P=Object(F.a)(v,2),E=P[0],w=P[1];p.useEffect((function(){o||"recent"!==c||l("1d")}),[c,o]);var R=null===(t=dr.find((function(e){return e.id===c})))||void 0===t?void 0:t.range,N=Object(O.useQuery)(jr,{variables:{instigationSelector:Object(d.a)(Object(d.a)({},Object(K.a)(r)),{},{name:n}),dayRange:R,limit:"recent"===c?15:void 0},fetchPolicy:"cache-and-network",partialRefetch:!0,pollInterval:"recent"!==c||g?0:1e3}).data,C=Object(k.jsx)(u.C,{selectedTabId:c,children:dr.map((function(e){return"recent"!==e.id||o?Object(k.jsx)(u.B,{id:e.id,title:Object(k.jsx)(tn.a,{underline:!1,onClick:function(){return l(e.id)},children:e.label})},e.id):null}))});if(!N)return Object(k.jsxs)(qe.a,{direction:"column",spacing:12,children:[Object(k.jsx)(Jn.f,{children:"Tick History"}),C,Object(k.jsx)(S.a,{purpose:"section"})]});if("PythonError"===N.instigationStateOrError.__typename)return Object(k.jsx)(J.b,{error:N.instigationStateOrError});var _=N.instigationStateOrError,I=_.ticks,A=_.nextTick,T=_.instigationType,L=I.filter((function(e){return e.status===Je.f.SKIPPED?T===Je.g.SCHEDULE&&h[e.status]:h[e.status]})),D=function(e){var t=e.status;return Object(k.jsx)(u.e,{label:lr[t],checked:h[t],disabled:!I.filter((function(e){return e.status===t})).length,onClick:function(){return m(Object(d.a)(Object(d.a)({},h),{},Object(ee.a)({},t,!h[t])))}})},G=function(e){w(e),e&&e.error&&e.status===Je.f.FAILURE&&Object(W.b)({title:"Python Error",body:Object(k.jsx)(J.b,{error:e.error})})},q=function(e){e||y(!1),(null===e||void 0===e?void 0:e.runIds)&&(i(e.runIds),y(!0))},M=Date.now();return Object(k.jsxs)(qe.a,{direction:"column",spacing:12,children:[Object(k.jsx)(Jn.f,{children:"Tick History"}),C,o&&"recent"===c?Object(k.jsx)(Xn,{ticks:I,nextTick:A,onHoverTick:q,onSelectTick:G}):I.length?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(B.a,{flex:{justifyContent:"flex-end"},children:Object(k.jsxs)(qe.a,{direction:"row",spacing:16,children:[Object(k.jsx)(D,{status:Je.f.SUCCESS}),Object(k.jsx)(D,{status:Je.f.FAILURE}),T===Je.g.SCHEDULE?Object(k.jsx)(D,{status:Je.f.SKIPPED}):null]})}),Object(k.jsx)(pr,{ticks:L,selectedTick:E,onSelectTick:G,onHoverTick:q,selectedTab:c,maxBounds:"all"===c?void 0:{min:M-864e5*(R||0),max:Date.now()}})]}):Object(k.jsx)(B.a,{margin:{top:16,bottom:32},flex:{justifyContent:"center"},children:Object(k.jsx)(u.r,{description:"No ticks to display"})}),Object(k.jsxs)(u.h,{isOpen:E&&(E.status===Je.f.SUCCESS||E.status===Je.f.SKIPPED),onClose:function(){return w(void 0)},style:{width:E&&E.status===Je.f.SUCCESS?"90vw":"50vw"},title:E?Object(k.jsx)(Wn.a,{timestamp:E.timestamp}):null,children:[E?Object(k.jsxs)(B.a,{background:Q.a.WHITE,padding:16,margin:{bottom:16},children:[E.status===Je.f.SUCCESS?E.runIds.length?Object(k.jsx)(Vn.b,{runIds:E.runIds}):Object(k.jsx)(Vn.a,{originRunIds:E.originRunIds}):null,E.status===Je.f.SKIPPED?Object(k.jsxs)(qe.a,{direction:"row",spacing:16,children:[Object(k.jsx)(Vn.d,{tick:E}),Object(k.jsx)("span",{children:E.skipReason||"No skip reason provided"})]}):null]}):null,Object(k.jsx)("div",{className:Ie.a.DIALOG_FOOTER,children:Object(k.jsx)("div",{className:Ie.a.DIALOG_FOOTER_ACTIONS,children:Object(k.jsx)(u.c,{intent:"primary",onClick:function(){return w(void 0)},children:"OK"})})})]})]})},pr=function(e){var t=e.ticks,n=e.selectedTick,r=e.onSelectTick,i=e.onHoverTick,o=e.selectedTab,a=e.maxBounds,s=p.useState(null),c=Object(F.a)(s,2),l=c[0],u=c[1],j=p.useState(),b=Object(F.a)(j,2),h=b[0],m=b[1],f=p.useState((function(){return Date.now()})),O=Object(F.a)(f,1)[0];p.useEffect((function(){u(null)}),[o]);var x=t.map((function(e){return{x:1e3*e.timestamp,y:0}})),g={labels:["ticks"],datasets:[{label:"ticks",data:x,borderColor:Q.a.LIGHT_GRAY4,borderWidth:0,backgroundColor:"rgba(0,0,0,0)",pointBackgroundColor:t.map((function(e){return sr[e.status]})),pointBorderWidth:1,pointBorderColor:t.map((function(e){return n&&n.id===e.id?Q.a.DARK_GRAY5:sr[e.status]})),pointRadius:t.map((function(e){return n&&n.id===e.id?5:3})),pointHoverBorderWidth:1,pointHoverRadius:5,showLine:!0}]},y=function(){if(a)return a;var e=Math.min.apply(Math,Object(X.a)(x.map((function(e){return e.x})))),t=Math.max.apply(Math,Object(X.a)(x.map((function(e){return e.x})))),n=(t-e)/25;return{min:t?e-n:O-ar,max:t?t+n:O}},v=function(){return l||y()},S=function(e){return ht()(e).format("MMM D")},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=e.slice(0,t);return r.length<e.length-n?"".concat(r,"..."):e},E=l?S(l.min)===S(l.max)?S(l.min):"".concat(S(l.min)," - ").concat(S(l.max)):void 0,w={indexAxis:"x",scales:{y:{id:"y",display:!1},x:Object(d.a)(Object(d.a)({id:"x",type:"time",title:{display:!1},bounds:"ticks",grid:{display:!0,drawBorder:!0},ticks:{source:"auto"}},v()),{},{time:{minUnit:function(){var e=v(),t=e.min,n=e.max-t,r=36e5,i=24*r;return n<2*r?"minute":n<2*i?"hour":n<5184e6?"day":n<63072e6?"month":"year"}()}})},onHover:function(e,n){if((null===e||void 0===e?void 0:e.target)instanceof HTMLElement&&(e.target.style.cursor=n.length?"pointer":"default"),n.length&&n[0]&&n[0].index<t.length){var r=t[n[0].index];m(r),i(r)}else i(void 0)},onClick:function(e,n){if(n.length){var i=Object(F.a)(n,1)[0];if(void 0!==i.datasetIndex&&void 0!==i.index){var o=t[i.index];r(o)}}},plugins:{title:{display:!!E,text:E},legend:{display:!1},tooltip:{displayColors:!1,callbacks:{title:function(){return h?ht()(1e3*h.timestamp).format("MMM D, YYYY h:mm:ss A z"):""},label:function(){var e;return h?h.status===Je.f.SKIPPED&&h.skipReason?P(h.skipReason):h.status===Je.f.SUCCESS&&h.runIds.length?h.runIds:h.status===Je.f.FAILURE&&(null===(e=h.error)||void 0===e?void 0:e.message)?P(h.error.message):"":""}}},zoom:{limits:{x:{min:y().min,max:y().max}},zoom:{mode:"x",wheel:{enabled:!0},pinch:{enabled:!0},onZoom:function(e){var t=e.chart.scales.x,n=t.min,r=t.max;if(n&&r)if(r-n>ar)u({min:n,max:r});else if(l){var i=(l.max-l.min-ar)/2;u({min:l.min+i,max:l.max-i})}else{var o=(y().max-y().min-ar)/2;u({min:y().min+o,max:y().max-o})}}},pan:{enabled:!0,mode:"x",onPan:function(e){var t=e.chart.scales.x,n=t.min,r=t.max;n&&r&&u({min:n,max:r})}}}}};return Object(k.jsxs)("div",{children:[Object(k.jsx)(te.a,{type:"line",data:g,options:w,height:30}),Object(k.jsx)("div",{style:{fontSize:13,opacity:.5},children:Object(k.jsxs)(B.a,{flex:{justifyContent:"center"},margin:{top:8},children:["Tip: Scroll / pinch to zoom, drag to pan, click to see tick details.",l?Object(k.jsx)(B.a,{margin:{left:8},children:Object(k.jsx)(tn.a,{onClick:function(){return u(null)},children:"Reset zoom"})}):null]})})]})},jr=Object(O.gql)(Pn||(Pn=Object(f.a)(["\n  query TickHistoryQuery($instigationSelector: InstigationSelector!, $dayRange: Int, $limit: Int) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      __typename\n      ... on InstigationState {\n        id\n        instigationType\n        nextTick {\n          timestamp\n        }\n        ticks(dayRange: $dayRange, limit: $limit) {\n          id\n          status\n          timestamp\n          skipReason\n          runIds\n          originRunIds\n          error {\n            ...PythonErrorFragment\n          }\n          ...TickTagFragment\n        }\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n  ","\n  ","\n"])),J.a,Vn.c),br=n(608),hr=function(e){var t=e.loading,n=e.data,r=e.highlightedIds;return Object(k.jsxs)(qe.a,{direction:"column",spacing:4,children:[Object(k.jsx)(B.a,{padding:{bottom:12},border:{side:"bottom",width:1,color:Q.a.LIGHT_GRAY3},flex:{direction:"row"},children:Object(k.jsx)(Jn.f,{children:"Latest runs"})}),Object(k.jsx)("div",{style:{color:Q.a.GRAY3},children:function(){if(t)return Object(k.jsx)(B.a,{margin:{top:8},children:"Loading..."});if(!n||"PipelineRuns"!==n.__typename)return Object(k.jsx)(B.a,{margin:{top:8},children:"Error!"});var e=null===n||void 0===n?void 0:n.results;return Object(k.jsx)(nt.b,{onSetFilter:function(){},runs:e,highlightedIds:r})}()})]})},mr=Object(O.gql)(er||(er=Object(f.a)(["\n  fragment PreviousRunsFragment on PipelineRunsOrError {\n    __typename\n    ... on PipelineRuns {\n      results {\n        id\n        ... on PipelineRun {\n          ...RunTableRunFragment\n        }\n      }\n    }\n  }\n  ","\n"])),nt.a),fr=n(774),Or=n(214),xr=n(616),gr=n(700),yr=n(118),vr=n(203),Sr=n(701),Pr=n(810),Er=n(189),kr=n(717),wr={showSeconds:!1,showTimezone:!0},Rr=function(e){var t=e.repoAddress,n=e.schedule,r=e.countdownDuration,i=e.countdownStatus,o=e.onRefresh,a=n.cronSchedule,s=n.executionTimezone,c=n.futureTicks,l=n.name,d=n.partitionSet,u=n.pipelineName,j=Object(h.e)().flagPipelineModeTuples,b=Object(fr.a)(),m=p.useState("Click to copy"),f=Object(F.a)(m,2),O=f[0],x=f[1],g=Object(gr.a)({duration:r,status:i});p.useEffect((function(){var e;return"Copied!"===O&&(e=setTimeout((function(){x("Click to copy")}),2e3)),function(){e&&clearTimeout(e)}}),[O]);var y=n.scheduleState,v=y.status,S=y.id,P=y.ticks,E=P.length>0?P[0]:null,w=v===Je.e.RUNNING,R="idle"===i||0===g,N=Math.floor(g/1e3);return Object(k.jsxs)(qe.a,{direction:"column",spacing:16,children:[Object(k.jsx)(vr.a,{title:Object(k.jsxs)(qe.a,{alignItems:"center",direction:"row",spacing:2,children:[Object(k.jsx)(Jn.d,{children:l}),Object(k.jsx)(B.a,{margin:{horizontal:12},children:Object(k.jsx)(Er.b,{repoAddress:t,schedule:n})}),c.results.length&&w?Object(k.jsxs)(qe.a,{direction:"row",spacing:4,children:[Object(k.jsx)("div",{children:"Next tick:"}),Object(k.jsx)(Wn.a,{timestamp:c.results[0].timestamp,timezone:s,timeFormat:wr})]}):null]}),icon:"schedule",description:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(He.b,{to:Object(q.b)(t,"/schedules"),children:"Schedule"})," in"," ",Object(k.jsx)(Or.a,{repoAddress:t})]}),right:Object(k.jsx)(B.a,{margin:{top:4},children:Object(k.jsxs)(qe.a,{direction:"column",spacing:8,alignItems:"flex-end",children:[Object(k.jsx)(Sr.a,{refreshing:R,seconds:N,onRefresh:o}),Object(k.jsx)(Y.a,{content:O,children:Object(k.jsx)(tn.a,{color:{link:Q.a.GRAY3,hover:Q.a.GRAY1},onClick:function(){b(S),x("Copied!")},children:Object(k.jsx)(Jn.e,{children:"id: ".concat(S.slice(0,8))})})})]})})}),Object(k.jsx)(yr.a,{rows:[n.description?{key:"Description",value:n.description}:null,{key:"Latest tick",value:E?Object(k.jsxs)(qe.a,{direction:"row",spacing:8,alignItems:"center",children:[Object(k.jsx)(Wn.a,{timestamp:E.timestamp,timezone:s,timeFormat:wr}),Object(k.jsx)(Vn.d,{tick:E,instigationType:Je.g.SCHEDULE})]}):"Schedule has never run"},{key:j?"Job":"Pipeline",value:Object(k.jsx)(xr.a,{pipelineName:u,pipelineHrefContext:t,mode:n.mode})},{key:"Partition Set",value:d?Object(k.jsx)(Pr.a,{schedule:n,repoAddress:t}):"None"},{key:"Schedule",value:a?Object(k.jsxs)(qe.a,{direction:"row",spacing:8,children:[Object(k.jsx)("span",{children:Object(kr.a)(a)}),Object(k.jsxs)(Jn.c,{children:["(",a,")"]})]}):Object(k.jsx)("div",{children:"\u2014"})},s?{key:"Execution timezone",value:s}:null].filter(Boolean)})]})},Nr=n(651),Cr=n(652),_r=15e3,Ir=function(e){var t=e.scheduleName,n=e.repoAddress,r=e.runTab;Object(Un.a)("Schedule: ".concat(t));var i=p.useState([]),o=Object(F.a)(i,2),a=o[0],s=o[1],c=Object(d.a)(Object(d.a)({},Object(K.a)(n)),{},{scheduleName:t}),l=Object(O.useQuery)(Tr,{variables:{scheduleSelector:c},fetchPolicy:"cache-and-network",pollInterval:_r,partialRefetch:!0,notifyOnNetworkStatusChange:!0}),u=l.networkStatus,j=l.refetch,b=l.stopPolling,h=l.startPolling,m=function(){var e=Object(Jt.a)(Wt.a.mark((function e(){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.next=3,j();case 3:h(_r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=u===O.NetworkStatus.ready?"counting":"idle";return Object(k.jsx)(U.a,{queryResult:l,allowStaleData:!0,children:function(e){var t=e.scheduleOrError,i=e.scheduler,o=e.instance;return"Schedule"!==t.__typename?null:Object(k.jsx)(ie,{children:Object(k.jsx)(br.a,{children:Object(k.jsxs)(qe.a,{direction:"column",spacing:20,children:[Object(k.jsx)(Cr.b,{schedulerOrError:i,daemonHealth:o.daemonHealth,errorsOnly:!0}),Object(k.jsx)(Rr,{repoAddress:n,schedule:t,countdownDuration:_r,countdownStatus:f,onRefresh:function(){return m()}}),Object(k.jsx)(ur,{repoAddress:n,name:t.name,onHighlightRunIds:function(e){return s(e)}}),Object(k.jsx)(Ar,{repoAddress:n,schedule:t,highlightedIds:a,runTab:r})]})})})}})},Ar=function(e){var t=e.schedule,n=e.highlightedIds,r=Object(O.useQuery)(Fr,{fetchPolicy:"cache-and-network",variables:{limit:20,filter:{pipelineName:t.pipelineName,tags:[{key:Qe.a.ScheduleName,value:t.name}]}},partialRefetch:!0,pollInterval:15e3}),i=r.data,o=r.loading;return Object(k.jsx)(hr,{loading:o,data:null===i||void 0===i?void 0:i.pipelineRunsOrError,highlightedIds:n})},Tr=Object(O.gql)(tr||(tr=Object(f.a)(["\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduler {\n      ...SchedulerFragment\n    }\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),Cr.a,Nr.c,Kn.a),Fr=Object(O.gql)(nr||(nr=Object(f.a)(["\n  query PreviousRunsForScheduleQuery($filter: PipelineRunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      __typename\n      ...PreviousRunsFragment\n    }\n  }\n  ","\n"])),mr),Lr=n(812),Dr=n(718),Gr=n(719),qr=function(e){var t,n=e.sensor,r=e.highlightedIds,i=Object(O.useQuery)(zr,{fetchPolicy:"cache-and-network",variables:{limit:20,filter:{pipelineName:1===(null===(t=n.targets)||void 0===t?void 0:t.length)?n.targets[0].pipelineName:void 0,tags:[{key:Qe.a.SensorName,value:n.name}]}}}),o=i.data,a=i.loading;return Object(k.jsx)(hr,{loading:a,data:null===o||void 0===o?void 0:o.pipelineRunsOrError,highlightedIds:r})},Mr=function(){return Object(k.jsxs)(qe.a,{direction:"column",spacing:4,children:[Object(k.jsx)(B.a,{padding:{bottom:12},border:{side:"bottom",width:1,color:Q.a.LIGHT_GRAY3},flex:{direction:"row"},children:Object(k.jsx)(Jn.f,{children:"Latest runs"})}),Object(k.jsx)("div",{style:{color:Q.a.GRAY3},children:Object(k.jsx)(B.a,{margin:{vertical:64},children:Object(k.jsx)(u.r,{description:"Sensor does not target a pipeline."})})})]})},zr=Object(O.gql)(rr||(rr=Object(f.a)(["\n  query PreviousRunsForSensorQuery($filter: PipelineRunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      __typename\n      ...PreviousRunsFragment\n    }\n  }\n  ","\n"])),mr),$r=15e3,Hr=function(e){var t=e.sensorName,n=e.repoAddress;Object(Un.a)("Sensor: ".concat(t));var r=p.useState([]),i=Object(F.a)(r,2),o=i[0],a=i[1],s=Object(d.a)(Object(d.a)({},Object(K.a)(n)),{},{sensorName:t}),c=Object(O.useQuery)(Br,{variables:{sensorSelector:s},fetchPolicy:"cache-and-network",pollInterval:$r,partialRefetch:!0,notifyOnNetworkStatusChange:!0}),l=c.networkStatus,u=c.refetch,j=c.stopPolling,b=c.startPolling,h=function(){var e=Object(Jt.a)(Wt.a.mark((function e(){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(),e.next=3,u();case 3:b($r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=l===O.NetworkStatus.ready?"counting":"idle";return Object(k.jsx)(U.a,{queryResult:c,allowStaleData:!0,children:function(e){var t=e.sensorOrError,r=e.instance;return"Sensor"!==t.__typename?null:Object(k.jsx)(br.a,{children:Object(k.jsxs)(qe.a,{direction:"column",spacing:24,children:[Object(k.jsx)(Gr.a,{daemonHealth:r.daemonHealth}),Object(k.jsx)(Lr.a,{repoAddress:n,sensor:t,daemonHealth:r.daemonHealth.daemonStatus.healthy,countdownDuration:$r,countdownStatus:m,onRefresh:function(){return h()}}),Object(k.jsx)(ur,{repoAddress:n,name:t.name,showRecent:!0,onHighlightRunIds:function(e){return a(e)}}),t.targets&&t.targets.length?Object(k.jsx)(qr,{repoAddress:n,sensor:t,highlightedIds:o}):Object(k.jsx)(Mr,{repoAddress:n,sensor:t,highlightedIds:o})]})})}})},Br=Object(O.gql)(ir||(ir=Object(f.a)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      __typename\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n    }\n    instance {\n      ...InstanceHealthFragment\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"])),Dr.a,Kn.a),Ur=n(809),Kr=n(1063),Qr=n(1068),Yr=n(784),Wr=n(727),Jr=n(821),Vr=n(702),Zr=n(712),Xr=n(291),ei=n(205),ti=n(171),ni=n(157),ri=n(41),ii=function(e){var t=40;return e.description&&(t+=25),e.assetMaterializations.length&&(t+=22,li(e)&&(t+=22)),{width:Math.max(250,9.5*e.assetKey.path.join(">").length)+25,height:t}},oi=function(e){var t=JSON.parse(e);return{width:Math.max(250,1.2*t.join(">").length)+25,height:30}},ai=Object(Qr.b)({source:function(e){return e.source},target:function(e){return e.target},x:function(e){return e.x},y:function(e){return e.y}}),si=function(e){var t=e.repoAddress,n=e.selected,r=Object(K.a)(t),i=Object(O.useQuery)(di,{variables:{repositorySelector:r},notifyOnNetworkStatusChange:!0,pollInterval:We.a}),o=j.a.useState(),a=Object(F.a)(o,2),s=a[0],c=a[1],l=Object(b.h)(),p=Object(b.j)();j.a.useEffect((function(){n&&i.data&&i.data.repositoryOrError&&("Repository"===i.data.repositoryOrError.__typename&&i.data.repositoryOrError.assetNodes.forEach((function(e){e.id===n&&c({id:JSON.stringify(e.assetKey.path),assetKey:e.assetKey,definition:e,hidden:!1})})))}),[n,i]);return Object(Un.a)("Assets"),Object(k.jsx)(U.a,{allowStaleData:!0,queryResult:i,children:function(e){var n,r=e.repositoryOrError;if("Repository"!==r.__typename)return Object(k.jsx)(u.r,{icon:x.a.ERROR,title:"Query Error",description:r.message});var i=function(e,t){var n={},r={},i={};return e.assetNodes.forEach((function(e){var o=JSON.stringify(e.assetKey.path);e.dependencies.forEach((function(e){var t=JSON.stringify(e.upstreamAsset.assetKey.path);r[t]=Object(d.a)(Object(d.a)({},r[t]||{}),{},Object(ee.a)({},o,e.inputName)),i[o]=Object(d.a)(Object(d.a)({},i[o]||{}),{},Object(ee.a)({},t,!0))})),n[o]={id:o,assetKey:e.assetKey,definition:e,hidden:!!t&&e.jobName!==t.definition.jobName}})),{nodes:n,downstream:r,upstream:i}}(r,s);if(function(e){for(var t=new Set(Object.keys(e.nodes)),n=function n(r,i){if(-1!==r.indexOf(i))return!0;if(!0===t.delete(i)){var o=r.concat(i);return Object.keys(e.downstream[i]||{}).some((function(e){return n(o,e)}))}return!1},r=!1;0!==t.size;)r=r||n([],t.values().next().value);return r}(i))return Object(k.jsx)(u.r,{title:"Cycle detected",description:"Assets dependencies form a cycle"});var o=function(e){var t=new Yr.graphlib.Graph;t.setGraph({rankdir:"TB",marginx:100,marginy:100}),t.setDefaultEdgeLabel((function(){return{}})),Object.values(e.nodes).filter((function(e){return!e.hidden})).forEach((function(e){t.setNode(e.id,ii(e.definition))}));var n={};Object.keys(e.downstream).forEach((function(r){Object.keys(e.downstream[r]).forEach((function(i){e.nodes[i].hidden&&e.nodes[r].hidden||(t.setEdge({v:r,w:i},{weight:1}),e.nodes[i].hidden?n[i]=!0:e.nodes[r].hidden&&(n[r]=!0))}))})),Object.keys(n).forEach((function(e){t.setNode(e,oi(e))})),Yr.layout(t);var r={};t.nodes().forEach((function(e){var n=t.node(e);n&&(r[e]=n)}));var i=0,o=0,a=[];Object.keys(r).forEach((function(e){var t=r[e];a.push({id:e,x:t.x-t.width/2,y:t.y-t.height/2}),i=Math.max(i,t.x+t.width),o=Math.max(o,t.y+t.height)}));var s=[];return t.edges().forEach((function(e){var n=t.edge(e).points;s.push({from:n[0],to:n[n.length-1],dashed:!1})})),{nodes:a,edges:s,width:i,height:o+100}}(i),a=function(e){for(var t={},n=0,r=Object.values(e.nodes);n<r.length;n++){var i,o,a=r[n];t[a.id]=(null===(i=a.definition.assetMaterializations[0])||void 0===i||null===(o=i.materializationEvent.stepStats)||void 0===o?void 0:o.startTime)||0}var s={};Object.keys(e.downstream).forEach((function(t){Object.keys(e.downstream[t]).forEach((function(e){s[e]=s[e]||[],s[e].push(t)}))}));for(var c={},l=0,d=Object.values(e.nodes);l<d.length;l++){var u=d[l];0===u.definition.assetMaterializations.length&&(c[u.id]="none")}for(var p=0,j=Object.values(e.nodes);p<j.length;p++){var b=j[p],h=JSON.stringify(b.assetKey.path);c[h]=hi(t,c,s,h)}return c}(i),j=s&&(null===(n=li(s.definition))||void 0===n?void 0:n.pipelineName),b=j?Object.values(i.nodes).filter((function(e){var t;return(null===(t=li(e.definition))||void 0===t?void 0:t.pipelineName)===j})):[];return Object.keys(i.nodes).length?Object(k.jsx)(P.c,{identifier:"assets",firstInitialPercent:70,firstMinSize:600,first:Object(k.jsx)(Zr.b,{interactor:Zr.b.Interactors.PanAndZoom,graphWidth:o.width,graphHeight:o.height,onKeyDown:function(){},onDoubleClick:function(){},maxZoom:1.2,maxAutocenterZoom:1,children:function(e){e.scale;return Object(k.jsxs)(ui,{width:o.width,height:o.height,children:[Object(k.jsx)("defs",{children:Object(k.jsx)("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:"2",markerHeight:"4",orient:"auto",children:Object(k.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:Q.a.LIGHT_GRAY1})})}),Object(k.jsx)("g",{opacity:.8,children:o.edges.map((function(e,t){return Object(k.jsx)(pi,{d:ai({source:e.from,target:e.to}),dashed:e.dashed,markerEnd:"url(#arrow)"},t)}))}),o.nodes.map((function(e){var n=i.nodes[e.id],r=n.hidden?oi(e.id):ii(n.definition),o=r.width,d=r.height;return Object(k.jsx)("foreignObject",{x:e.x,y:e.y,width:o,height:d,onClick:function(){var e;(e=n)&&(c(e),l.push("/workspace/".concat(p.params.repoPath,"/assets/").concat(e.assetKey.path.map(encodeURIComponent).join("/"))))},children:n.hidden?Object(k.jsx)(ji,{assetKeyPath:JSON.parse(e.id)}):Object(k.jsx)(bi,{definition:n.definition,selected:(null===s||void 0===s?void 0:s.id)===n.id,secondaryHighlight:b.includes(n),computeStatus:a[n.id],repoAddress:t})},e.id)}))]})}}),second:s?Object(k.jsx)(ci,{node:s,repoAddress:t}):Object(k.jsx)(u.r,{title:"No asset selected",description:"Select an asset to see its definition and ops."})}):Object(k.jsx)(u.r,{title:"No assets defined",description:"No assets defined using the @asset definition"})}})},ci=function(e){var t=e.node,n=e.repoAddress;return Object(k.jsxs)("div",{style:{overflowY:"auto"},children:[Object(k.jsx)(B.a,{margin:32,style:{fontWeight:"bold",fontSize:18},children:t.assetKey.path.join(" > ")}),Object(k.jsx)(Gn.d,{title:"Definition",children:Object(k.jsx)(B.a,{margin:12,children:Object(k.jsx)(Ln.a,{description:t.definition.description||null})})}),Object(k.jsx)(Gn.d,{title:"Job",children:t.definition.jobName?Object(k.jsxs)(B.a,{margin:12,children:[Object(k.jsx)(B.a,{margin:{bottom:8},children:Object(k.jsx)(He.b,{to:Object(q.a)(n.name,n.location,"/jobs/".concat(t.definition.jobName)),children:t.definition.jobName})}),Object(k.jsx)(Xr.a,{repoAddress:n,pipelineMode:"default",pipelineName:t.definition.jobName})]}):null}),Object(k.jsx)(Gn.d,{title:"Latest Materialization",children:Object(k.jsx)(B.a,{margin:12,children:t.definition.assetMaterializations.length?Object(k.jsx)(Wr.a,{assetKey:t.assetKey,asOf:null,asSidebarSection:!0}):Object(k.jsx)("div",{children:"\u2014"})})}),t.definition.assetMaterializations.length?Object(k.jsx)(Gn.d,{title:"Plots",children:Object(k.jsx)(B.a,{margin:12,children:Object(k.jsx)(Jr.a,{assetKey:t.assetKey,asOf:null,asSidebarSection:!0})})}):null]})};function li(e){var t,n=null===(t=e.assetMaterializations[0])||void 0===t?void 0:t.runOrError;return n&&"PipelineRun"===n.__typename?n:null}var di=Object(O.gql)(or||(or=Object(f.a)(["\n  query AssetGraphQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        name\n        location {\n          id\n          name\n        }\n        assetNodes {\n          id\n          assetKey {\n            path\n          }\n          opName\n          description\n          jobName\n          dependencies {\n            inputName\n            upstreamAsset {\n              id\n              assetKey {\n                path\n              }\n            }\n          }\n          assetMaterializations(limit: 1) {\n            materializationEvent {\n              materialization {\n                metadataEntries {\n                  ...MetadataEntryFragment\n                }\n              }\n              stepStats {\n                stepKey\n                startTime\n                endTime\n              }\n            }\n            runOrError {\n              ... on PipelineRun {\n                id\n                runId\n                status\n                pipelineName\n                mode\n              }\n            }\n          }\n        }\n        pipelines {\n          id\n          name\n          modes {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),ei.b),ui=$.c.svg.withConfig({displayName:"AssetGraphRoot__SVGContainer",componentId:"eelc1q-0"})(["overflow:visible;border-radius:0;"]),pi=Object($.c)("path").withConfig({displayName:"AssetGraphRoot__StyledPath",componentId:"eelc1q-1"})(["stroke-width:4;stroke:",";"," fill:none;"],Q.a.LIGHT_GRAY1,(function(e){return e.dashed?"stroke-dasharray: 8 2;":""})),ji=function(e){var t=e.assetKeyPath;return Object(k.jsx)("div",{style:{border:"1px dashed #aaaaaa",background:"white",inset:0},children:Object(k.jsx)("div",{style:{display:"flex",padding:"4px 8px 6px",fontFamily:ri.a.monospace,fontWeight:600},children:t.join(" > ")})})},bi=function(e){var t=e.definition,n=e.selected,r=e.computeStatus,i=e.repoAddress,o=e.secondaryHighlight,a=Object(O.useMutation)(ti.b),s=Object(F.a)(a,1)[0],c=j.a.useContext(Te.a).basePath,l=t.assetMaterializations[0]||{},p=l.materializationEvent,b=l.runOrError,h=function(){var e=Object(Jt.a)(Wt.a.mark((function e(){var n;return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.jobName){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,s({variables:{executionParams:{selector:Object(d.a)({pipelineName:t.jobName},Object(K.a)(i)),mode:"default",stepKeys:[t.opName]}}});case 5:n=e.sent,Object(ti.j)(c,t.jobName,n,!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Object(Vr.a)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)(Kr.a,{content:Object(k.jsx)(u.n,{children:Object(k.jsx)(u.p,{text:Object(k.jsxs)("span",{children:["Launch run to build"," ",Object(k.jsx)("span",{style:{fontFamily:"monospace",fontWeight:600},children:t.assetKey.path.join(" > ")})]}),icon:"send-to",onClick:h})}),children:Object(k.jsxs)("div",{style:{border:"1px solid #ececec",outline:n?"2px solid ".concat(Q.a.BLUE4):o?"2px solid ".concat(Q.a.BLUE4,"55"):"none",marginTop:10,marginRight:4,marginLeft:4,marginBottom:2,position:"absolute",background:"white",inset:0},children:[Object(k.jsxs)("div",{style:{display:"flex",padding:"4px 8px",fontFamily:ri.a.monospace,fontWeight:600},children:[t.assetKey.path.join(" > "),Object(k.jsx)("div",{style:{flex:1}}),Object(k.jsx)("div",{title:"Green if this asset has been materialized since its upstream dependencies.",style:{background:{old:"orange",good:"green",none:"#ccc"}[r],borderRadius:7.5,width:15,height:15}})]}),t.description&&Object(k.jsx)("div",{style:{background:"#EFF4F7",padding:"4px 8px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",borderTop:"1px solid #ccc",fontSize:12},children:t.description}),p?Object(k.jsxs)("div",{style:{background:"#E1EAF0",padding:"4px 8px",borderTop:"1px solid #ccc",fontSize:12,lineHeight:"18px"},children:["PipelineRun"===b.__typename&&Object(k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(k.jsx)(He.b,{"data-tooltip":"".concat(b.pipelineName).concat("default"!==b.mode?":".concat(b.mode):""),"data-tooltip-style":yi,style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",paddingRight:8},to:Object(q.a)(i.name,i.location,"jobs/".concat(b.pipelineName,":").concat(b.mode)),children:"".concat(b.pipelineName).concat("default"!==b.mode?":".concat(b.mode):"")}),Object(k.jsx)(He.b,{style:{fontFamily:ri.a.monospace},to:"/instance/runs/".concat(b.runId,"?").concat(D.a.stringify({timestamp:p.stepStats.endTime,selection:p.stepStats.stepKey,logs:"step:".concat(p.stepStats.stepKey)})),target:"_blank",children:Object(ti.k)({runId:b.runId})})]}),Object(k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.stepStats.endTime?Object(k.jsx)(Wn.a,{timestamp:p.stepStats.endTime,timeFormat:{showSeconds:!1,showTimezone:!1}}):"Never",Object(k.jsx)(ni.a,{startUnix:p.stepStats.startTime,endUnix:p.stepStats.endTime})]})]}):Object(k.jsx)("span",{})]})})};function hi(e,t,n,r){var i=e[r],o=n[r]||[];return r in t||(t[r]=o.some((function(t){return e[t]>i}))||o.some((function(r){return"good"!==hi(e,t,n,r)}))?"old":"good"),t[r]}var mi,fi,Oi,xi,gi,yi=JSON.stringify({background:"#E1EAF0",padding:"4px 8px",marginLeft:-10,marginTop:-8,fontSize:13,color:Q.a.BLUE2,border:0,borderRadius:4}),vi=function(e){var t=e.repoAddress,n=Object(g.b)(e.match.params[0]),r=n.pathSolids.length>1?n.pathSolids[n.pathSolids.length-2]:n.pipelineName;return Object(k.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(k.jsx)("div",{style:{padding:20,borderBottom:"1px solid #ccc"},children:Object(k.jsx)(vr.a,{title:Object(k.jsx)(Jn.d,{children:r}),description:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(He.b,{to:Object(q.b)(t,"/graphs"),children:"Graph"})," in"," ",Object(k.jsx)(Or.a,{repoAddress:t})]}),icon:"schema"})}),Object(k.jsx)("div",{style:{position:"relative",minHeight:0,flex:1,display:"flex"},children:Object(k.jsx)(Tn.b,Object(d.a)(Object(d.a)({},e),{},{repoAddress:t}))})]})},Si=n(202),Pi=Object(O.gql)(mi||(mi=Object(f.a)(["\n  mutation ReloadWorkspaceMutation {\n    reloadWorkspace {\n      ... on Workspace {\n        locationEntries {\n          __typename\n          name\n          id\n          loadStatus\n          locationOrLoadError {\n            __typename\n            ... on RepositoryLocation {\n              id\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                }\n              }\n            }\n            ... on PythonError {\n              message\n            }\n          }\n        }\n      }\n      ...UnauthorizedErrorFragment\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"])),J.c,J.a),Ei=function(){var e=function(){var e=Object(O.useApolloClient)(),t=p.useState(!1),n=Object(F.a)(t,2),r=n[0],i=n[1],o=Object(O.useMutation)(Pi),a=Object(F.a)(o,1)[0],s=Object(G.f)();return{reloading:r,onClick:function(){var t=Object(Jt.a)(Wt.a.mark((function t(n){var r,o,c,l;return Wt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),i(!0),t.next=4,a();case 4:if(r=t.sent,o=r.data,i(!1),o&&"PythonError"!==(null===o||void 0===o?void 0:o.reloadWorkspace.__typename)&&"UnauthorizedError"!==(null===o||void 0===o?void 0:o.reloadWorkspace.__typename)){t.next=10;break}return Vt.a.show({message:"Could not reload workspace.",timeout:3e3,icon:"refresh",intent:jt.a.DANGER}),t.abrupt("return");case 10:c=o.reloadWorkspace.locationEntries,Vt.a.show({message:"Workspace reloaded",timeout:3e3,icon:"refresh",intent:jt.a.SUCCESS}),l=c.reduce((function(e,t){var n;return"RepositoryLocation"===(null===(n=t.locationOrLoadError)||void 0===n?void 0:n.__typename)?[].concat(Object(X.a)(e),Object(X.a)(t.locationOrLoadError.repositories)):e}),[]),s(l),e.resetStore();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}(),t=e.reloading,n=e.onClick;return Object(m.c)().canReloadWorkspace?Object(k.jsx)(u.c,{onClick:n,icon:Object(k.jsx)(Me.a,{name:"refresh"}),loading:t,text:"Reload all",small:!0,intent:"none"}):Object(k.jsx)(Y.a,{content:m.a,children:Object(k.jsx)(u.c,{icon:Object(k.jsx)(Me.a,{name:"refresh"}),disabled:!0,text:"Reload all",small:!0,intent:"none"})})},ki=n(108),wi=n(112),Ri=n(295),Ni=n(294),Ci={showSeconds:!0,showTimezone:!0},_i=function(e){var t,n=e.location,r=e.locationOrError,i=j.a.useState(!1),o=Object(F.a)(i,2),a=o[0],s=o[1],c=Object(Ri.a)(n),l=c.reloading,d=c.tryReload;return"LOADING"===r.loadStatus?r.locationOrLoadError?Object(k.jsx)(u.D,{minimal:!0,intent:"primary",children:"Updating..."}):Object(k.jsx)(u.D,{minimal:!0,intent:"primary",children:"Loading..."}):"PythonError"===(null===(t=r.locationOrLoadError)||void 0===t?void 0:t.__typename)?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[Object(k.jsx)(u.D,{minimal:!0,intent:"danger",children:"Failed"}),Object(k.jsx)("div",{style:{fontSize:"14px",marginLeft:"8px"},children:Object(k.jsx)(tn.a,{onClick:function(){return s(!0)},children:"View error"})})]}),Object(k.jsx)(Ni.b,{location:n,isOpen:a,error:r.locationOrLoadError,reloading:l,onDismiss:function(){return s(!1)},onTryReload:function(){return d()}})]}):Object(k.jsx)(u.D,{minimal:!0,intent:"success",children:"Loaded"})},Ii=function(e){var t=e.location;return Object(m.c)().canReloadRepositoryLocation?Object(k.jsx)(wi.a,{location:t,children:function(e){var t=e.reloading,n=e.tryReload;return Object(k.jsx)(u.c,{onClick:function(){return n()},loading:t,icon:Object(k.jsx)(Me.a,{name:"refresh"}),text:"Reload",small:!0,minimal:!0,style:{marginTop:"-4px"}})}}):Object(k.jsx)(Y.a,{content:m.a,children:Object(k.jsx)(tn.a,{color:Q.a.GRAY3,children:"Reload"})})},Ai=function(){var e=j.a.useContext(Fn.b),t=e.locationEntries;return e.loading&&!t.length?Object(k.jsx)("div",{style:{color:Q.a.GRAY3},children:"Loading\u2026"}):t.length?Object(k.jsxs)(Si.a,{children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Repository location"}),Object(k.jsx)("th",{children:"Status"}),Object(k.jsx)("th",{colSpan:2,children:"Updated"})]})}),Object(k.jsx)("tbody",{children:t.map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{style:{maxWidth:"50%"},children:Object(k.jsxs)(qe.a,{direction:"column",spacing:4,children:[Object(k.jsx)("strong",{children:e.name}),Object(k.jsx)("div",{children:e.displayMetadata.map((function(e,t){return Object(k.jsx)("div",{children:Object(k.jsxs)(Jn.b,{style:{wordBreak:"break-word"},children:["".concat(e.key,": "),Object(k.jsx)("span",{style:{color:Q.a.GRAY3},children:e.value})]})},t)}))})]})}),Object(k.jsx)("td",{children:Object(k.jsx)(_i,{location:e.name,locationOrError:e})}),Object(k.jsx)("td",{style:{whiteSpace:"nowrap"},children:Object(k.jsx)(ki.a,{timestamp:{unix:e.updatedTimestamp},timeFormat:Ci})}),Object(k.jsx)("td",{children:Object(k.jsx)(Ii,{location:e.name})})]},e.name)}))})]}):Object(k.jsx)(u.r,{icon:"cube",title:"No repository locations!"})},Ti=n(40),Fi=function(){var e=Object(Fn.i)(),t=e.loading,n=e.error,r=e.options,i=Object(h.e)(),o=i.flagPipelineModeTuples,a=i.flagAssetGraph;return Object(k.jsx)(br.a,{children:Object(k.jsxs)(qe.a,{direction:"column",spacing:16,children:[Object(k.jsx)(vr.a,{title:Object(k.jsx)(Jn.d,{children:"Workspace"})}),Object(k.jsxs)(qe.a,{direction:"column",spacing:16,children:[Object(k.jsxs)(qe.a,{direction:"row",spacing:12,alignItems:"center",children:[Object(k.jsx)(Jn.f,{id:"repository-locations",children:"Locations"}),Object(k.jsx)(Ei,{})]}),Object(k.jsx)(Ai,{})]}),Object(k.jsx)(Jn.f,{id:"repository-locations",children:"Repositories"}),t?Object(k.jsx)(U.b,{purpose:"page"}):n?Object(k.jsx)(u.r,{icon:"cube",title:"Error loading repositories",description:"Could not load repositories in this workspace."}):r.length?Object(k.jsxs)(Si.a,{children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Repository"}),o?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("th",{children:"Jobs"}),Object(k.jsx)("th",{children:"Graphs"})]}):Object(k.jsx)("th",{children:"Pipelines"}),Object(k.jsx)("th",{children:o?"Ops":"Solids"}),a?Object(k.jsx)("th",{children:"Assets"}):null,Object(k.jsx)("th",{children:"Schedules"}),Object(k.jsx)("th",{children:"Sensors"})]})}),Object(k.jsx)("tbody",{children:r.map((function(e){var t=e.repository.name,n=e.repositoryLocation.name,r=Object(Ti.b)(t,n);return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{style:{width:"40%"},children:r}),o?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("td",{children:Object(k.jsx)(He.b,{to:Object(q.a)(t,n,"/jobs"),children:"Jobs"})}),Object(k.jsx)("td",{children:Object(k.jsx)(He.b,{to:Object(q.a)(t,n,"/graphs"),children:"Graphs"})})]}):Object(k.jsx)("td",{children:Object(k.jsx)(He.b,{to:Object(q.a)(t,n,"/pipelines"),children:"Pipelines"})}),Object(k.jsx)("td",{children:Object(k.jsx)(He.b,{to:Object(q.a)(t,n,o?"/ops":"/solids"),children:o?"Ops":"Solids"})}),a?Object(k.jsx)("td",{children:Object(k.jsx)(He.b,{to:Object(q.a)(t,n,"/assets"),children:"Assets"})}):null,Object(k.jsx)("td",{children:Object(k.jsx)(He.b,{to:Object(q.a)(t,n,"/schedules"),children:"Schedules"})}),Object(k.jsx)("td",{children:Object(k.jsx)(He.b,{to:Object(q.a)(t,n,"/sensors"),children:"Sensors"})})]},r)}))})]}):Object(k.jsx)(u.r,{icon:"cube",title:"Empty workspace",description:"There are no repositories in this workspace."})]})})},Li=n(218),Di=function(e){var t=e.pipelinePath,n=Object(b.j)(["/workspace/pipelines/(/?.*)","/workspace/jobs/(/?.*)"]),r=Object(b.i)(),i=n.params[0],o=r.search,a=Object(g.b)(t).pipelineName,s=Object(Fn.i)(),c=s.loading,l=s.options,d=Object(h.e)().flagPipelineModeTuples;if(c)return Object(k.jsx)(U.b,{purpose:"page"});var p=Object(Li.a)(l,a);if(0===p.length)return Object(k.jsx)(u.r,{icon:"cube",title:d?"No matching jobs":"No matching pipelines",description:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{children:Object(k.jsx)("strong",{children:a})}),"was not found in any repositories in this workspace."]})});if(1===p.length){var j=Object(Fn.e)(p[0]),m=Object(q.b)(j,"/pipelines/".concat(i).concat(o));return Object(k.jsx)(b.b,{to:m})}return Object(k.jsxs)(br.a,{children:[Object(k.jsx)(vr.a,{title:Object(k.jsx)(Jn.d,{children:a}),icon:d?"workspaces":"schema",description:d?"Job in multiple repositories":"Pipeline in multiple repositories"}),Object(k.jsx)(B.a,{margin:{vertical:20},children:Object(k.jsx)(en.a,{intent:"info",title:Object(k.jsx)("div",{children:d?Object(k.jsxs)(k.Fragment,{children:["Jobs named ",Object(k.jsx)("strong",{children:a})," were found in multiple repositories."]}):Object(k.jsxs)(k.Fragment,{children:["Pipelines named ",Object(k.jsx)("strong",{children:a})," were found in multiple repositories."]})})})}),Object(k.jsxs)(Si.a,{children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Repository name and location"}),Object(k.jsx)("th",{children:d?"Job":"Pipeline"})]})}),Object(k.jsx)("tbody",{children:p.map((function(e){var t=e.repository.name,n=e.repositoryLocation.name,r=Object(Ti.b)(t,n);return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{style:{width:"40%"},children:r}),Object(k.jsx)("td",{children:Object(k.jsx)(He.b,{to:Object(q.a)(t,n,"/pipelines/".concat(a)),children:a})})]},r)}))})]})]})},Gi=n(679),qi=n(779),Mi=n(825),zi=function(e){var t=e.repoAddress;Object(Un.a)("Schedules");var n=Object(K.a)(t),r=Object(O.useQuery)(Nr.b,{variables:{repositorySelector:n,instigationType:Je.g.SCHEDULE},fetchPolicy:"cache-and-network",pollInterval:5e4,partialRefetch:!0});return Object(k.jsx)(br.a,{children:Object(k.jsx)(U.a,{queryResult:r,allowStaleData:!0,children:function(e){var n=e.repositoryOrError,r=e.scheduler,i=e.unloadableInstigationStatesOrError,o=e.instance,a=null;return a="PythonError"===n.__typename?Object(k.jsx)(J.b,{error:n}):"RepositoryNotFoundError"===n.__typename?Object(k.jsx)(u.r,{icon:x.a.ERROR,title:"Repository not found",description:"Could not load this repository."}):n.schedules.length?n.schedules.length>0&&Object(k.jsxs)(qe.a,{direction:"column",spacing:16,children:[Object(k.jsx)(Nr.d,{schedulerOrError:r}),Object(k.jsx)(Mi.a,{schedules:n.schedules,repoAddress:t}),Object(k.jsx)(B.a,{margin:{vertical:16},padding:{bottom:8},border:{side:"bottom",width:1,color:Q.a.LIGHT_GRAY3},children:Object(k.jsx)(Jn.f,{children:"Scheduled ticks"})}),Object(k.jsx)(qi.a,{repos:[n]})]}):Object(k.jsx)(u.r,{icon:x.a.TIME,title:"No schedules found",description:Object(k.jsxs)("p",{children:["This repository does not have any schedules defined. Visit the"," ",Object(k.jsx)("a",{href:"https://docs.dagster.io/overview/schedules-sensors/schedules",children:"scheduler documentation"})," ","for more information about scheduling runs in Dagster."]})}),Object(k.jsxs)(qe.a,{direction:"column",spacing:20,children:[Object(k.jsx)(Cr.b,{schedulerOrError:r,daemonHealth:o.daemonHealth}),a,"PythonError"===i.__typename?Object(k.jsx)(J.b,{error:i}):Object(k.jsx)(Gi.a,{scheduleStates:i.results})]})}})})},$i=n(627),Hi=n(811),Bi=function(e){var t=e.repoAddress;Object(Un.a)("Sensors");var n=Object(K.a)(t),r=Object(O.useQuery)(Ui,{variables:{repositorySelector:n,instigationType:Je.g.SENSOR},fetchPolicy:"cache-and-network",pollInterval:5e4,partialRefetch:!0});return Object(k.jsx)(br.a,{children:Object(k.jsx)(U.a,{queryResult:r,allowStaleData:!0,children:function(e){var n=e.sensorsOrError,r=e.unloadableInstigationStatesOrError,i=e.instance;return Object(k.jsx)("div",{children:"PythonError"===n.__typename?Object(k.jsx)(J.b,{error:n}):"PythonError"===r.__typename?Object(k.jsx)(J.b,{error:r}):"RepositoryNotFoundError"===n.__typename?Object(k.jsx)(u.r,{icon:x.a.ERROR,title:"Repository not found",description:"Could not load this repository."}):n.results.length?Object(k.jsxs)(qe.a,{direction:"column",spacing:20,children:[n.results.length>0&&Object(k.jsx)(Gr.a,{daemonHealth:i.daemonHealth}),Object(k.jsx)(Hi.a,{repoAddress:t,sensors:n.results}),Object(k.jsx)(Gi.b,{sensorStates:r.results})]}):Object(k.jsx)(u.r,{icon:x.a.AUTOMATIC_UPDATES,title:"No Sensors Found",description:Object(k.jsxs)("p",{children:["This repository does not have any sensors defined. Visit the"," ",Object(k.jsx)("a",{href:"https://docs.dagster.io/overview/schedules-sensors/sensors",target:"_blank",rel:"noopener noreferrer",children:"sensors documentation"})," ","for more information about creating sensors in Dagster."]})})})}})})},Ui=Object(O.gql)(fi||(fi=Object(f.a)(["\n  query SensorsRootQuery(\n    $repositorySelector: RepositorySelector!\n    $instigationType: InstigationType!\n  ) {\n    sensorsOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ...PythonErrorFragment\n      ... on Sensors {\n        results {\n          id\n          ...SensorFragment\n        }\n      }\n    }\n    unloadableInstigationStatesOrError(instigationType: $instigationType) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),J.a,$i.a,Dr.a,Kn.a),Ki=n(819),Qi=n(822),Yi=n(824),Wi=n(723),Ji=function(e){var t=e.definition,n=t.name,r=t.inputDefinitions,i=t.outputDefinitions,o=Object(Wi.c)({name:n,inputs:r.map((function(e){return{definition:e,dependsOn:[]}})),outputs:i.map((function(e){return{definition:e,dependedBy:[]}}))},{x:0,y:0});return Object(k.jsx)(Xi,{children:Object(k.jsx)(Zi,{width:o.boundingBox.width,height:o.boundingBox.height,children:Object(k.jsx)(Yi.c,{invocation:void 0,definition:e.definition,minified:!1,onClick:function(){},onDoubleClick:function(){},onEnterComposite:function(){},onHighlightEdges:function(){},layout:o,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},Vi=Object(O.gql)(Oi||(Oi=Object(f.a)(["\n  fragment SolidCardSolidDefinitionFragment on ISolidDefinition {\n    ...SolidNodeDefinitionFragment\n    __typename\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n  }\n\n  ","\n"])),Yi.a),Zi=$.c.svg.withConfig({displayName:"SolidCard__SVGContainer",componentId:"l63fcm-0"})(["overflow:visible;border-radius:0;display:block;"]),Xi=$.c.div.withConfig({displayName:"SolidCard__SolidCardContainer",componentId:"l63fcm-1"})(["flex:1;padding:20px;margin-right:10px;margin-bottom:10px;max-width:450px;"]),eo=function(e){var t=e.name,n=e.onClickInvocation,r=e.repoAddress,i=Object(K.a)(r),o=Object(O.useQuery)(to,{variables:{name:t,repositorySelector:i}});return Object(k.jsx)(U.a,{queryResult:o,children:function(e){var t=e.repositoryOrError;if("Repository"!==(null===t||void 0===t?void 0:t.__typename)||!t.usedSolid)return null;var r=t.usedSolid;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Ji,{definition:r.definition}),Object(k.jsx)(Qi.b,{definition:r.definition,showingSubsolids:!1,onClickInvocation:n,getInvocations:function(){return r.invocations.map((function(e){return{handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}}))}})]})}})},to=Object(O.gql)(xi||(xi=Object(f.a)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          __typename\n          definition {\n            ...SolidCardSolidDefinitionFragment\n            ...SidebarSolidDefinitionFragment\n          }\n          invocations {\n            __typename\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"])),Vi,Qi.a),no=$.c.div.withConfig({displayName:"SolidDetailsRoot__SolidDetailScrollContainer",componentId:"sc-1ioqsgi-0"})(["overflow:scroll;flex:1;"]),ro=n(806);function io(e){var t,n={},r=Object(_e.a)(e);try{for(r.s();!(t=r.n()).done;){var i,o=t.value,a=Object(_e.a)(o);try{for(a.s();!(i=a.n()).done;){n[i.value]=!0}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return Object.keys(n).sort((function(e,t){return e.localeCompare(t)}))}var oo,ao,so,co,lo=function(e){var t=e.name,n=e.repoAddress,r=Object(h.e)().flagPipelineModeTuples;Object(Un.a)(r?"Ops":"Solids");var i=Object(K.a)(n),o=Object(O.useQuery)(jo,{variables:{repositorySelector:i}});return Object(k.jsx)(U.a,{queryResult:o,children:function(r){var i=r.repositoryOrError;return"Repository"===(null===i||void 0===i?void 0:i.__typename)&&i.usedSolids?Object(k.jsx)(uo,Object(d.a)(Object(d.a)({},e),{},{name:t,repoAddress:n,usedSolids:i.usedSolids})):null}})},uo=function(e){var t,n=e.name,r=e.repoAddress,i=e.usedSolids,o=Object(b.h)(),a=Object(b.i)(),s=Object(h.e)().flagPipelineModeTuples,c=L.parse(a.search),l=c.q,d=c.typeExplorer,j=(t=i,[{token:"name",values:function(){return t.map((function(e){return e.definition.name}))}},{token:s?"job":"pipeline",values:function(){return io(t.map((function(e){return e.invocations.map((function(e){return e.pipeline.name}))})))}},{token:"input",values:function(){return io(t.map((function(e){return e.definition.inputDefinitions.map((function(e){return e.type.displayName}))})))}},{token:"output",values:function(){return io(t.map((function(e){return e.definition.outputDefinitions.map((function(e){return e.type.displayName}))})))}}]),m=Object(Ve.d)(l||"",j),f=function(e,t){return e.filter((function(e){var n,r=Object(_e.a)(t);try{var i=function(){var t=n.value;return("name"!==t.token&&void 0!==t.token||e.definition.name.startsWith(t.value))&&("pipeline"!==t.token&&"job"!==t.token||e.invocations.some((function(e){return e.pipeline.name===t.value})))&&("input"!==t.token||e.definition.inputDefinitions.some((function(e){return e.type.displayName.startsWith(t.value)})))&&("output"!==t.token||e.definition.outputDefinitions.some((function(e){return e.type.displayName.startsWith(t.value)})))?void 0:{v:!1}};for(r.s();!(n=r.n()).done;){var o=i();if("object"===typeof o)return o.v}}catch(a){r.e(a)}finally{r.f()}return!0}))}(i,m),O=i.find((function(e){return e.definition.name===n})),x=function(e){o.replace({search:"?".concat(L.stringify({q:Object(Ve.b)(e)}))})},g=function(e){o.replace(Object(q.b)(r,"/solids/".concat(e,"?").concat(L.stringify({q:l}))))};p.useEffect((function(){1!==f.length||O&&f[0]===O||g(f[0].definition.name),"string"===typeof d&&x([].concat(Object(X.a)(m),[{token:"input",value:d}]))}));var y=p.useCallback((function(e){var t=e.pipelineName,n=e.handleID;o.push(Object(q.b)(r,"/pipelines/".concat(t,"/").concat(n.split(".").join("/"))))}),[o,r]);return Object(k.jsx)("div",{style:{height:"100%",display:"flex"},children:Object(k.jsx)(P.c,{identifier:s?"ops":"solids",firstInitialPercent:40,firstMinSize:420,first:Object(k.jsxs)(mo,{children:[Object(k.jsx)("div",{style:{padding:"15px 10px",borderBottom:"1px solid ".concat(Q.a.LIGHT_GRAY2)},children:Object(k.jsx)(Ve.a,{values:m,onChange:function(e){return x(e)},suggestionProviders:j,placeholder:"Filter by name or input/output type..."})}),Object(k.jsx)("div",{style:{flex:1},children:Object(k.jsx)(Ki.a,{nonce:window.__webpack_nonce__,children:function(e){var t=e.height,n=e.width;return Object(k.jsx)(po,{height:t,width:n,selected:O,onClickSolid:g,items:f.sort((function(e,t){return e.definition.name.localeCompare(t.definition.name)}))})}})})]}),second:O?Object(k.jsx)(no,{children:Object(k.jsx)(eo,{name:O.definition.name,onClickInvocation:y,repoAddress:r})}):Object(k.jsx)(u.r,{title:s?"No op selected":"No solid selected",description:s?"Select an op to see its definition and invocations":"Select a solid to see its definition and invocations."})})})},po=function(e){var t=e.items,n=e.selected,r=p.useRef(new Ki.c({defaultHeight:60,fixedWidth:!0})),i=p.useRef(e.width);e.width!==i.current&&(r.current.clearAll(),i.current=e.width);var o=n?t.findIndex((function(e){return e===n})):void 0;return Object(k.jsx)(Ki.d,{width:e.width,height:e.height,rowCount:e.items.length,rowHeight:r.current.rowHeight,scrollToIndex:o,rowRenderer:function(t){var n=t.parent,i=t.index,o=t.key,a=t.style,s=e.items[i];return Object(k.jsx)(Ki.b,{cache:r.current,index:i,parent:n,children:Object(k.jsxs)(bo,{style:a,selected:s===e.selected,onClick:function(){return e.onClickSolid(s.definition.name)},children:[Object(k.jsx)(ho,{children:s.definition.name}),Object(k.jsx)(ro.b,{definition:s.definition})]})},o)},overscanRowCount:10})},jo=Object(O.gql)(gi||(gi=Object(f.a)(["\n  query SolidsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          __typename\n          definition {\n            name\n            ...SolidTypeSignatureFragment\n          }\n          invocations {\n            __typename\n            pipeline {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),ro.a),bo=$.c.div.withConfig({displayName:"SolidsRoot__SolidListItem",componentId:"chg69r-0"})(["background:",";color:",";font-size:14px;display:flex;flex-direction:column;padding:10px 15px;user-select:none;border-bottom:1px solid ",";& > code.bp3-code{color:",";background:transparent;font-family:",";padding:5px 0 0 0;}"],(function(e){return e.selected?Q.a.BLUE3:Q.a.WHITE}),(function(e){return e.selected?Q.a.WHITE:Q.a.DARK_GRAY3}),Q.a.LIGHT_GRAY2,(function(e){return e.selected?Q.a.WHITE:Q.a.DARK_GRAY3}),ri.a.monospace),ho=$.c.div.withConfig({displayName:"SolidsRoot__SolidName",componentId:"chg69r-1"})(["flex:1;font-weight:600;"]),mo=$.c.div.withConfig({displayName:"SolidsRoot__SolidListColumnContainer",componentId:"chg69r-2"})(["display:flex;flex-direction:column;height:100%;"]),fo=n(84),Oo=Object(O.gql)(oo||(oo=Object(f.a)(["\n  query RepositoryAssetsListQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ... on Repository {\n        id\n        assetNodes {\n          id\n          assetKey {\n            path\n          }\n          opName\n          description\n          jobName\n        }\n      }\n      ... on RepositoryNotFoundError {\n        message\n      }\n    }\n  }\n"]))),xo=function(e){var t=e.repoAddress,n=Object(K.a)(t),r=Object(O.useQuery)(Oo,{fetchPolicy:"cache-and-network",variables:{repositorySelector:n}}),i=r.data,o=r.error,a=r.loading,s=null===i||void 0===i?void 0:i.repositoryOrError;console.log(s);var c=p.useMemo((function(){return s&&"Repository"===s.__typename?s.assetNodes.map((function(e){return{name:e.assetKey.path.join(" > "),path:"/assets/".concat(e.assetKey.path.map(encodeURIComponent).join("/")),description:e.description,repoAddress:t}})).sort((function(e,t){return e.name.localeCompare(t.name)})):null}),[s,t]);return a?null:o||!c?Object(k.jsx)(u.r,{title:"Unable to load graphs",description:"Could not load graphs for ".concat(Object(fo.a)(t))}):c.length?Object(k.jsx)(br.a,{children:Object(k.jsx)(Si.a,{children:Object(k.jsx)("tbody",{children:c.map((function(e){var t=e.name,n=e.description,r=e.path,i=e.repoAddress;return Object(k.jsx)("tr",{children:Object(k.jsx)("td",{children:Object(k.jsxs)(qe.a,{direction:"column",spacing:4,children:[Object(k.jsx)(He.b,{to:Object(q.a)(i.name,i.location,r),children:t}),Object(k.jsx)(go,{children:n})]})})},"".concat(t,"-").concat(Object(fo.a)(i)))}))})})}):Object(k.jsx)(u.r,{title:"No assets found",description:"No @asset definitions for ".concat(Object(fo.a)(t))})},go=$.c.div.withConfig({displayName:"RepositoryAssetsList__Description",componentId:"sc60sh-0"})(["color:",";font-size:12px;"],Q.a.GRAY3),yo=Object(O.gql)(ao||(ao=Object(f.a)(["\n  query RepositoryGraphsListQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ... on Repository {\n        id\n        usedSolids {\n          definition {\n            __typename\n            ... on CompositeSolidDefinition {\n              name\n              description\n            }\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n        pipelines {\n          id\n          description\n          name\n        }\n      }\n      ... on RepositoryNotFoundError {\n        message\n      }\n    }\n  }\n"]))),vo=function(e){var t=e.repoAddress,n=Object(K.a)(t),r=Object(O.useQuery)(yo,{fetchPolicy:"cache-and-network",variables:{repositorySelector:n}}),i=r.data,o=r.error,a=r.loading,s=null===i||void 0===i?void 0:i.repositoryOrError,c=p.useMemo((function(){if(!s||"Repository"!==s.__typename)return null;var e=s.pipelines.map((function(e){return{name:e.name,path:"/graphs/".concat(e.name),description:e.description,repoAddress:t}}));return s.usedSolids.forEach((function(n){"CompositeSolidDefinition"===n.definition.__typename&&e.push({name:n.definition.name,path:"/graphs/".concat(n.invocations[0].pipeline.name,"/").concat(n.invocations[0].solidHandle.handleID,"/"),description:n.definition.description,repoAddress:t})})),e.sort((function(e,t){return e.name.localeCompare(t.name)}))}),[s,t]);return a?null:o||!c?Object(k.jsx)(u.r,{title:"Unable to load graphs",description:"Could not load graphs for ".concat(Object(fo.a)(t))}):Object(k.jsx)(br.a,{children:Object(k.jsxs)(Si.a,{children:[Object(k.jsx)("thead",{children:Object(k.jsx)("tr",{children:Object(k.jsx)("th",{children:"Graph"})})}),Object(k.jsx)("tbody",{children:c.map((function(e){var t=e.name,n=e.description,r=e.path,i=e.repoAddress;return Object(k.jsx)("tr",{children:Object(k.jsx)("td",{children:Object(k.jsxs)(qe.a,{direction:"column",spacing:4,children:[Object(k.jsx)(He.b,{to:Object(q.a)(i.name,i.location,r),children:t}),Object(k.jsx)(So,{children:n})]})})},"".concat(t,"-").concat(Object(fo.a)(i)))}))})]})})},So=$.c.div.withConfig({displayName:"RepositoryGraphsList__Description",componentId:"hyu3pl-0"})(["color:",";font-size:12px;"],Q.a.GRAY3),Po=function(e){var t=e.pipelines,n=e.showRepo,r=Object(h.e)().flagPipelineModeTuples,i=t;if(r){i=[];var o,a=Object(_e.a)(t);try{var s=function(){var e,t=o.value;(e=i).push.apply(e,Object(X.a)(t.pipeline.modes.map((function(e){return Object(d.a)(Object(d.a)({},t),{},{mode:e.name})}))))};for(a.s();!(o=a.n()).done;)s()}catch(c){a.e(c)}finally{a.f()}}return Object(k.jsxs)(Si.a,{children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{style:{width:"50%",minWidth:"400px"},children:r?"Job":"Pipeline"}),Object(k.jsx)("th",{children:"Schedules"}),Object(k.jsx)("th",{children:"Sensors"}),Object(k.jsx)("th",{style:{whiteSpace:"nowrap"},children:"Recent runs"})]})}),Object(k.jsx)("tbody",{children:i.map((function(e){var t,r,i=e.pipeline,o=e.repoAddress,a=e.mode;return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:Object(k.jsxs)(qe.a,{direction:"column",spacing:4,children:[Object(k.jsx)(xr.a,{pipelineName:i.name,mode:a||i.modes[0].name,pipelineHrefContext:o}),n?Object(k.jsx)(Jn.b,{children:Object(fo.a)(o)}):null,Object(k.jsx)(Eo,{children:i.description})]})}),Object(k.jsx)("td",{children:(null===(t=i.schedules)||void 0===t?void 0:t.length)?Object(k.jsx)(qe.a,{direction:"column",spacing:2,children:i.schedules.filter((function(e){return!a||e.mode===a})).map((function(e){return Object(k.jsx)(He.b,{to:Object(q.b)(o,"/schedules/".concat(e.name)),children:e.name},e.name)}))}):Object(k.jsx)("div",{style:{color:Q.a.GRAY5},children:"None"})}),Object(k.jsx)("td",{children:(null===(r=i.sensors)||void 0===r?void 0:r.length)?Object(k.jsx)(qe.a,{direction:"column",spacing:2,children:i.sensors.filter((function(e){var t;return!a||(null===(t=e.targets)||void 0===t?void 0:t.some((function(e){return e.mode===a&&(null===e||void 0===e?void 0:e.pipelineName)===i.name})))})).map((function(e){return Object(k.jsx)(He.b,{to:Object(q.b)(o,"/sensors/".concat(e.name)),children:e.name},e.name)}))}):Object(k.jsx)("div",{style:{color:Q.a.GRAY5},children:"None"})}),Object(k.jsx)("td",{children:Object(k.jsx)(qe.a,{direction:"row",spacing:4,alignItems:"center",children:i.runs.map((function(e){return Object(k.jsx)(Ue.c,{runId:e.runId,status:e.status,size:12},e.id)}))})})]},"".concat(i.name,"-").concat(Object(fo.a)(o)))}))})]})},Eo=$.c.div.withConfig({displayName:"PipelineTable__Description",componentId:"sc-5sc4bx-0"})(["color:",";font-size:12px;"],Q.a.GRAY3),ko=Object(O.gql)(so||(so=Object(f.a)(["\n  fragment PipelineTableFragment on Pipeline {\n    id\n    description\n    name\n    modes {\n      id\n      name\n    }\n    runs(limit: 5) {\n      id\n      mode\n      runId\n      status\n    }\n    schedules {\n      id\n      name\n      mode\n    }\n    sensors {\n      id\n      name\n      targets {\n        mode\n        pipelineName\n      }\n    }\n  }\n"]))),wo=Object(O.gql)(co||(co=Object(f.a)(["\n  query RepositoryPipelinesListQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ... on Repository {\n        id\n        pipelines {\n          id\n          ...PipelineTableFragment\n        }\n      }\n      ... on RepositoryNotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"])),ko),Ro=function(e){var t=e.repoAddress,n=Object(K.a)(t),r=Object(O.useQuery)(wo,{fetchPolicy:"cache-and-network",variables:{repositorySelector:n}}),i=r.data,o=r.error,a=r.loading,s=null===i||void 0===i?void 0:i.repositoryOrError,c=p.useMemo((function(){return s&&"Repository"===s.__typename?s.pipelines.map((function(e){return{pipeline:e,repoAddress:t}})):null}),[s,t]);return a?null:o||!c?Object(k.jsx)(u.r,{title:"Unable to load pipelines",description:"Could not load pipelines for ".concat(Object(fo.a)(t))}):Object(k.jsx)(br.a,{children:Object(k.jsx)(Po,{pipelines:c,showRepo:!1})})},No=function(e){var t=e.repoAddress,n=e.tab,r=Object(fo.a)(t),i=Object(h.e)(),o=i.flagPipelineModeTuples,a=i.flagAssetGraph,s=[{text:"Pipelines",href:Object(q.b)(t,"/pipelines")},{text:o?"Ops":"Solids",href:Object(q.b)(t,o?"/ops":"/solids")},{text:"Schedules",href:Object(q.b)(t,"/schedules")},{text:"Sensors",href:Object(q.b)(t,"/sensors")}];o&&(s.splice(0,1,{text:"Jobs",href:Object(q.b)(t,"/jobs")}),s.splice(1,0,{text:"Graphs",href:Object(q.b)(t,"/graphs")})),a&&s.push({text:"Assets",href:Object(q.b)(t,"/assets")});return Object(k.jsxs)(B.a,{flex:{direction:"column"},style:{height:"100%"},children:[Object(k.jsxs)(qe.a,{direction:"column",spacing:16,padding:{top:20,horizontal:20},children:[Object(k.jsx)(vr.a,{title:Object(k.jsx)(Jn.d,{children:r}),icon:"source",description:Object(k.jsx)(He.b,{to:"/workspace",children:"Repository"})}),Object(k.jsx)(B.a,{border:{side:"bottom",width:1,color:Q.a.LIGHT_GRAY3},children:Object(k.jsx)(u.C,{large:!1,selectedTabId:function(){switch(n){case"schedules":return"Schedules";case"sensors":return"Sensors";case"solids":return"Solids";case"ops":return"Ops";case"graphs":return"Graphs";case"jobs":return"Jobs";case"pipelines":return"Pipelines";case"assets":return"Assets";default:return o?"Pipelines":"Jobs"}}(),children:s.map((function(e){var t=e.href,n=e.text;return Object(k.jsx)(u.B,{id:n,title:Object(k.jsx)(He.b,{to:t,children:n})},n)}))})})]}),Object(k.jsx)("div",{style:{flex:1,flexGrow:1},children:Object(k.jsxs)(b.e,{children:[Object(k.jsx)(b.c,{path:"/workspace/:repoPath/schedules",render:function(){return Object(k.jsx)(zi,{repoAddress:t})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/sensors",render:function(){return Object(k.jsx)(Bi,{repoAddress:t})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/assets(/?.*)",render:function(){return Object(k.jsx)(xo,{repoAddress:t})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/ops/:name?",render:function(e){return Object(k.jsx)(lo,{name:e.match.params.name,repoAddress:t})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/solids/:name?",render:function(e){return o?Object(k.jsx)(b.b,{to:e.match.url.replace(/\/solids\/?/,"/ops/")}):Object(k.jsx)(lo,{name:e.match.params.name,repoAddress:t})}}),o&&Object(k.jsx)(b.b,{from:"/workspace/:repoPath/pipelines",to:"/workspace/:repoPath/jobs"}),Object(k.jsx)(b.c,{path:["/workspace/:repoPath/pipelines","/workspace/:repoPath/jobs"],render:function(){return Object(k.jsx)(Ro,{repoAddress:t})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/graphs",exact:!0,render:function(){return Object(k.jsx)(vo,{repoAddress:t})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/(.*)?",render:function(){return Object(k.jsx)(b.b,{to:Object(q.b)(t,"/pipelines")})}})]})})]})},Co=n(290),_o=function(e){var t=e.repoPath,n=p.useContext(Fn.b),r=Object(Co.a)(t),i=Object(h.e)(),o=i.flagPipelineModeTuples,a=i.flagAssetGraph;return r?n.loading?Object(k.jsx)("div",{}):n.allRepos.find((function(e){return e.repository.name===r.name&&e.repositoryLocation.name===r.location}))?Object(k.jsxs)(b.e,{children:[Object(k.jsx)(b.c,{path:"/workspace/:repoPath/jobs/(/?.*)",render:function(){return Object(k.jsx)(Bn,{repoAddress:r})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/graphs/(/?.*)",render:function(e){return Object(k.jsx)(vi,Object(d.a)(Object(d.a)({},e),{},{repoAddress:r}))}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/pipelines/(/?.*)",render:function(e){return o?Object(k.jsx)(b.b,{to:e.match.url.replace("/pipelines/","/jobs/")}):Object(k.jsx)(Bn,{repoAddress:r})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/schedules/:scheduleName/:runTab?",render:function(e){return Object(k.jsx)(Ir,{scheduleName:e.match.params.scheduleName,repoAddress:r,runTab:e.match.params.runTab})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath/sensors/:sensorName",render:function(e){return Object(k.jsx)(Hr,{sensorName:e.match.params.sensorName,repoAddress:r})}}),a?Object(k.jsx)(b.c,{path:"/workspace/:repoPath/assets/(.+)",render:function(e){return Object(k.jsx)(si,Object(d.a)(Object(d.a)({},e),{},{repoAddress:r,selected:e.match.params[0]?JSON.stringify(e.match.params[0].split("/").map(decodeURIComponent)):void 0}))}}):null,Object(k.jsx)(b.c,{path:"/workspace/:repoPath/:tab?",render:function(e){return Object(k.jsx)(No,{tab:e.match.params.tab,repoAddress:r})}})]}):Object(k.jsx)(u.r,{icon:"cube",title:"Unknown repository",description:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{children:Object(k.jsx)("strong",{children:t})}),"  is not loaded in the current workspace."]})}):Object(k.jsx)(u.r,{icon:"cube",title:"Invalid repository",description:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{children:Object(k.jsx)("strong",{children:t})}),"  is not a valid repository path."]})})},Io=function(){var e=Object(h.e)().flagPipelineModeTuples;return Object(k.jsx)(Ur.a,{children:Object(k.jsxs)(b.e,{children:[Object(k.jsx)(b.c,{path:"/workspace",exact:!0,component:Fi}),Object(k.jsx)(b.c,{path:"/workspace/jobs/:pipelinePath",render:function(e){return Object(k.jsx)(Di,{pipelinePath:e.match.params.pipelinePath})}}),Object(k.jsx)(b.c,{path:"/workspace/pipelines/:pipelinePath",render:function(t){return e?Object(k.jsx)(b.b,{to:t.match.url.replace("/pipelines/","/jobs/")}):Object(k.jsx)(Di,{pipelinePath:t.match.params.pipelinePath})}}),Object(k.jsx)(b.c,{path:"/workspace/:repoPath",render:function(e){return Object(k.jsx)(_o,{repoPath:e.match.params.repoPath})}})]})})};t.default=Io},720:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(6),i=n(22),o=r.c.div.withConfig({displayName:"SessionSettingsBar",componentId:"sc-1d2qqxd-0"})(["color:white;display:flex;position:relative;border-bottom:1px solid ",";background:",";align-items:center;height:47px;padding:8px 10px;"],i.a.LIGHT_GRAY1,i.a.WHITE)},813:function(e,t,n){"use strict";n.d(t,"d",(function(){return R})),n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return A})),n.d(t,"c",(function(){return F}));var r,i,o,a,s=n(11),c=n(9),l=n(17),d=n(27),u=n(6),p=n(10),j=n(29),b=n(81),h=n(1062),m=n(1061),f=n(1),O=n(45),x=n(73),g=n(46),y=n(36),v=n(65),S=n(15),P=n(18),E=n(71),k=n(139),w=n(0),R=function(e){var t=e.pipeline,n=e.pipelineMode,r=e.base,i=e.onSaveSession,o=e.onSelectPreset,a=e.onSelectPartition,s=e.partitionSets,c=e.repoAddress,l=t.presets,u=f.useMemo((function(){return[].concat(Object(d.a)(l),Object(d.a)(s)).filter((function(e){var t=e.mode;return!n||t===n})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[l,s,n]);return Object(w.jsxs)(_,{children:[n&&u.length<=1?null:Object(w.jsx)(C,{label:r?"presetName"in r?"Preset: ".concat(r.presetName):"Partition Set: ".concat(r.partitionsSetName):l.length&&!s.length?"Preset":!l.length&&s.length?"Partition Set":"Preset / Partition Set",configGenerators:u,onSelect:function(e){"PartitionSet"===e.__typename?i({mode:e.mode,base:{partitionsSetName:e.name,partitionName:null}}):o(e)}}),r&&"partitionsSetName"in r?Object(w.jsx)(N,{pipeline:t,partitionSetName:r.partitionsSetName,value:r.partitionName,onSelect:a,repoAddress:c}):null]})},N=f.memo((function(e){var t=e.partitionSetName,n=e.value,r=e.onSelect,i=e.repoAddress,o=Object(k.a)(i),a=Object(p.useQuery)(T,{variables:{repositorySelector:o,partitionSetName:t},fetchPolicy:"network-only"}),s=a.data,u=a.loading,m=f.useState("asc"),O=Object(l.a)(m,2),g=O[0],v=O[1],R=f.useMemo((function(){var e="PartitionSet"===(null===s||void 0===s?void 0:s.partitionSetOrError.__typename)&&"Partitions"===(null===s||void 0===s?void 0:s.partitionSetOrError.partitionsOrError.__typename)?s.partitionSetOrError.partitionsOrError.results:[];return"asc"===g?e:Object(d.a)(e).reverse()}),[s,g]),N="PartitionSet"===(null===s||void 0===s?void 0:s.partitionSetOrError.__typename)&&"Partitions"!==(null===s||void 0===s?void 0:s.partitionSetOrError.partitionsOrError.__typename)?s.partitionSetOrError.partitionsOrError:null,C=R.find((function(e){return e.name===n})),_=f.useCallback((function(e){e.preventDefault(),v((function(e){return"asc"===e?"desc":"asc"}))}),[]),I=R.length?Object(w.jsx)(j.c,{icon:Object(w.jsx)(P.a,{name:"sort_by_alpha",color:S.a.Gray400}),minimal:!0,onMouseDown:_}):void 0,A={placeholder:"Partition",style:{width:180},intent:(u?n:C)?b.a.NONE:b.a.DANGER,rightElement:I};return u&&0===R.length?Object(w.jsx)(h.a,{inputProps:Object(c.a)(Object(c.a)({},A),{},{rightElement:n?void 0:Object(w.jsx)(E.a,{purpose:"body-text"})}),items:[],itemRenderer:function(){return null},noResults:Object(w.jsx)(j.n.Item,{disabled:!0,text:"Loading..."}),inputValueRenderer:function(e){return e},selectedItem:n},"loading"):(N&&Object(x.b)({body:Object(w.jsx)(y.b,{error:N})}),Object(w.jsx)(h.a,{defaultSelectedItem:C,items:R,inputProps:A,inputValueRenderer:function(e){return e.name},itemPredicate:function(e,t){return 0===e.length||t.name.includes(e)},itemRenderer:function(e,t){return Object(w.jsx)(j.n.Item,{active:t.modifiers.active,onClick:t.handleClick,text:e.name},e.name)},noResults:Object(w.jsx)(j.n.Item,{disabled:!0,text:"No presets."}),onItemSelect:function(e){r(o,t,e.name)}},C?C.name:"none"))})),C=f.memo((function(e){var t=e.configGenerators,n=e.label,r=e.onSelect,i=Object(g.e)().flagPipelineModeTuples,o=f.useRef(null),a=i?"Ops":"Solids";return Object(w.jsx)("div",{children:Object(w.jsx)(v.a,{shortcutLabel:"\u2325E",shortcutFilter:function(e){return 69===e.keyCode&&e.altKey},onShortcut:function(){return function(e){if(!e)return;var t=O.findDOMNode(e).querySelector("button");t&&t.click()}(o.current)},children:Object(w.jsx)(m.a,{ref:o,items:t,itemPredicate:function(e,t){return 0===e.length||t.name.includes(e)},itemListRenderer:function(e){var t=e.itemsParentRef,n=e.renderItem,r=e.filteredItems,i=r.filter((function(e){return"PipelinePreset"===e.__typename})).map(n).filter(Boolean),o=r.filter((function(e){return"PartitionSet"===e.__typename})).map(n).filter(Boolean),a=i.length>0&&o.length>0;return Object(w.jsxs)(j.n,{ulRef:t,children:[a&&Object(w.jsx)(j.p,{disabled:!0,text:"Presets"}),i,a&&Object(w.jsx)(j.n.Divider,{}),a&&Object(w.jsx)(j.p,{disabled:!0,text:"Partition Sets"}),o]})},itemRenderer:function(e,t){return Object(w.jsx)(j.n.Item,{active:t.modifiers.active,onClick:t.handleClick,text:Object(w.jsxs)("div",{children:[e.name,Object(w.jsx)("div",{style:{opacity:.4,fontSize:"0.75rem"},children:[e.solidSelection?1===e.solidSelection.length?"".concat(a,": ").concat(e.solidSelection[0]):"".concat(a,": ").concat(e.solidSelection.length):"".concat(a,": All"),"Mode: ".concat(e.mode)].join(" - ")})]})},e.name)},noResults:Object(w.jsx)(j.n.Item,{disabled:!0,text:"No presets."}),onItemSelect:r,children:Object(w.jsx)(j.c,{text:n,"data-test-id":"preset-selector-button",rightIcon:"caret-down"})})})})}));var _=u.c.div.withConfig({displayName:"ConfigEditorConfigPicker__PickerContainer",componentId:"sc-1t3oup5-0"})(["display:flex;justify:space-between;align-items:center;"]),I=Object(p.gql)(r||(r=Object(s.a)(["\n  fragment ConfigEditorGeneratorPipelineFragment on Pipeline {\n    id\n    name\n    presets {\n      __typename\n      name\n      mode\n      solidSelection\n      runConfigYaml\n      tags {\n        key\n        value\n      }\n    }\n    tags {\n      key\n      value\n    }\n  }\n"]))),A=Object(p.gql)(i||(i=Object(s.a)(["\n  fragment ConfigEditorGeneratorPartitionSetsFragment on PartitionSets {\n    results {\n      id\n      name\n      mode\n      solidSelection\n    }\n  }\n"]))),T=Object(p.gql)(o||(o=Object(s.a)(["\n  query ConfigPartitionsQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              name\n            }\n          }\n          ... on PythonError {\n            ...PythonErrorFragment\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),y.a),F=Object(p.gql)(a||(a=Object(s.a)(["\n  query ConfigPartitionSelectionQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $partitionName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partition(partitionName: $partitionName) {\n          name\n          solidSelection\n          runConfigOrError {\n            ... on PartitionRunConfig {\n              yaml\n            }\n            ... on PythonError {\n              ...PythonErrorFragment\n            }\n          }\n          mode\n          tagsOrError {\n            ... on PartitionTags {\n              results {\n                key\n                value\n              }\n            }\n            ... on PythonError {\n              ...PythonErrorFragment\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),y.a)},814:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6),i=(n(1),n(21)),o=n(71),a=n(0),s=function(e){var t=e.isLoading,n=e.message;return Object(a.jsx)(c,{isLoading:t,children:Object(a.jsxs)(i.a,{direction:"row",spacing:8,alignItems:"center",children:[Object(a.jsx)(o.a,{purpose:"body-text"}),Object(a.jsx)("div",{children:n})]})})},c=r.c.div.withConfig({displayName:"LoadingOverlay__LoadingOverlayContainer",componentId:"sc-1ng89fb-0"})(["position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fff;z-index:20;display:",";align-items:center;justify-content:center;opacity:",";transition:opacity 150ms linear;transition-delay:300ms;"],(function(e){return e.isLoading?"flex":"none"}),(function(e){return e.isLoading?"0.7":"0"}))},815:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return x}));var r=n(27),i=n(17),o=n(6),a=n(29),s=n(3),c=n(82),l=n(1),d=n(65),u=n(86),p=n(19),j=n(78),b=n(15),h=n(21),m=n(18),f=n(0),O=function(e){var t=e.tagsFromDefinition,n=void 0===t?[]:t,o=e.tagsFromSession,b=void 0===o?[]:o,O=e.open,x=e.onChange,g=e.onRequestClose,S=l.useState((function(){return b.length?b:[{key:"",value:""}]})),E=Object(i.a)(S,2),k=E[0],w=E[1],R=k.map((function(e){return{key:e.key.trim(),value:e.value.trim()}})).filter((function(e){return e.key&&e.value})),N=k.map((function(e){return{key:e.key.trim(),value:e.value.trim()}})).filter((function(e){return!e.key!==!e.value})),C=function(){N.length||(x(R),g())},_=k===b||!!N.length,I=function(e,t,n){w((function(i){return[].concat(Object(r.a)(i.slice(0,n)),[{key:e,value:t}],Object(r.a)(i.slice(n+1)))}))};return Object(f.jsxs)(a.h,{icon:"info-sign",onClose:g,style:{minWidth:500},title:"Add tags to run",usePortal:!0,isOpen:O,children:[Object(f.jsx)("div",{className:s.a.DIALOG_BODY,style:{margin:0,marginBottom:17,height:"calc(100% - 85px)",position:"relative"},children:Object(f.jsxs)(h.a,{padding:16,spacing:16,direction:"column",children:[n.length?Object(f.jsxs)(h.a,{direction:"column",spacing:8,children:[Object(f.jsx)(p.a,{margin:{left:2},style:{fontSize:"13px",fontWeight:500},children:"Tags from definition:"}),Object(f.jsx)(P,{children:n.map((function(e,t){var n=e.key;return k.some((function(e){return e.key===n}))?Object(f.jsx)(c.a,{content:"Overriden by custom tag value",placement:"top",children:Object(f.jsx)("span",{style:{opacity:.2},children:Object(f.jsx)(u.b,{tag:e},t)})},n):Object(f.jsx)(u.b,{tag:e},n)}))})]}):null,Object(f.jsxs)(h.a,{direction:"column",spacing:8,children:[Object(f.jsx)(p.a,{margin:{left:2},style:{fontSize:"13px",fontWeight:500},children:"Custom tags:"}),Object(f.jsxs)("div",{children:[k.map((function(e,t){var n=e.key,i=e.value;return Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginBottom:8},children:[Object(f.jsx)(v,{type:"text",placeholder:"Tag Key",value:n,onChange:function(e){return I(e.target.value,i,t)}}),Object(f.jsx)(v,{type:"text",placeholder:"Tag Value",value:i,onChange:function(e){return I(n,e.target.value,t)}}),Object(f.jsx)(y,{onClick:function(){return function(e){w((function(t){return[].concat(Object(r.a)(t.slice(0,e)),Object(r.a)(t.slice(e+1)))}))}(t)},children:Object(f.jsx)(m.a,{name:"close"})})]},t)})),Object(f.jsx)(p.a,{margin:{left:2},children:Object(f.jsx)(j.a,{onClick:function(){w((function(e){return[].concat(Object(r.a)(e),[{key:"",value:""}])}))},children:"+ Add custom tag"})})]})]})]})}),Object(f.jsx)("div",{className:s.a.DIALOG_FOOTER,children:Object(f.jsxs)("div",{className:s.a.DIALOG_FOOTER_ACTIONS,children:[Object(f.jsx)(a.c,{onClick:g,children:"Cancel"}),Object(f.jsx)(d.a,{shortcutLabel:"\u2325Enter",shortcutFilter:function(e){return 13===e.keyCode&&e.altKey},onShortcut:C,children:Object(f.jsx)(a.c,{intent:"primary",onClick:C,disabled:_,children:"Apply"})})]})})]})},x=function(e){var t=e.tags,n=e.onRequestEdit,r=t.fromDefinition,i=void 0===r?[]:r,o=t.fromSession,a=void 0===o?[]:o;return Object(f.jsxs)(S,{children:[Object(f.jsxs)(P,{children:[i.map((function(e,t){var n=e.key;return a.some((function(e){return e.key===n}))?Object(f.jsx)(c.a,{content:"Overriden by custom tag value",placement:"top",children:Object(f.jsx)("span",{style:{opacity:.2},children:Object(f.jsx)(u.b,{tag:e},t)})},n):Object(f.jsx)(u.b,{tag:e},t)})),a.map((function(e,t){return Object(f.jsx)(u.b,{tag:e},t)}))]}),Object(f.jsx)(g,{onRequestOpen:n,children:Object(f.jsxs)(h.a,{direction:"row",spacing:4,alignItems:"center",children:[Object(f.jsx)(m.a,{name:"edit",color:b.a.Gray500})," Edit Tags"]})})]})},g=function(e){var t=e.onRequestOpen,n=e.children;return Object(f.jsx)(d.a,{shortcutLabel:"\u2325T",shortcutFilter:function(e){return 84===e.keyCode&&e.altKey},onShortcut:t,children:Object(f.jsx)(E,{onClick:t,children:n})})},y=o.c.button.withConfig({displayName:"TagEditor__RemoveButton",componentId:"wpv8rt-0"})(["background:none;border:none;border-radius:4px;cursor:pointer;padding:0 3px;:hover{background-color:",";}"],b.a.Gray200),v=o.c.input.withConfig({displayName:"TagEditor__Input",componentId:"wpv8rt-1"})(["flex:1;margin-right:10px;border-radius:3px;font-size:14px;padding:3px 7px;border:1px solid #cccccc;"]),S=o.c.div.withConfig({displayName:"TagEditor__Container",componentId:"wpv8rt-2"})(["align-items:flex-start;display:flex;flex-direction:row;border-bottom:1px solid #ececec;padding:4px 8px;"]),P=o.c.div.withConfig({displayName:"TagEditor__TagList",componentId:"wpv8rt-3"})(["display:flex;flex:1;flex-wrap:wrap;"]),E=o.c.div.withConfig({displayName:"TagEditor__Link",componentId:"wpv8rt-4"})(["color:#666;cursor:pointer;margin:4px 12px;font-size:12px;&:hover{color:#aaa;}"])}}]);
//# sourceMappingURL=9.239d7ae5.chunk.js.map