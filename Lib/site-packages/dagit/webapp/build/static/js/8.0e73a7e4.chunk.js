(this["webpackJsonp@dagit/app"]=this["webpackJsonp@dagit/app"]||[]).push([[8],{1066:function(e,n,t){"use strict";t.r(n),t.d(n,"InstanceRoot",(function(){return Mr}));var r,i,o,c=t(1),a=t(38),s=t(11),l=t(17),u=t(6),d=t(10),p=t(29),j=t(22),h=t(25),b=t(19),f=t(21),g=t(18),O=t(604),m=t(608),x=t(203),v=t(83),y=t(609),k=t(727),S=t(821),C=t(0),w=function(e){var n=e.assetKey,t=e.asOf,r=n.path.join(" \u203a ");return Object(y.a)("Asset: ".concat(r)),Object(C.jsxs)(f.a,{spacing:24,direction:"column",children:[Object(C.jsx)(k.a,{assetKey:n,asOf:t}),Object(C.jsx)(S.a,{assetKey:n,asOf:t})]})},E=t(27),I=t(82),R=t(52),_=t(36),T=t(648),L=t(202),P=t(195),N=t(62),A=t.n(N),D=t(94),F=t(3),q=function(e){var n=e.assetKeys,t=e.isOpen,r=e.onClose,i=e.onComplete,o=e.requery,c=Object(d.useMutation)(U,{variables:{assetKeys:n.map((function(e){return{path:e.path||[]}}))},refetchQueries:o}),a=Object(l.a)(c,1)[0],s=function(){var e=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a();case 4:i(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=1===n.length?Object(C.jsxs)(C.Fragment,{children:["Wipe asset ",Object(C.jsx)("code",{children:n[0].path.join(" > ")})]}):Object(C.jsxs)(C.Fragment,{children:["Wipe ",n.length," assets"]});return Object(C.jsxs)(p.h,{isOpen:t,title:u,onClose:r,style:{width:800},children:[Object(C.jsx)("div",{className:F.a.DIALOG_BODY,children:"Wiping assets cannot be undone."}),Object(C.jsx)("div",{className:F.a.DIALOG_FOOTER,children:Object(C.jsxs)("div",{className:F.a.DIALOG_FOOTER_ACTIONS,children:[Object(C.jsx)(p.c,{intent:"danger",onClick:s,children:"Wipe"}),Object(C.jsx)(p.c,{intent:"none",onClick:r,children:"Cancel"})]})})]})},U=Object(d.gql)(r||(r=Object(s.a)(["\n  mutation AssetWipeMutation($assetKeys: [AssetKeyInput!]!) {\n    wipeAssets(assetKeys: $assetKeys) {\n      ... on AssetWipeSuccess {\n        assetKeys {\n          path\n        }\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n"]))),G=t(59),K=t(72),H=t(9),B=t(128),Q=t(80),M=t.n(Q),W=function(e,n){var t=n.toLocaleLowerCase().trim().split(/\s+/),r=t.length?t[t.length-1]:"",i=c.useMemo((function(){return e(r)}),[e,r]),o=c.useCallback((function(e){var t=n.toLocaleLowerCase().lastIndexOf(r);if(-1!==t){var i=n.slice(0,t);return"".concat(i).concat(e)}return n}),[r,n]);return c.useMemo((function(){return{suggestions:i,onSelectSuggestion:o}}),[o,i])},$=M()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};e.forEach((function(e){e.tags.forEach((function(e){n[e.key]=e.value}))}));var t=[];return Object.keys(n).forEach((function(e){t.push("".concat(e,"=").concat(n[e]))})),t.sort(),t.length?[{token:"tag",values:function(){return t}}]:[]})),z=function(e,n){return n.toLowerCase().split(" ").filter((function(e){return e})).every((function(n){return e.toLowerCase().includes(n)}))},Y={threshold:.3},J=function(e){var n=e.assets,t=e.query,r=e.onSetQuery,i=c.useState(0),o=Object(l.a)(i,2),a=o[0],s=o[1],u=c.useState(!1),d=Object(l.a)(u,2),j=d[0],h=d[1],b=$(n),f=c.useMemo((function(){var e=b.reduce((function(e,n){var t=n.values();return Object(H.a)(Object(H.a)({},e),{},Object(K.a)({},n.token,{fuse:new B.a(t,Y),all:t}))}),{}),n=b.map((function(e){return e.token}));return{empty:new B.a(n,Y),perProvider:e}}),[b]),g=f.empty,O=f.perProvider,m=c.useCallback((function(e){if(!e)return Object.keys(O);var n=e.split(":"),t=Object(l.a)(n,2),r=t[0],i=t[1];if(r in O){var o=O[r],c=o.fuse,a=o.all,s=i?c.search(i).map((function(e){return"".concat(r,":").concat(e.item)})):a.map((function(e){return"".concat(r,":").concat(e)}));return s.map((function(e){return e.toLowerCase()})).includes(e)?[]:s}return g.search(e).map((function(e){return e.item}))}),[g,O]),x=W(m,t||""),v=x.suggestions,y=x.onSelectSuggestion,k=c.useCallback((function(e){r(y(e)),s(0)}),[r,y]),S=j&&v.length>0;return Object(C.jsx)(p.t,{minimal:!0,usePortal:!0,isOpen:S,position:"bottom-left",content:Object(C.jsx)(X,{children:v.map((function(e,n){return Object(C.jsx)(Z,{onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),k(e)},isHighlight:a===n,children:Object(C.jsx)("div",{children:Object(C.jsx)("div",{children:e})})},n)}))}),children:Object(C.jsx)(V,{type:"text",value:t,width:300,fill:!1,placeholder:"Filter asset_keys...",hasSuggestions:S,onChange:function(e){r(e.target.value),s(0)},onKeyDown:function(e){if("Enter"!==e.key&&"Return"!==e.key&&"Tab"!==e.key)if("Escape"!==e.key){var n=v.length-1;"ArrowUp"===e.key?(e.preventDefault(),s(0===a?n:a-1)):"ArrowDown"===e.key&&(e.preventDefault(),s(a===n?0:a+1))}else s(0);else if(v.length){var t=v[a];if(!t)throw new Error("Selection out of sync with suggestions");k(t),e.preventDefault(),e.stopPropagation()}},onBlur:function(){return h(!1)},onFocus:function(){return h(!0)}})})},V=Object(u.c)((function(e){e.hasSuggestions;var n=Object(G.a)(e,["hasSuggestions"]);return Object(C.jsx)(p.m,Object(H.a)({},n))})).withConfig({displayName:"AssetsFilter__InputGroup",componentId:"rp7hb3-0"})(["input,input:focus{outline:none;box-shadow:none;border:1px solid ",";margin-left:0px;min-width:600px;}input:focus{border-bottom-left-radius:",";border-bottom-right-radius:",";}"],j.a.LIGHT_GRAY1,(function(e){return e.hasSuggestions?0:3}),(function(e){return e.hasSuggestions?0:3})),X=u.c.ul.withConfig({displayName:"AssetsFilter__Menu",componentId:"rp7hb3-1"})(["list-style:none;margin:0;max-height:200px;max-width:800px;min-width:600px;overflow-y:auto;padding:0;"]),Z=u.c.li.withConfig({displayName:"AssetsFilter__Item",componentId:"rp7hb3-2"})(["align-items:center;background-color:",";color:",";cursor:pointer;display:flex;flex-direction:row;font-size:12px;list-style:none;margin:0;padding:4px 8px;white-space:nowrap;text-overflow:ellipsis;&:hover{background-color:",";}"],(function(e){return e.isHighlight?j.a.BLUE3:j.a.WHITE}),(function(e){return e.isHighlight?j.a.WHITE:"default"}),(function(e){return e.isHighlight?j.a.BLUE3:j.a.LIGHT_GRAY3})),ee="AssetViewPreference",ne=function(){var e=c.useState((function(){var e=window.localStorage.getItem(ee);return"flat"===e||"directory"===e?e:"flat"})),n=Object(l.a)(e,2),t=n[0],r=n[1],i=c.useCallback((function(e){window.localStorage.setItem(ee,e),r(e)}),[]);return c.useMemo((function(){return[t,i]}),[t,i])},te=Object(C.jsxs)(b.a,{style:{maxWidth:300},children:["Tags are an experimental feature of asset materializations. See the"," ",Object(C.jsx)("a",{href:"https://docs.dagster.io/_apidocs/solids#dagster.AssetMaterialization",style:{color:j.a.WHITE},children:"AssetMaterialization documentation"})," ","for more about adding asset tags."]}),re=function(e){var n=e.prefixPath,t=Object(d.useQuery)(me,{notifyOnNetworkStatusChange:!0,pollInterval:15e3}),r=c.useState(""),i=Object(l.a)(r,2),o=i[0],s=i[1],u=ne(),j=Object(l.a)(u,2),h=j[0],g=j[1],m="directory"!==h,x=Object(a.h)(),v=function(e){g(e?"flat":"directory"),e&&n&&x.push("/instance/assets")};return Object(C.jsx)("div",{style:{flexGrow:1},children:Object(C.jsx)(O.a,{allowStaleData:!0,queryResult:t,children:function(e){var r=e.assetsOrError;if("PythonError"===r.__typename)return Object(C.jsx)(Oe,{children:Object(C.jsx)(_.b,{error:r})});var i=r.nodes,c=n?r.nodes.filter((function(e){return n.length<e.key.path.length&&n.every((function(n,t){return n===e.key.path[t]}))})):r.nodes,a=m?function(e,n){if(!n)return e;var t=n.split(/\s+/),r=t.filter((function(e){return e.startsWith("tag:")})).map((function(e){var n=e.substring(4).split("="),t=Object(l.a)(n,2);return{key:t[0],value:t[1]}})),i=t.filter((function(e){return!e.startsWith("tag:")}));return e.filter((function(e){return z(e.key.path.join(" "),i.join(" "))})).filter((function(e){return r.every((function(n){return e.tags.some((function(e){return e.key===n.key&&e.value===n.value}))}))}))}(c,o):c.filter((function(e){return!o||ie(e.key.path.join("/"),o)}));if(!c.length)return Object(C.jsx)(Oe,{children:Object(C.jsx)(p.r,{icon:"panel-table",title:"Assets",description:Object(C.jsxs)("p",{children:[n&&n.length?Object(C.jsx)("span",{children:"There are no matching materialized assets with the specified asset key."}):Object(C.jsx)("span",{children:"There are no known materialized assets."}),"Any asset keys that have been specified with an"," ",Object(C.jsx)("code",{children:"AssetMaterialization"})," during a pipeline run will appear here. See the"," ",Object(C.jsx)("a",{href:"https://docs.dagster.io/_apidocs/solids#dagster.AssetMaterialization",children:"AssetMaterialization documentation"})," ","for more information."]})})});var u=n||c.some((function(e){return e.key.path.length>1}));return Object(C.jsxs)(Oe,{children:[Object(C.jsxs)(b.a,{flex:{justifyContent:"space-between"},children:[Object(C.jsx)("div",{children:u?Object(C.jsxs)(f.a,{spacing:8,direction:"row",children:[Object(C.jsxs)(p.d,{children:[Object(C.jsx)(p.c,{icon:"list",title:"Flat",active:m,onClick:function(){return v(!0)}}),Object(C.jsx)(p.c,{icon:"folder-close",title:"Directory",active:!m,onClick:function(){return v(!1)}})]}),m?Object(C.jsx)(J,{assets:c,query:o,onSetQuery:s}):Object(C.jsx)(oe,{assets:i})]}):m?Object(C.jsx)(J,{assets:c,query:o,onSetQuery:s}):Object(C.jsx)(oe,{assets:i})}),Object(C.jsx)(T.a,{pollInterval:15e3,queryResult:t})]}),Object(C.jsx)(be,{assets:a,currentPath:n||[],setQuery:s,isFlattened:m})]})}})})},ie=function(e,n){return n.toLowerCase().split(" ").filter((function(e){return e})).every((function(n){return e.toLowerCase().includes(n)}))},oe=function(e){var n=e.assets,t=Object(a.h)(),r=c.useState(!1),i=Object(l.a)(r,2),o=i[0],s=i[1],u=c.useState(0),d=Object(l.a)(u,2),j=d[0],h=d[1],b=c.useState(""),f=Object(l.a)(b,2),g=f[0],O=f[1];c.useEffect((function(){h(0),g&&s(!0)}),[g]);var m=function(e){t.push("/instance/assets/".concat(e.key.path.join("/")))},x=n.filter((function(e){return!g||ie(e.key.path.join("/"),g)}));return Object(C.jsx)("div",{style:{width:600},children:Object(C.jsx)(p.t,{minimal:!0,fill:!0,isOpen:o&&x.length>0,position:"bottom-left",content:Object(C.jsx)(p.n,{style:{maxWidth:600,minWidth:600},children:x.slice(0,10).map((function(e,n){return Object(C.jsx)(p.p,{onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),m(e)},active:j===n,icon:"panel-table",text:Object(C.jsx)("div",{children:Object(C.jsx)("div",{children:e.key.path.join("/")})})},n)}))}),children:Object(C.jsx)(xe,{type:"text",value:g,width:600,fill:!1,placeholder:"Search all asset_keys...",onChange:function(e){return O(e.target.value)},onFocus:function(){return s(!0)},onBlur:function(){return s(!1)},onKeyDown:function(e){if("Enter"!==e.key&&"Return"!==e.key&&"Tab"!==e.key){if("Escape"===e.key)return h(0),void s(!1);var n=x.length-1;"ArrowUp"===e.key?(e.preventDefault(),h(0===j?n:j-1)):"ArrowDown"===e.key&&(e.preventDefault(),h(j===n?0:j+1))}else if(x.length){var t=x[j];if(!t)throw new Error("Selection out of sync with suggestions");m(t),e.preventDefault(),e.stopPropagation()}}})})})},ce={checkedPaths:new Set,lastPath:void 0};!function(e){e.TOGGLE_ONE="toggle-one",e.TOGGLE_SLICE="toggle-slice",e.TOGGLE_ALL="toggle-all"}(o||(o={}));var ae,se,le,ue,de,pe,je,he=function(e,n){var t=new Set(Array.from(e.checkedPaths));switch(n.type){case"toggle-one":var r=n.payload,i=r.checked,o=r.path;return i?t.add(JSON.stringify(o)):t.delete(JSON.stringify(o)),{checkedPaths:t,lastPath:o};case"toggle-slice":var c=n.payload,a=c.checked,s=c.path,u=c.allPaths,d=JSON.stringify(s),p=JSON.stringify(e.lastPath),j=u.map((function(e){return JSON.stringify(e)})),h=j.findIndex((function(e){return e===p})),b=j.findIndex((function(e){return e===d}));if(void 0===h||void 0===b)return e;var f=[h,b].sort(),g=Object(l.a)(f,2),O=g[0],m=g[1];return j.slice(O,m+1).forEach((function(e){return a?t.add(e):t.delete(e)})),{lastPath:s,checkedPaths:t};case"toggle-all":var x=n.payload,v=x.checked,y=x.allPaths;return{checkedPaths:v?new Set(y.map((function(e){return JSON.stringify(e)}))):new Set,lastPath:void 0};default:return e}},be=function(e){var n=e.assets,t=e.currentPath,r=e.isFlattened,i=e.setQuery;Object(y.a)(t.length?"Assets: ".concat(t.join(" \u203a ")):"Assets");var a=c.useState(),s=Object(l.a)(a,2),u=s[0],d=s[1],j=Object(R.c)().canWipeAssets,h=c.useReducer(he,ce),O=Object(l.a)(h,2),m=O[0],x=O[1],v=m.checkedPaths,k=!!n.filter((function(e){return e.tags.length})).length,S={};n.forEach((function(e){var n=r?e.key.path:e.key.path.slice(t.length,t.length+1),i=JSON.stringify(n);S[i]=[].concat(Object(E.a)(S[i]||[]),[e])}));var w=Object.keys(S).sort().map((function(e){return JSON.parse(e)})),_=function(e){i("tag:".concat(e.key,"=").concat(e.value))},T=function(e){x({type:o.TOGGLE_ALL,payload:{checked:e,allPaths:w}})},P=function(e,n){if(e.target instanceof HTMLInputElement){var t=e.target.checked;e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")&&m.lastPath?x({type:o.TOGGLE_SLICE,payload:{checked:t,path:n,allPaths:w}}):x({type:o.TOGGLE_ONE,payload:{checked:t,path:n,allPaths:w}})}},N=new Set;return w.forEach((function(e){var n=JSON.stringify(e);v.has(n)&&(S[n]||[]).forEach((function(e){return N.add(e)}))})),Object(C.jsxs)(b.a,{margin:{top:20},children:[Object(C.jsxs)(L.a,{children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[j?Object(C.jsx)("th",{style:{width:50},children:Object(C.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(C.jsx)(p.e,{style:{marginBottom:0,marginTop:1},indeterminate:v.size>0&&v.size!==w.length,checked:v.size===w.length,onChange:function(e){if(e.target instanceof HTMLInputElement){var n=v.size!==w.length;T(n)}}}),Object(C.jsx)(ge,{selected:Array.from(N),clearSelection:function(){return T(!1)}})]})}):null,Object(C.jsx)("th",{children:"Asset Key"}),k?Object(C.jsx)("th",{children:Object(C.jsxs)(f.a,{direction:"row",spacing:8,alignItems:"center",children:["Tags",Object(C.jsx)(I.a,{position:"top",content:te,children:Object(C.jsx)(g.a,{name:"info"})})]})}):null,j?Object(C.jsx)("th",{children:"Actions"}):null]})}),Object(C.jsx)("tbody",{children:w.map((function(e,n){var i=v.has(JSON.stringify(e));return Object(C.jsx)(fe,{currentPath:t,path:e,assets:S[JSON.stringify(e)]||[],shouldShowTags:k,isFlattened:r,isSelected:i,onSelectToggle:P,onTagClick:_,onWipe:function(e){return d(e.map((function(e){return e.key})))},canWipe:j},n)}))})]}),Object(C.jsx)(q,{assetKeys:u||[],isOpen:!!u,onClose:function(){return d(void 0)},onComplete:function(){return d(void 0)},requery:function(e){return[{query:me}]}})]})},fe=c.memo((function(e){var n=e.currentPath,t=e.path,r=e.shouldShowTags,i=e.assets,o=e.onTagClick,a=e.isSelected,s=e.isFlattened,l=e.onSelectToggle,u=e.onWipe,d=e.canWipe,j=[].concat(Object(E.a)(n||[]),Object(E.a)(t)),f=1===i.length&&j.join("/")===i[0].key.path.join("/"),g="/instance/assets/".concat(j.map(encodeURIComponent).join("/"));return Object(C.jsxs)("tr",{children:[d?Object(C.jsx)("td",{style:{paddingRight:"4px"},children:Object(C.jsx)(p.e,{checked:a,onChange:function(e){return l(e,t)}})}):null,Object(C.jsx)("td",{children:Object(C.jsx)(h.b,{to:g,children:Object(C.jsxs)(b.a,{flex:{alignItems:"center"},children:[t.map((function(e,n){return Object(C.jsx)("span",{children:e},n)})).reduce((function(e,n,t){return[].concat(Object(E.a)(e),[t>0?Object(C.jsxs)(c.Fragment,{children:["\xa0",">","\xa0"]},"".concat(t,"-space")):null,n])}),[]),f||s?null:"/"]})})}),r?Object(C.jsx)("td",{children:f&&i[0].tags.length?Object(C.jsx)(b.a,{flex:{direction:"row",wrap:"wrap"},children:i[0].tags.map((function(e,n){return Object(C.jsx)(P.a,{tag:e,onClick:function(){return o(e)}},n)}))}):null}):null,d?Object(C.jsx)("td",{children:f?Object(C.jsx)(p.t,{content:Object(C.jsx)(p.n,{children:Object(C.jsx)(p.p,{text:"Wipe ...",icon:"trash",target:"_blank",onClick:function(){return u(i)}})}),position:"bottom",children:Object(C.jsx)(p.c,{small:!0,minimal:!0,icon:"chevron-down",style:{marginLeft:"4px"}})}):Object(C.jsx)(p.c,{small:!0,minimal:!0,disabled:!0,icon:"chevron-down",style:{marginLeft:"4px"}})}):null]})})),ge=c.memo((function(e){var n=e.selected,t=e.clearSelection,r=c.useState(!1),i=Object(l.a)(r,2),o=i[0],a=i[1];if(!Object(R.c)().canWipeAssets)return null;var s=0===n.length,u=s?"Select assets to wipe":1===n.length?"Wipe 1 asset":"Wipe ".concat(n.length," assets");return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(I.a,{position:"right",content:u,children:Object(C.jsx)(p.c,{disabled:s,icon:"trash",intent:s?void 0:"danger",onClick:function(){return a(!0)},children:s?null:n.length})}),Object(C.jsx)(q,{assetKeys:n.map((function(e){return e.key})),isOpen:o,onClose:function(){return a(!1)},onComplete:function(){a(!1),t()},requery:function(e){return[{query:me}]}})]})})),Oe=u.c.div.withConfig({displayName:"AssetsCatalogTable__Wrapper",componentId:"sc-1supbpo-0"})(["flex:1 1;display:flex;flex-direction:column;width:100%;height:100%;min-width:0;overflow:auto;position:relative;z-index:0;table th{vertical-align:middle;}"]),me=Object(d.gql)(i||(i=Object(s.a)(["\n  query AssetsTableQuery {\n    assetsOrError {\n      __typename\n      ... on AssetConnection {\n        nodes {\n          id\n          key {\n            path\n          }\n          tags {\n            key\n            value\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),_.a),xe=Object(u.c)(p.m).withConfig({displayName:"AssetsCatalogTable__InputGroup",componentId:"sc-1supbpo-1"})(["input,input:focus{outline:none;box-shadow:none;border:1px solid #ececec;}"]),ve=function(e){var n=e.location,t=(e.match.params[0]||"").split("/").filter((function(e){return e})).map(decodeURIComponent),r=n.pathname,i=n.search,o=c.useMemo((function(){return new URLSearchParams(i).get("asOf")}),[i]),s=c.useMemo((function(){var e=Number(o);return e&&(e<14200704e5||e>Date.now())}),[o]),u=ne(),j=Object(l.a)(u,1)[0],y=Object(d.useQuery)(Se,{variables:{assetKey:{path:t}}});if(s)return Object(C.jsx)(a.b,{to:r});return Object(C.jsx)(m.a,{children:Object(C.jsxs)(f.a,{direction:"column",spacing:20,children:[Object(C.jsx)(x.a,{title:"directory"!==j?Object(C.jsx)(v.d,{children:t[t.length-1]}):Object(C.jsx)(b.a,{flex:{alignItems:"center"},children:t.map((function(e,n){return Object(C.jsx)(v.d,{children:e},n)})).reduce((function(e,n,t){return[e,Object(C.jsx)(b.a,{padding:4,children:Object(C.jsx)(g.a,{name:"chevron_right",size:24})},"separator_".concat(t)),n]}))}),icon:"table_view",description:Object(C.jsx)(ke,{children:function(){if(1===t.length||"directory"!==j)return Object(C.jsx)(h.b,{to:"/instance/assets",children:"Assets"});var e=[];return t.slice(0,t.length-1).reduce((function(n,t){var r="".concat(n,"/").concat(encodeURIComponent(t));return e.push({text:t,href:r}),r}),"/instance/assets"),Object(C.jsxs)(b.a,{flex:{direction:"row",alignItems:"center"},style:{maxWidth:500},children:[Object(C.jsxs)(b.a,{margin:{right:4},children:[Object(C.jsx)(h.b,{to:"/instance/assets",children:"Assets"}),":"]}),Object(C.jsx)(p.b,{breadcrumbRenderer:function(e){var n=e.text,t=e.href;return Object(C.jsx)(h.b,{to:t||"#",children:Object(C.jsx)("span",{style:{fontSize:"14px"},children:n})})},items:e})]})}()})}),Object(C.jsx)(O.a,{queryResult:y,children:function(e){var n=e.assetOrError;return"AssetNotFoundError"===n.__typename?Object(C.jsx)(re,{prefixPath:t}):Object(C.jsx)(ye,{children:Object(C.jsx)(w,{assetKey:n.key,asOf:o})})}})]})})},ye=u.c.div.withConfig({displayName:"AssetEntryRoot__Wrapper",componentId:"sc-10zgf51-0"})(["flex:1 1;display:flex;flex-direction:column;width:100%;height:100%;min-width:0;overflow:auto;"]),ke=u.c.div.withConfig({displayName:"AssetEntryRoot__PathDetails",componentId:"sc-10zgf51-1"})(["color:",";.bp3-breadcrumbs{height:auto;}.bp3-breadcrumbs-collapsed{position:relative;top:2px;margin-left:2px;}"],j.a.GRAY2),Se=Object(d.gql)(ae||(ae=Object(s.a)(["\n  query AssetEntryRootQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      __typename\n      ... on Asset {\n        id\n        key {\n          path\n        }\n      }\n    }\n  }\n"]))),Ce=function(e){var n=(e.match.params[0]||"").split("/").filter((function(e){return e})).map(decodeURIComponent);return Object(C.jsx)(m.a,{children:Object(C.jsxs)(f.a,{direction:"column",spacing:12,children:[Object(C.jsx)(x.a,{title:Object(C.jsx)(v.d,{children:"Assets"})}),Object(C.jsx)(re,{prefixPath:n})]})})},we=t(595),Ee=t(616),Ie=t(41),Re=t(40),_e=t(106),Te=t(73),Le=t(632),Pe=t(702),Ne=t(682),Ae=t(767),De=t(624),Fe=t(626),qe=t(703),Ue=t(71),Ge=t(768),Ke=t(24),He=function(e){return e.length<Ge.c?e:e.slice(-Ge.c)},Be=function(e,n){if(!n)return e;var t=null===e||void 0===e?void 0:e.data;return(null===e||void 0===e?void 0:e.data)&&(null===n||void 0===n?void 0:n.data)?t=He(e.data+n.data):(null===n||void 0===n?void 0:n.data)&&(t=He(n.data)),{__typename:n.__typename,path:n.path,downloadUrl:n.downloadUrl,data:"string"===typeof t?t:null,cursor:n.cursor}},Qe=function(e,n){switch(n.type){case"stdout":var t=n.stepKey===e.stepKey?Be(e.stdout,n.log):n.log;return Object(H.a)(Object(H.a)({},e),{},{isLoading:!1,stdout:t});case"stderr":var r=n.stepKey===e.stepKey?Be(e.stderr,n.log):n.log;return Object(H.a)(Object(H.a)({},e),{},{isLoading:!1,stderr:r});default:return e}},Me={stepKey:"",stdout:null,stderr:null,isLoading:!0},We=Object(d.gql)(se||(se=Object(s.a)(["\n  fragment ComputeLogsSubscriptionFragment on ComputeLogFile {\n    data\n    cursor\n    ...ComputeLogContentFileFragment\n  }\n  ","\n"])),Ge.a),$e=Object(d.gql)(le||(le=Object(s.a)(["\n  subscription ComputeLogsSubscription(\n    $runId: ID!\n    $stepKey: String!\n    $ioType: ComputeIOType!\n    $cursor: String\n  ) {\n    computeLogs(runId: $runId, stepKey: $stepKey, ioType: $ioType, cursor: $cursor) {\n      ...ComputeLogsSubscriptionFragment\n    }\n  }\n  ","\n"])),We),ze=c.memo((function(e){var n=e.runId,t=e.stepKeys,r=e.computeLogKey,i=e.ioType,o=e.setComputeLogUrl,a=c.useContext(_e.a).rootServerURI,s=function(e,n){var t=c.useReducer(Qe,Me),r=Object(l.a)(t,2),i=r[0],o=r[1];return Object(d.useSubscription)($e,{fetchPolicy:"no-cache",variables:{runId:e,stepKey:n,ioType:Ke.b.STDOUT,cursor:null},skip:!n,onSubscriptionData:function(e){var t,r=e.subscriptionData;n&&o({type:"stdout",stepKey:n,log:(null===(t=r.data)||void 0===t?void 0:t.computeLogs)||null})}}),Object(d.useSubscription)($e,{fetchPolicy:"no-cache",variables:{runId:e,stepKey:n,ioType:Ke.b.STDERR,cursor:null},skip:!n,onSubscriptionData:function(e){var t,r=e.subscriptionData;n&&o({type:"stderr",stepKey:n,log:(null===(t=r.data)||void 0===t?void 0:t.computeLogs)||null})}}),i}(n,r),u=s.isLoading,p=s.stdout,j=s.stderr;if(!t.length||!r)return Object(C.jsx)(b.a,{flex:{justifyContent:"center",alignItems:"center"},style:{flex:1,height:"100%"},children:Object(C.jsx)(Ue.a,{purpose:"section"})});var h=function(e,n){var t,r=null===n||void 0===n?void 0:n.downloadUrl;return r?(t=r)&&t.startsWith("/")?e+r:r:null}(a,"stdout"===i?p:j);return Object(C.jsxs)("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[Object(C.jsx)(Ye,{logData:p,isLoading:u,isVisible:"stdout"===i,downloadUrl:h,setComputeLogUrl:o}),Object(C.jsx)(Ye,{logData:j,isLoading:u,isVisible:"stderr"===i,downloadUrl:h,setComputeLogUrl:o})]})})),Ye=function(e){var n=e.isLoading,t=e.isVisible,r=e.logData,i=e.downloadUrl,o=e.setComputeLogUrl;return c.useEffect((function(){o(i)}),[o,i]),Object(C.jsx)(Ge.b,{logData:r,isLoading:n,isVisible:t,downloadUrl:i})},Je=t(77),Ve=t(901),Xe=t.n(Ve),Ze=t(153),en=t(704),nn=function(e,n){switch(n.type){case"append":var t=[].concat(Object(E.a)(e.nodes),Object(E.a)(n.queued)).map((function(e,n){return Object(H.a)(Object(H.a)({},e),{},{clientsideKey:"csk".concat(n)})}));return Object(H.a)(Object(H.a)({},e),{},{nodes:t,loading:n.hasMore});case"set-cursor":return Object(H.a)(Object(H.a)({},e),{},{cursor:e.nodes.length-1});case"reset":return{nodes:[],cursor:-1,loading:!0};default:return e}},tn={nodes:[],cursor:-1,loading:!0},rn=function(e){var n=Object(d.useApolloClient)(),t=c.useContext(Ze.a).websocketClient,r=c.useRef([]),i=c.useReducer(nn,tn),o=Object(l.a)(i,2),a=o[0],s=o[1],u=c.useCallback((function(t){var r=n.readFragment({fragmentName:"PipelineRunLogsSubscriptionStatusFragment",fragment:ln,id:"PipelineRun:".concat(e)});if(r){var i=Object(H.a)(Object(H.a)({},r),{},{status:t});t!==Ke.j.FAILURE&&t!==Ke.j.SUCCESS&&t!==Ke.j.STARTING&&t!==Ke.j.CANCELING&&t!==Ke.j.CANCELED||(i.canTerminate=!1),n.writeFragment({fragmentName:"PipelineRunLogsSubscriptionStatusFragment",fragment:ln,id:"PipelineRun:".concat(e),data:i})}}),[n,e]);c.useEffect((function(){var e=null===t||void 0===t?void 0:t.onDisconnected((function(){return s({type:"set-cursor"})}));return function(){return e&&e()}}),[t]),c.useEffect((function(){r.current=[],s({type:"reset"})}),[e]);var p=c.useMemo((function(){return Xe()((function(e){var n=Object(E.a)(r.current);r.current=[],s({type:"append",queued:n,hasMore:e})}),100)}),[]),j=a.nodes,h=a.cursor,b=a.loading;return Object(d.useSubscription)(sn,{fetchPolicy:"no-cache",variables:{runId:e,after:h},onSubscriptionData:function(e){var n,t=null===(n=e.subscriptionData.data)||void 0===n?void 0:n.pipelineRunLogs;if(t&&"PipelineRunLogsSubscriptionFailure"!==t.__typename){var i=t.messages,o=t.hasMorePastEvents,c=function(e){var n,t=Object(E.a)(e).reverse(),r=Object(Je.a)(t);try{for(r.s();!(n=r.n()).done;)switch(n.value.__typename){case"PipelineStartEvent":return Ke.j.STARTED;case"PipelineEnqueuedEvent":return Ke.j.QUEUED;case"PipelineStartingEvent":return Ke.j.STARTING;case"PipelineCancelingEvent":return Ke.j.CANCELING;case"PipelineCanceledEvent":return Ke.j.CANCELED;case"PipelineSuccessEvent":return Ke.j.SUCCESS;case"PipelineFailureEvent":return Ke.j.FAILURE}}catch(i){r.e(i)}finally{r.f()}return null}(i);c&&!o&&u(c),r.current=[].concat(Object(E.a)(r.current),Object(E.a)(i)),p(o)}}}),c.useMemo((function(){return null!==j?{allNodes:j,loading:b}:{allNodes:[],loading:b}}),[b,j])},on=function(e){var n=rn(e.runId);return Object(C.jsx)(C.Fragment,{children:e.children(n)})},cn=function(e){var n=e.children,t=e.runId,r=c.useState((function(){return[]})),i=Object(l.a)(r,2),o=i[0],a=i[1],s=c.useState(-1),u=Object(l.a)(s,2),p=u[0],j=u[1],h=Object(d.useQuery)(un,{notifyOnNetworkStatusChange:!0,variables:{runId:t,after:p},pollInterval:5e3,onCompleted:function(e){b();var n=function(){var n=o.length;return"PipelineRun"===(null===e||void 0===e?void 0:e.pipelineRunOrError.__typename)?null===e||void 0===e?void 0:e.pipelineRunOrError.events.map((function(e,t){return Object(H.a)(Object(H.a)({},e),{},{clientsideKey:"csk".concat(n+t)})})):[]}();a((function(e){return[].concat(Object(E.a)(e),Object(E.a)(n))})),j((function(e){return e+n.length}));var t="PipelineRun"===(null===e||void 0===e?void 0:e.pipelineRunOrError.__typename)?null===e||void 0===e?void 0:e.pipelineRunOrError.status:null;t&&t!==Ke.j.FAILURE&&t!==Ke.j.SUCCESS&&t!==Ke.j.CANCELED&&f(5e3)}}),b=h.stopPolling,f=h.startPolling;return Object(C.jsx)(C.Fragment,{children:n(null!==o&&o.length>0?{allNodes:o,loading:!1}:{allNodes:[],loading:!0})})},an=function(e){var n=e.children,t=e.runId,r=c.useContext(Ze.a).availability;return"attempting-to-connect"===r?Object(C.jsx)(C.Fragment,{children:n({allNodes:[],loading:!0})}):"unavailable"===r?Object(C.jsx)(cn,{runId:t,children:n}):Object(C.jsx)(on,{runId:t,children:n})},sn=Object(d.gql)(ue||(ue=Object(s.a)(["\n  subscription PipelineRunLogsSubscription($runId: ID!, $after: Cursor) {\n    pipelineRunLogs(runId: $runId, after: $after) {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          ... on MessageEvent {\n            runId\n          }\n          ...RunPipelineRunEventFragment\n        }\n        hasMorePastEvents\n      }\n      ... on PipelineRunLogsSubscriptionFailure {\n        missingRunId\n        message\n      }\n    }\n  }\n\n  ","\n"])),en.b.RunPipelineRunEventFragment),ln=Object(d.gql)(de||(de=Object(s.a)(["\n  fragment PipelineRunLogsSubscriptionStatusFragment on PipelineRun {\n    id\n    runId\n    status\n    canTerminate\n  }\n"]))),un=Object(d.gql)(pe||(pe=Object(s.a)(["\n  query RunLogsQuery($runId: ID!, $after: Cursor) {\n    pipelineRunOrError(runId: $runId) {\n      ... on PipelineRun {\n        id\n        runId\n        status\n        canTerminate\n        events(after: $after) {\n          ... on MessageEvent {\n            runId\n          }\n          ...RunPipelineRunEventFragment\n          __typename\n        }\n      }\n    }\n  }\n  ","\n"])),en.b.RunPipelineRunEventFragment),dn=t(823),pn=t(1061),jn=t(774),hn=t(78),bn=t(625),fn=u.c.div.withConfig({displayName:"ExecutionStateDot",componentId:"lc1ctj-0"})(["display:inline-block;width:11px;height:11px;border-radius:5.5px;transition:background 200ms linear;background:",";&:hover{background:",";}"],(function(e){var n,t=e.state;return(n={},Object(K.a)(n,bn.b.RUNNING,j.a.GRAY3),Object(K.a)(n,bn.b.SUCCEEDED,j.a.GREEN2),Object(K.a)(n,bn.b.SKIPPED,j.a.GOLD3),Object(K.a)(n,bn.b.FAILED,j.a.RED3),Object(K.a)(n,bn.b.PREPARING,j.a.RED3),Object(K.a)(n,bn.b.RETRY_REQUESTED,j.a.RED3),Object(K.a)(n,bn.b.UNKNOWN,j.a.RED3),n)[t]}),(function(e){var n,t=e.state;return(n={},Object(K.a)(n,bn.b.RUNNING,j.a.GRAY3),Object(K.a)(n,bn.b.SUCCEEDED,j.a.GREEN2),Object(K.a)(n,bn.b.SKIPPED,j.a.GOLD3),Object(K.a)(n,bn.b.FAILED,j.a.RED5),Object(K.a)(n,bn.b.PREPARING,j.a.RED3),Object(K.a)(n,bn.b.RETRY_REQUESTED,j.a.RED3),Object(K.a)(n,bn.b.UNKNOWN,j.a.RED3),n)[t]})),gn=t(706),On=function(e,n){switch(n.type){case"show-popover":return Object(H.a)(Object(H.a)({},e),{},{shown:!0});case"hide-popover":return Object(H.a)(Object(H.a)({},e),{},{shown:!1});case"highlight":return Object(H.a)(Object(H.a)({},e),{},{highlight:n.highlight});case"change-query":return Object(H.a)(Object(H.a)({},e),{},{shown:!0,highlight:0});case"select-suggestion":return Object(H.a)(Object(H.a)({},e),{},{highlight:0});default:return e}},mn={shown:!1,highlight:0},xn={threshold:.3},vn=function(e){var n=e.value,t=e.onChange,r=e.suggestionProviders,i=c.useReducer(On,mn),o=Object(l.a)(i,2),a=o[0],s=o[1],u=a.shown,d=a.highlight,j=c.useMemo((function(){var e=r.reduce((function(e,n){var t=n.values();return Object(H.a)(Object(H.a)({},e),{},Object(K.a)({},n.token,{fuse:new B.a(t,xn),all:t}))}),{}),n=r.map((function(e){return e.token}));return{empty:new B.a(n,xn),perProvider:e}}),[r]),h=j.empty,b=j.perProvider,f=c.useCallback((function(e){if(!e)return Object.keys(b);var n=e.split(":"),t=Object(l.a)(n,2),r=t[0],i=t[1];if(r in b){var o=b[r],c=o.fuse,a=o.all,s=i?c.search(i).map((function(e){return"".concat(r,":").concat(e.item)})):a.map((function(e){return"".concat(r,":").concat(e)}));return s.map((function(e){return e.toLowerCase()})).includes(e)?[]:s}return h.search(e).map((function(e){return e.item}))}),[h,b]),g=W(f,n),O=g.suggestions,m=g.onSelectSuggestion,x=O.length,v=O[d]||null,y=c.useCallback((function(e){s({type:"change-query"}),t(e.target.value)}),[t]),k=c.useCallback((function(e){s({type:"select-suggestion"}),t(m(e))}),[t,m]);return Object(C.jsx)(p.t,{minimal:!0,usePortal:!0,isOpen:u&&O.length>0,position:"bottom-left",content:Object(C.jsx)(Sn,{children:O.map((function(e,n){return Object(C.jsx)(yn,{suggestion:e,isHighlight:d===n,onSelect:k},e)}))}),children:Object(C.jsx)(kn,{type:"text",placeholder:"Filter\u2026",spellCheck:!1,autoCorrect:"off",value:n,onChange:y,onFocus:function(){return s({type:"show-popover"})},onBlur:function(){return s({type:"hide-popover"})},onKeyDown:function(e){var n=e.key;if("Escape"!==n){if(x){var t=x-1;switch(n){case"ArrowUp":e.preventDefault(),s({type:"highlight",highlight:0===d?t:d-1});break;case"ArrowDown":e.preventDefault(),s({type:"highlight",highlight:d===t?0:d+1});break;case"Enter":e.preventDefault(),v&&k(v)}}}else s({type:"hide-popover"})},style:{}})})},yn=function(e){var n=e.suggestion,t=e.isHighlight,r=e.onSelect,i=c.useRef(null);return c.useEffect((function(){i.current&&t&&i.current.scrollIntoView({block:"nearest"})}),[t]),Object(C.jsx)(Cn,{ref:i,isHighlight:t,onMouseDown:function(e){e.preventDefault(),r(n)},children:n})},kn=u.c.input.withConfig({displayName:"LogsFilterInput__FilterInput",componentId:"f1jr70-0"})(["border:1px solid ",";border-radius:3px;padding:4px 6px;font-size:12px;width:300px;"],j.a.GRAY5),Sn=u.c.ul.withConfig({displayName:"LogsFilterInput__Results",componentId:"f1jr70-1"})(["list-style:none;margin:0;max-height:200px;max-width:800px;min-width:300px;overflow-y:auto;padding:0;"]),Cn=u.c.li.withConfig({displayName:"LogsFilterInput__Item",componentId:"f1jr70-2"})(["align-items:center;background-color:",";color:",";cursor:pointer;display:flex;flex-direction:row;font-size:12px;list-style:none;margin:0;padding:4px 8px;white-space:nowrap;text-overflow:ellipsis;&:hover{background-color:",";}"],(function(e){return e.isHighlight?j.a.BLUE3:j.a.WHITE}),(function(e){return e.isHighlight?j.a.WHITE:"default"}),(function(e){return e.isHighlight?j.a.BLUE3:j.a.LIGHT_GRAY3})),wn=M()((function(){return Object.values(Ke.c).sort()})),En=M()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[{token:"step",values:function(){return e}},{token:"type",values:wn},{token:"query",values:function(){return[]}}]}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return JSON.stringify(e)}));!function(e){e.structured="structured",e.stdout="stdout",e.stderr="stderr"}(je||(je={}));var In=function(e){var n=e.steps,t=e.metadata,r=e.filter,i=e.onSetFilter,o=e.logType,c=e.onSetLogType,a=e.computeLogKey,s=e.onSetComputeLogKey,l=e.computeLogUrl;return Object(C.jsxs)(Ln,{children:[Object(C.jsxs)(p.d,{children:[Object(C.jsx)(p.c,{icon:"properties",title:"Structured event logs",active:o===je.structured,onClick:function(){return c(je.structured)}}),Object(C.jsx)(p.c,{icon:"console",title:"Raw compute logs",active:o!==je.structured,onClick:function(){return c(je.stdout)}})]}),Object(C.jsx)(Nn,{}),"structured"===o?Object(C.jsx)(Tn,{filter:r,onSetFilter:i,steps:n}):Object(C.jsx)(_n,{steps:n,metadata:t,logType:o,onSetLogType:c,computeLogKey:a,onSetComputeLogKey:s,computeLogUrl:l})]})},Rn=function(e,n){return n.stepKeys.some((function(n){return e.steps[n].state===bn.b.RUNNING}))?bn.b.RUNNING:n.stepKeys.some((function(n){return e.steps[n].state===bn.b.SKIPPED}))?bn.b.SKIPPED:n.stepKeys.every((function(n){return e.steps[n].state===bn.b.SUCCEEDED}))?bn.b.SUCCEEDED:bn.b.FAILED},_n=function(e){var n,t,r=e.steps,i=e.metadata,o=e.computeLogKey,c=e.onSetComputeLogKey,a=e.logType,s=e.onSetLogType,l=e.computeLogUrl,u=i.logCaptureSteps||Object(bn.e)(Object.keys(i.steps)),d=o&&u[o],h=function(e){if(!e||!u[e])return null;var n=u[e];return 1===n.stepKeys.length&&e===n.stepKeys[0]?e:n.pid?"pid: ".concat(n.pid," (").concat(n.stepKeys.length," steps)"):"".concat(e," (").concat(n.stepKeys.length," steps)")};return Object(C.jsxs)(b.a,{flex:{justifyContent:"space-between",alignItems:"center",direction:"row"},style:{flex:1},children:[Object(C.jsxs)(f.a,{direction:"row",spacing:24,alignItems:"center",children:[Object(C.jsx)(pn.a,{disabled:!r.length,items:Object.keys(u),itemRenderer:function(e,n){return Object(C.jsx)(p.p,{onClick:n.handleClick,text:h(e),active:n.modifiers.active},e)},activeItem:o,filterable:!1,onItemSelect:function(e){c(e)},children:Object(C.jsx)(p.c,{text:h(o)||"Select a step...",disabled:!r.length,rightIcon:"caret-down",style:{minHeight:25}})}),d?Object(C.jsxs)(p.C,{selectedTabId:je[a],children:[Object(C.jsx)(p.B,{id:je[je.stdout],title:Object(C.jsx)(hn.a,{color:a===je.stdout?j.a.BLUE1:{link:j.a.GRAY2,hover:j.a.BLUE1},underline:"never",onClick:function(){return s(je.stdout)},children:"stdout"})}),Object(C.jsx)(p.B,{id:je[je.stderr],title:Object(C.jsx)(hn.a,{color:a===je.stderr?j.a.BLUE1:{link:j.a.GRAY2,hover:j.a.BLUE1},underline:"never",onClick:function(){return s(je.stderr)},children:"stderr"})})]}):null]}),d?Object(C.jsxs)(f.a,{direction:"row",spacing:12,alignItems:"center",children:[o&&u[o]?Rn(i,u[o])===bn.b.RUNNING?Object(C.jsx)(Ue.a,{purpose:"body-text"}):Object(C.jsx)(fn,{state:Rn(i,u[o])}):null,l?Object(C.jsx)("a",{"aria-label":"Download link",className:"bp3-button bp3-minimal bp3-icon-download",href:l,title:o&&1===(null===(n=u[o])||void 0===n?void 0:n.stepKeys.length)?"Download ".concat(null===(t=u[o])||void 0===t?void 0:t.stepKeys[0]," compute logs"):"Download compute logs",download:!0}):null]}):null]})},Tn=function(e){var n,t=e.filter,r=e.onSetFilter,i=e.steps,o=c.useState(we.a.CLIPBOARD),a=Object(l.a)(o,2),s=a[0],u=a[1],d=t.logQuery.map((function(e){var n=e.token,t=e.value;return n?"".concat(n,":").concat(t):t})).join(" "),j=c.useState((function(){return d})),h=Object(l.a)(j,2),b=h[0],f=h[1],g=Object(jn.a)(),O=(null===(n=t.logQuery.find((function(e){return"step"===e.token})))||void 0===n?void 0:n.value)||null,m=t.logQuery.reduce((function(e,n){return e+n.value}),"");c.useEffect((function(){f(d)}),[d]);return c.useEffect((function(){var e;return s===we.a.SAVED&&(e=setTimeout((function(){u(we.a.CLIPBOARD)}),2e3)),function(){e&&clearTimeout(e)}}),[s]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(vn,{value:b,suggestionProviders:En(i),onChange:function(e){var n=e.split(/\s+/).map((function(e){var n=e.split(":");return n.length>1?{token:n[0],value:n[1]}:{value:n[0]}}));r(Object(H.a)(Object(H.a)({},t),{},{logQuery:n})),f(e)}}),m?Object(C.jsx)(Pn,{inline:!0,checked:t.hideNonMatches,onChange:function(e){return r(Object(H.a)(Object(H.a)({},t),{},{hideNonMatches:e.currentTarget.checked}))},children:"Hide non-matches"}):null,Object(C.jsx)(Nn,{}),Object(C.jsx)("div",{style:{display:"flex"},children:Object.keys(gn.b).map((function(e){var n=t.levels[e];return Object(C.jsx)(An,{intent:n?"primary":"none",interactive:!0,minimal:!n,onClick:function(){return r(Object(H.a)(Object(H.a)({},t),{},{levels:Object(H.a)(Object(H.a)({},t.levels),{},Object(K.a)({},e,!n))}))},round:!0,children:e.toLowerCase()},e)}))}),O&&Object(C.jsx)(Nn,{}),Object(C.jsx)("div",{style:{minWidth:15,flex:1}}),Object(C.jsx)("div",{style:{marginRight:"8px"},children:Object(C.jsx)(p.c,{small:!0,icon:s,onClick:function(){g(window.location.href),u(we.a.SAVED)},text:"Copy URL"})})]})},Ln=u.c.div.withConfig({displayName:"LogsToolbar__LogsToolbarContainer",componentId:"sc-3063ey-0"})(["display:flex;flex-direction:row;background:",";align-items:center;padding:4px 8px;border-bottom:1px solid ",";box-shadow:0 1px 3px rgba(0,0,0,0.07);z-index:2;"],j.a.WHITE,j.a.GRAY4),Pn=Object(u.c)(p.e).withConfig({displayName:"LogsToolbar__NonMatchCheckbox",componentId:"sc-3063ey-1"})(["&&&{margin:0 4px 0 12px;}white-space:nowrap;"]),Nn=u.c.div.withConfig({displayName:"LogsToolbar__LogsToolbarDivider",componentId:"sc-3063ey-2"})(["display:inline-block;width:1px;height:30px;margin:0 8px;border-right:1px solid ",";"],j.a.LIGHT_GRAY3),An=Object(u.c)(p.D).withConfig({displayName:"LogsToolbar__FilterTag",componentId:"sc-3063ey-3"})(["margin-right:8px;text-transform:capitalize;opacity:",";"],(function(e){return e.minimal?"0.5":"1"})),Dn=t(81),Fn=t(95),qn=t(708),Un=t(173),Gn=t(86),Kn=t(650),Hn=function(e){var n=e.run,t=e.isFinalStatus,r=c.useState(!1),i=Object(l.a)(r,2),o=i[0],a=i[1],s=c.useCallback((function(){return a(!1)}),[]),u=c.useCallback((function(e){var t=e.errors,r=(null===n||void 0===n?void 0:n.id)&&t[n.id];r&&"message"in r&&Fn.a.show({message:r.message,icon:"error",intent:Dn.a.DANGER})}),[null===n||void 0===n?void 0:n.id]);return n?Object(C.jsxs)(C.Fragment,{children:[t?null:Object(C.jsx)(p.c,{icon:we.a.STOP,small:!0,text:"Terminate",intent:"warning",disabled:o,onClick:function(){return a(!0)}}),Object(C.jsx)(Kn.a,{isOpen:o,onClose:s,onComplete:u,selectedRuns:Object(K.a)({},n.id,n.canTerminate)})]}):null};function Bn(e,n){var t=e.keys.map((function(e){var t;return e&&(null===(t=n.steps[e])||void 0===t?void 0:t.state)||bn.b.PREPARING}));return Object(H.a)(Object(H.a)({},e),{},{present:e.keys.length>0,failed:e.keys.length&&t.includes(bn.b.FAILED),finished:t.every((function(e){return[bn.b.FAILED,bn.b.SUCCEEDED].includes(e)}))})}var Qn=function(e){var n,t=e.metadata,r=e.graph,i=e.onLaunch,o=e.run,c=null===o||void 0===o||null===(n=o.executionPlan)||void 0===n?void 0:n.artifactsPersisted,a=Object(R.c)().canLaunchPipelineReexecution,s=function(e){var n,t,r=Object(qe.a)(e);if(!e)return null;if("UnknownPipeline"===(null===e||void 0===e?void 0:e.pipeline.__typename))return{icon:we.a.ERROR,tooltip:'"'.concat(e.pipeline.name,'" could not be found.'),disabled:!0};if(r){var i=r.type;return"origin-and-snapshot"===i?null:"origin-only"===i?{icon:we.a.WARNING_SIGN,tooltip:'The pipeline "'.concat(e.pipeline.name,'" may be a different version from the original pipeline run.'),disabled:!1}:"snapshot-only"===i?{icon:we.a.WARNING_SIGN,tooltip:Object(C.jsxs)(f.a,{direction:"column",spacing:4,children:[Object(C.jsx)("div",{children:'The pipeline "'.concat(e.pipeline.name,'" is not in the same repository as the original pipeline run.')}),e.repositoryOrigin?Object(C.jsxs)("div",{children:["Original repository:"," ",Object(C.jsxs)("strong",{children:[e.repositoryOrigin.repositoryName,"@",e.repositoryOrigin.repositoryLocationName]})]}):null]}),disabled:!1}:{icon:we.a.WARNING_SIGN,tooltip:'The pipeline "'.concat(e.pipeline.name,'" may be a different version from the original pipeline run.'),disabled:!1}}var o=null===(n=e.repositoryOrigin)||void 0===n?void 0:n.repositoryName,c=null===(t=e.repositoryOrigin)||void 0===t?void 0:t.repositoryLocationName,a=Object(C.jsxs)(f.a,{direction:"column",spacing:8,children:[Object(C.jsx)("div",{children:'"'.concat(e.pipeline.name,'" is not available in the current workspace.')}),o&&c?Object(C.jsx)("div",{children:"Load repository ".concat(Object(Re.b)(o,c)," and try again.")}):null]});return{icon:we.a.ERROR,tooltip:a,disabled:!0}}(o),l=Bn(e.selection,t),u=function(e,n,t){var r=e.tags.find((function(e){return e.key===Gn.a.StepSelection}));return r?Bn({keys:Object(Le.a)(n,r.value).all.map((function(e){return e.name})),query:r.value},t):null}(o,r,t),d=!!Un.b.has(o.status),p=o.executionPlan&&(o.status===Ke.j.FAILURE||o.status===Ke.j.CANCELED),j={icon:"repeat",scope:"*",title:"All Steps in Root Run",tooltip:"Re-execute the pipeline run from scratch",disabled:!d,onClick:function(){return i({type:"all"})}},h={icon:"select",scope:(null===u||void 0===u?void 0:u.query)||"*",title:"Same Steps",disabled:!u||!(u.finished||u.failed),tooltip:Object(C.jsxs)("div",{children:[u&&u.present?u.finished?"Re-execute the same step subset used for this run:":"Wait for all of the steps to finish to re-execute the same subset.":"Re-executes the same step subset used for this run if one was present.",Object(C.jsx)(Mn,{selection:u})]}),onClick:function(){return i({type:"selection",selection:u})}},g={icon:"select",scope:l.query,title:l.keys.length>1?"Selected Steps":"Selected Step",disabled:!l.present||!(l.finished||l.failed),tooltip:Object(C.jsxs)("div",{children:[l.present?l.finished?"Re-execute the selected steps with existing configuration:":"Wait for the steps to finish to re-execute them.":"Select a step or type a step subset to re-execute.",Object(C.jsx)(Mn,{selection:l})]}),onClick:function(){return i({type:"selection",selection:l})}},O={icon:"inheritance",title:"From Selected",disabled:!d||1!==l.keys.length,tooltip:"Re-execute the pipeline downstream from the selected steps",onClick:function(){if(!o.executionPlan)return console.warn("Run execution plan must be present to launch from-selected execution"),Promise.resolve();var e=l.keys.map((function(e){return"".concat(e,"*")})).join(","),n=Object(Le.a)(r,e).all.map((function(e){return e.name}));return i({type:"selection",selection:{keys:n,query:e}})}},m={icon:"redo",title:"From Failure",disabled:!p,tooltip:p?"Retry the pipeline run, skipping steps that completed successfully":"Retry is only enabled when the pipeline has failed.",onClick:function(){return i({type:"from-failure"})}};c||[g,h,m,O].forEach((function(e){e.disabled=!0,e.title="Retry and re-execute are only enabled on persistent storage. Try rerunning with a different storage configuration."}));var x=[j,h,g,O,m],v=l.present?g:(null===u||void 0===u?void 0:u.present)?h:null,y=c&&v?v:j;return Object(C.jsxs)(f.a,{direction:"row",spacing:8,children:[Object(C.jsx)(b.a,{flex:{direction:"row"},children:Object(C.jsx)(qn.b,{runCount:1,small:!0,primary:y,options:x,title:"*"===y.scope?"Re-execute All (*)":"Re-execute (".concat(y.scope,")"),tooltip:(null===s||void 0===s?void 0:s.tooltip)?null===s||void 0===s?void 0:s.tooltip:a?void 0:R.a,icon:null===s||void 0===s?void 0:s.icon,disabled:(null===s||void 0===s?void 0:s.disabled)||!a})}),Object(C.jsx)(Hn,{run:o,isFinalStatus:d})]})};var Mn=function(e){var n=e.selection;return Object(C.jsx)("div",{style:{paddingLeft:"10px"},children:((null===n||void 0===n?void 0:n.keys)||[]).map((function(e){return Object(C.jsx)("span",{style:{display:"block"},children:"* ".concat(e)},e)}))})},Wn=c.createContext(undefined),$n=t(171),zn=t(638),Yn="|";function Jn(e){return e.sort().map((function(e){return e.toLowerCase()})).join(Yn)}var Vn,Xn={steps:"*",logs:"",levels:Jn(gn.a),hideNonMatches:"true",focusedTime:""},Zn=function(e){var n=e.logs.split(Yn),t=e.focusedTime&&!e.logs?Number(e.focusedTime):null,r="true"===e.hideNonMatches,i=En();return{sinceTime:0,focusedTime:t,hideNonMatches:r,logQuery:n.map((function(e){return Object(zn.c)(e,i)})),levels:e.levels.split(Yn).map((function(e){return e.toUpperCase()})).filter((function(e){return gn.b.hasOwnProperty(e)})).reduce((function(e,n){return Object(H.a)(Object(H.a)({},e),{},Object(K.a)({},n,!0))}),{})}};function et(e){var n=e.logQuery.map((function(e){return e.token?"".concat(e.token,":").concat(e.value):e.value}));return{hideNonMatches:e.hideNonMatches?"true":"false",focusedTime:e.focusedTime||"",logs:n.join(Yn),levels:Jn(Object.keys(e.levels).filter((function(n){return!!e.levels[n]})))}}var nt=document.querySelector("link[rel*='icon']")||document.createElement("link");nt.type="image/x-icon",nt.rel="shortcut icon",document.getElementsByTagName("head")[0].appendChild(nt);var tt,rt,it,ot,ct,at,st,lt,ut,dt,pt,jt,ht,bt,ft,gt,Ot=(Vn={},Object(K.a)(Vn,Ke.j.FAILURE,"/favicon_failed.ico"),Object(K.a)(Vn,Ke.j.CANCELED,"/favicon_failed.ico"),Object(K.a)(Vn,Ke.j.STARTED,"/favicon_pending.ico"),Object(K.a)(Vn,Ke.j.NOT_STARTED,"/favicon_pending.ico"),Object(K.a)(Vn,Ke.j.STARTING,"/favicon_pending.ico"),Object(K.a)(Vn,Ke.j.CANCELING,"/favicon_pending.ico"),Object(K.a)(Vn,Ke.j.QUEUED,"/favicon_pending.ico"),Object(K.a)(Vn,Ke.j.SUCCESS,"/favicon_success.ico"),Vn),mt=function(e){var n=e.run,t=e.runId,r=Object(De.a)({encode:et,decode:Zn,defaults:Xn}),i=Object(l.a)(r,2),o=i[0],a=i[1],s=Object(De.a)({queryKey:"selection",defaults:{selection:""}}),u=Object(l.a)(s,2),d=u[0],p=u[1];!function(e){var n=c.useContext(_e.a).basePath,t=e?Ot[e]:"/favicon.ico",r="".concat(n).concat(t);c.useEffect((function(){return nt.href=r,function(){nt.href="/favicon.ico"}}),[r])}(null===n||void 0===n?void 0:n.status),Object(y.a)(n?"".concat(n.pipeline.name," ").concat(t," [").concat(n.status,"]"):"Run: ".concat(t));var j=function(e,n){var t=n.find((function(n){return"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e}));t&&Object(Te.b)({body:Object(C.jsx)(_.b,{error:t})})},h=function(e){p(e),a(Object(H.a)(Object(H.a)({},o),{},{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))};return Object(C.jsx)(Wn.Provider,{value:n,children:Object(C.jsx)(an,{runId:t,children:function(e){return Object(C.jsx)(bn.d,{logs:e.allNodes,children:function(r){return Object(C.jsx)(xt,{run:n,runId:t,logs:e,logsFilter:o,metadata:r,selectionQuery:d,onSetLogsFilter:a,onSetSelectionQuery:h,onShowStateDetails:j})}})}},t)})},xt=function(e){var n=e.run,t=e.runId,r=e.logs,i=e.logsFilter,o=e.metadata,a=e.selectionQuery,s=e.onSetLogsFilter,u=e.onSetSelectionQuery,j=Object(d.useMutation)($n.c),h=Object(l.a)(j,1)[0],b=Object(qe.a)(n),f=c.createRef(),g=c.useContext(_e.a).basePath,O=Object(De.a)({queryKey:"logType",defaults:{logType:"structured"}}),m=Object(l.a)(O,2),x=m[0],v=m[1],y=Object(De.a)({queryKey:"logKey"}),k=Object(l.a)(y,2),S=k[0],w=k[1],I=function(e){switch(e){case"stdout":return je.stdout;case"stderr":return je.stderr;default:return je.structured}}(x),R=c.useState(null),_=Object(l.a)(R,2),T=_[0],L=_[1],P=JSON.stringify(Object.keys(o.steps).sort()),N=c.useMemo((function(){return JSON.parse(P)}),[P]),F=(null===n||void 0===n?void 0:n.executionPlan)&&Object(Ae.b)(null===n||void 0===n?void 0:n.executionPlan,o.steps),q=c.useMemo((function(){return F&&a&&"*"!==a?Object(Le.a)(F,a).all.map((function(e){return e.name})):[]}),[F,a]);c.useEffect((function(){if((null===N||void 0===N?void 0:N.length)&&!S)if(o.logCaptureSteps){var e=Object.keys(o.logCaptureSteps),n=e.find((function(e){return q.every((function(n){return o.logCaptureSteps&&o.logCaptureSteps[e].stepKeys.includes(n)}))}));w(n||e[0])}else N.includes(S)?1===q.length&&S!==q[0]&&w(q[0]):w(1===q.length?q[0]:N[0])}),[N,S,q,o.logCaptureSteps,w]);var U=F?i.logQuery.filter((function(e){return e.token&&"query"===e.token})).reduce((function(e,n){return[].concat(Object(E.a)(e),Object(E.a)(Object(Le.a)(F,n.value).all.map((function(e){return e.name}))))}),[]):[],G=function(){var e=Object(D.a)(A.a.mark((function e(t){var r,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&"UnknownPipeline"!==n.pipeline.__typename&&b){e.next=2;break}return e.abrupt("return");case 2:return r=Object($n.i)({run:n,style:t,repositoryLocationName:b.match.repositoryLocation.name,repositoryName:b.match.repository.name}),e.prev=3,e.next=6,h({variables:r});case 6:i=e.sent,Object($n.j)(g,n.pipeline.name,i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Object(Pe.a)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(n){return e.apply(this,arguments)}}(),K=function(e,n){var t,r=q.indexOf(e);n.shiftKey?(t=Object(E.a)(q),-1!==r?t.splice(r,1):t.push(e)):t=1===q.length&&-1!==r?[]:[e],u(t.join(", ")||"*")};return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(Fe.c,{ref:f,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:40,first:function(e){return r.loading?Object(C.jsx)(Ne.b,{runId:t}):"QUEUED"===(null===n||void 0===n?void 0:n.status)?Object(C.jsx)(Ne.d,{runId:t}):(null===n||void 0===n?void 0:n.executionPlan)&&F?Object(C.jsx)(Ne.a,{options:{mode:Ne.c.WATERFALL_TIMED},toolbarLeftActions:Object(C.jsx)(Fe.a,{axis:"vertical",container:f}),toolbarActions:Object(C.jsx)(Qn,{run:n,onLaunch:G,graph:F,metadata:e,selection:{query:a,keys:q}}),runId:t,graph:F,metadata:e,selection:{query:a,keys:q},onClickStep:K,onSetSelection:u,focusedTime:i.focusedTime}):Object(C.jsx)(p.r,{icon:we.a.ERROR,title:"Unable to build execution plan"})}(o),second:Object(C.jsxs)(vt,{children:[Object(C.jsx)(In,{logType:I,onSetLogType:function(e){return v(je[e])},filter:i,onSetFilter:s,steps:N,metadata:o,computeLogKey:S,onSetComputeLogKey:function(e){w(e)},computeLogUrl:T}),I!==je.structured?Object(C.jsx)(ze,{runId:t,stepKeys:N,computeLogKey:S,ioType:je[I],setComputeLogUrl:L}):Object(C.jsx)(dn.b,{logs:r,filter:i,filterStepKeys:U,filterKey:"".concat(JSON.stringify(i)),metadata:o})]})})})},vt=u.c.div.withConfig({displayName:"Run__LogsContainer",componentId:"sc-1lo578t-0"})(["display:flex;flex-direction:column;height:100%;background:#f1f6f9;"]),yt=t(188),kt=t(697),St=function(e){var n=e.match.params.runId,t=Object(d.useQuery)(wt,{fetchPolicy:"cache-and-network",partialRefetch:!0,variables:{runId:n}}),r=t.data,i=t.loading,o="PipelineRun"===(null===r||void 0===r?void 0:r.pipelineRunOrError.__typename)?r.pipelineRunOrError:null,a=null===o||void 0===o?void 0:o.pipelineSnapshotId,s=c.useMemo((function(){var e=null===o||void 0===o?void 0:o.repositoryOrigin;if(e){var n=e.repositoryLocationName,t=e.repositoryName;return Object(Re.a)(t,n)}return null}),[o]);return Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[Object(C.jsx)(b.a,{background:j.a.WHITE,padding:{top:16,bottom:12,horizontal:20},border:{side:"bottom",width:1,color:j.a.LIGHT_GRAY3},flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:Object(C.jsx)(x.a,{title:Object(C.jsxs)(f.a,{direction:"row",spacing:12,alignItems:"flex-end",children:[Object(C.jsx)(v.d,{style:{fontFamily:Ie.a.monospace},children:n.slice(0,8)}),i||!o?null:Object(C.jsx)("div",{style:{position:"relative",top:"-2px"},children:Object(C.jsx)(kt.a,{status:o.status})})]}),icon:"history",description:Object(C.jsxs)(f.a,{direction:"row",spacing:4,alignItems:"baseline",children:[Object(C.jsx)(h.b,{to:"/instance/runs",children:"Run"}),Object(C.jsx)("span",{children:"of "}),o?Object(C.jsx)(Ee.a,{pipelineName:null===o||void 0===o?void 0:o.pipeline.name,pipelineHrefContext:s||"repo-unknown",snapshotId:a,mode:null===o||void 0===o?void 0:o.mode}):Object(C.jsx)("span",{children:"\u2026"})]}),metadata:o?Object(C.jsx)(yt.c,{run:o,loading:i}):null,right:o?Object(C.jsx)(yt.b,{run:o}):null})}),Object(C.jsx)(Ct,{data:r,runId:n})]})},Ct=function(e){var n=e.data,t=e.runId;return Object(y.a)("Run: ".concat(t)),n&&n.pipelineRunOrError?"PipelineRun"!==n.pipelineRunOrError.__typename?Object(C.jsx)(p.r,{icon:we.a.SEND_TO_GRAPH,title:"No Run",description:"The run with this ID does not exist or has been cleaned up."}):Object(C.jsx)(mt,{run:n.pipelineRunOrError,runId:t}):Object(C.jsx)(mt,{run:void 0,runId:t})},wt=Object(d.gql)(tt||(tt=Object(s.a)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      __typename\n      ... on PipelineRun {\n        id\n        pipeline {\n          __typename\n          ... on PipelineReference {\n            name\n            solidSelection\n          }\n        }\n        ...RunFragment\n      }\n    }\n  }\n\n  ","\n"])),en.b.RunFragment),Et=t(646),It=t.n(Et),Rt=t(46),_t=t(621),Tt=t(673),Lt=t(204),Pt=t(651),Nt=t(652),At=t(779),Dt=t(634),Ft=function(){var e=Object(d.useQuery)(qt,{fetchPolicy:"cache-and-network",pollInterval:Dt.a,partialRefetch:!0});return Object(C.jsx)(O.a,{queryResult:e,children:function(e){var n=e.repositoriesOrError,t=e.instance,r=e.scheduler;if("PythonError"===n.__typename){var i=n.message;return Object(C.jsx)(_t.a,{intent:"warning",title:Object(C.jsxs)(f.a,{direction:"row",spacing:4,children:[Object(C.jsx)("div",{children:"Could not load scheduled ticks."}),Object(C.jsx)(hn.a,{color:j.a.BLUE3,underline:"always",onClick:function(){Object(Te.b)({title:"Python error",body:i})},children:"View error"})]})})}return Object(C.jsxs)(f.a,{direction:"column",spacing:16,children:[Object(C.jsx)(Nt.b,{schedulerOrError:r,daemonHealth:t.daemonHealth}),Object(C.jsx)(At.a,{repos:n.nodes})]})}})},qt=Object(d.gql)(rt||(rt=Object(s.a)(["\n  query SchedulerInfoQuery {\n    scheduler {\n      ...SchedulerFragment\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      ... on RepositoryConnection {\n        nodes {\n          __typename\n          id\n          ... on Repository {\n            ...RepositorySchedulesFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),Nt.a,Lt.a,Pt.a,_.a),Ut=t(654),Gt=t(709),Kt=function(){var e,n,t,r,i,o;Object(y.a)("Runs");var a=Object(Gt.c)(),s=Object(l.a)(a,2),u=s[0],d=s[1],g=Object(Gt.b)(u),k=c.useState(!1),S=Object(l.a)(k,2),w=S[0],I=S[1],R=Object(Rt.e)().flagPipelineModeTuples,_=Object(Dt.b)({nextCursorForResult:function(e){var n;if("PipelineRuns"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.runId},getResultArray:function(e){return e&&"PipelineRuns"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]},variables:{filter:g,queuedFilter:Object(H.a)(Object(H.a)({},g),{},{statuses:Array.from(Un.e)}),inProgressFilter:Object(H.a)(Object(H.a)({},g),{},{statuses:Array.from(Un.d)})},query:Bt,pageSize:25}),L=_.queryResult,P=_.paginationProps,N=function(e){var n=u.filter((function(e){return"status"!==e.token})),t=e.map((function(e){return{token:"status",value:e}}));d([].concat(Object(E.a)(t),Object(E.a)(n))),I(!1)},A=w?"scheduled":function(e){var n=new Set(e.filter((function(e){return"status"===e.token})).map((function(e){return e.value})));return It()(Un.e,n)?"queued":It()(Un.d,n)?"in-progress":It()(Un.b,n)?"done":"all"}(u),D=function(e){return A===e?j.a.BLUE1:{link:j.a.GRAY2,hover:j.a.BLUE1}},F=R?["status","tag","snapshotId","id","job"]:["status","tag","snapshotId","id","pipeline"];return Object(C.jsx)(m.a,{style:{height:"100%"},children:Object(C.jsxs)(f.a,{direction:"column",spacing:8,children:[Object(C.jsx)(x.a,{title:Object(C.jsx)(v.d,{children:"Runs"})}),Object(C.jsxs)(b.a,{border:{side:"bottom",width:1,color:j.a.LIGHT_GRAY3},flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[Object(C.jsxs)(p.C,{selectedTabId:A,id:"run-tabs",children:[Object(C.jsx)(p.B,{title:Object(C.jsx)(Wt,{color:D("all"),underline:"never",onClick:function(){return N([])},children:"All runs"}),id:"all"}),Object(C.jsx)(p.B,{title:Object(C.jsx)(Wt,{color:D("queued"),underline:"never",onClick:function(){return N(Array.from(Un.e))},children:Object(C.jsxs)(f.a,{direction:"row",spacing:4,alignItems:"center",children:[Object(C.jsx)("div",{children:"Queued"}),Object(C.jsx)($t,{loading:L.loading&&!L.data,fragment:"PipelineRuns"===(null===(e=L.data)||void 0===e||null===(n=e.queuedCount)||void 0===n?void 0:n.__typename)?null===(t=L.data)||void 0===t?void 0:t.queuedCount:void 0})]})}),id:"queued"}),Object(C.jsx)(p.B,{title:Object(C.jsx)(Wt,{color:D("in-progress"),underline:"never",onClick:function(){return N(Array.from(Un.d))},children:Object(C.jsxs)(f.a,{direction:"row",spacing:4,alignItems:"center",children:[Object(C.jsx)("div",{children:"In progress"}),Object(C.jsx)($t,{loading:L.loading&&!L.data,fragment:"PipelineRuns"===(null===(r=L.data)||void 0===r||null===(i=r.inProgressCount)||void 0===i?void 0:i.__typename)?null===(o=L.data)||void 0===o?void 0:o.inProgressCount:void 0})]})}),id:"in-progress"}),Object(C.jsx)(p.B,{title:Object(C.jsx)(Wt,{color:D("done"),underline:"never",onClick:function(){return N(Array.from(Un.b))},children:"Done"}),id:"done"}),Object(C.jsx)("div",{style:{display:"flex",alignSelf:"stretch"},children:Object(C.jsx)(p.i,{style:{margin:"6px 0px"}})}),Object(C.jsx)(p.B,{title:Object(C.jsx)(Wt,{color:D("scheduled"),underline:"never",onClick:function(){return I(!0)},children:"Scheduled"}),id:"scheduled"})]}),Object(C.jsx)(b.a,{padding:{bottom:8},children:Object(C.jsx)(T.a,{pollInterval:Dt.a,queryResult:L})})]}),w?null:Object(C.jsx)(Gt.a,{tokens:u,onChange:d,loading:L.loading,enabledFilters:F}),"queued"===A?Object(C.jsxs)(f.a,{direction:"column",spacing:8,children:[Object(C.jsx)(_t.a,{intent:"info",title:Object(C.jsx)(h.b,{to:"/instance/config#run_coordinator",children:"View queue configuration"})}),Object(C.jsx)(Qt,{})]}):null,Object(C.jsx)($n.g.Provider,{value:{refetch:L.refetch},children:Object(C.jsx)(O.a,{queryResult:L,allowStaleData:!0,children:function(e){var n=e.pipelineRunsOrError;return"PipelineRuns"!==n.__typename?Object(C.jsx)(p.r,{icon:we.a.ERROR,title:"Query Error",description:n.message}):w?Object(C.jsx)(b.a,{margin:{top:4},children:Object(C.jsx)(Ft,{})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Ut.b,{runs:n.results.slice(0,25),onSetFilter:d}),n.results.length>0?Object(C.jsx)("div",{style:{marginTop:"16px"},children:Object(C.jsx)(Tt.b,Object(H.a)({},P))}):null]})}})})]})})},Ht=Object(d.gql)(it||(it=Object(s.a)(["\n  fragment CountFragment on PipelineRuns {\n    count\n  }\n"]))),Bt=Object(d.gql)(ot||(ot=Object(s.a)(["\n  query RunsRootQuery(\n    $limit: Int\n    $cursor: String\n    $filter: PipelineRunsFilter!\n    $queuedFilter: PipelineRunsFilter!\n    $inProgressFilter: PipelineRunsFilter!\n  ) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n    }\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ...CountFragment\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ...CountFragment\n    }\n  }\n\n  ","\n  ","\n"])),Ut.a,Ht),Qt=function(){var e=Object(d.useQuery)(Mt).data,n=null===e||void 0===e?void 0:e.instance.daemonHealth.daemonStatus;return(null===n||void 0===n?void 0:n.required)&&!(null===n||void 0===n?void 0:n.healthy)?Object(C.jsx)(_t.a,{intent:"warning",title:"The queued run coordinator is not healthy.",description:Object(C.jsxs)("div",{children:["View ",Object(C.jsx)(h.b,{to:"/instance/health",children:"Instance status"})," for details."]})}):null},Mt=Object(d.gql)(ct||(ct=Object(s.a)(['\n  query QueueDaemonStatusQuery {\n    instance {\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "QUEUED_RUN_COORDINATOR") {\n          id\n          daemonType\n          healthy\n          required\n        }\n      }\n    }\n  }\n']))),Wt=Object(u.c)(hn.a).withConfig({displayName:"RunsRoot__TabButton",componentId:"sc-1rhtxos-0"})(["line-height:34px;"]),$t=function(e){var n=e.loading,t=e.fragment;return n?Object(C.jsx)(zt,{minimal:!0,intent:"none",children:"\u2013"}):"number"===typeof(null===t||void 0===t?void 0:t.count)?Object(C.jsx)(zt,{minimal:!0,intent:"none",children:t.count}):null},zt=Object(u.c)(p.D).withConfig({displayName:"RunsRoot__CountTagStyled",componentId:"sc-1rhtxos-1"})(["min-width:24px;"]),Yt=t(710),Jt=t(172),Vt=t(808),Xt=t(51),Zt=t(35),er=Object(d.gql)(at||(at=Object(s.a)(["\n  query SnapshotQuery($snapshotId: String!) {\n    pipelineSnapshotOrError(snapshotId: $snapshotId) {\n      ... on PipelineSnapshot {\n        id\n        parentSnapshotId\n      }\n    }\n  }\n"]))),nr=function(e){var n,t=e.activeTab,r=void 0===t?"":t,i=e.explorerPath,o=i.pipelineName,c=i.snapshotId,a=Object(Jt.c)(Object(H.a)(Object(H.a)({},i),{},{pathSolids:[]})),s=Object(Xt.f)(o),l=null===s||void 0===s?void 0:s.pipelineSnapshotId,u=Object(d.useQuery)(er,{variables:{snapshotId:c}}),g=u.data,O=u.loading,m=[{text:"Definition",pathComponent:"",href:"/instance/snapshots/".concat(a)},{text:"Runs",pathComponent:"runs",href:"/instance/snapshots/".concat(a,"runs")}];return Object(C.jsxs)(f.a,{direction:"column",spacing:12,padding:{top:20,horizontal:20},children:[Object(C.jsx)(x.a,{title:Object(C.jsxs)(f.a,{direction:"row",spacing:12,alignItems:"flex-end",children:[Object(C.jsx)(v.d,{style:{fontFamily:Ie.a.monospace},children:null===(n=i.snapshotId)||void 0===n?void 0:n.slice(0,8)}),function(){var e;return O?Object(C.jsx)(p.D,{intent:"none",minimal:!0,children:"..."}):!l||l!==c&&"PipelineSnapshot"===(null===g||void 0===g?void 0:g.pipelineSnapshotOrError.__typename)&&(null===g||void 0===g||null===(e=g.pipelineSnapshotOrError)||void 0===e?void 0:e.parentSnapshotId)!==l?Object(C.jsx)(p.D,{intent:"warning",minimal:!0,children:"Snapshot"}):Object(C.jsx)(p.D,{intent:"success",minimal:!0,children:"Current"})}()]}),icon:"schema",description:Object(C.jsxs)("span",{children:["Snapshot of"," ",Object(C.jsx)(h.b,{to:Object(Zt.d)(i.pipelineName,i.pipelineMode),children:i.pipelineName})]})}),Object(C.jsx)(b.a,{border:{side:"bottom",width:1,color:j.a.LIGHT_GRAY3},children:Object(C.jsx)(p.C,{large:!1,selectedTabId:r,children:m.map((function(e){var n=e.href,t=e.text,r=e.pathComponent;return Object(C.jsx)(p.B,{id:r,title:Object(C.jsx)(h.b,{to:n,children:t})},t)}))})})]})},tr=function(e){var n=e.match.params,t=n.pipelinePath,r=n.tab,i=Object(Jt.b)(t);return Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[Object(C.jsx)(nr,{activeTab:r,explorerPath:i}),Object(C.jsxs)(a.e,{children:[Object(C.jsx)(a.c,{path:"/instance/snapshots/:pipelinePath/runs",render:function(e){return Object(C.jsx)(Vt.a,{pipelinePath:e.match.params.pipelinePath})}}),Object(C.jsx)(a.c,{path:"/instance/snapshots/(/?.*)",component:Yt.c})]})]})},rr=t(809),ir=t(629),or=t.n(ir),cr=t(107),ar=function(e){var n=e.backfill,t=e.onClose,r=e.onComplete,i=Object(d.useMutation)(sr),o=Object(l.a)(i,1)[0],a=c.useState(!1),s=Object(l.a)(a,2),u=s[0],j=s[1];if(!n)return null;var h=(n.numTotal||0)-(n.numRequested||0),b=n.runs.filter((function(e){return!Un.b.has(null===e||void 0===e?void 0:e.status)&&e.canTerminate})),f=n.runs.filter((function(e){return!Un.b.has(null===e||void 0===e?void 0:e.status)})).reduce((function(e,n){return Object(H.a)(Object(H.a)({},e),{},Object(K.a)({},n.id,n.canTerminate))}),{}),g=function(){var e=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,o({variables:{backfillId:n.backfillId}});case 3:r(),j(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(p.h,{isOpen:!!n&&n.status!==Ke.a.CANCELED&&!!h,title:"Cancel backfill",onClose:t,children:[Object(C.jsx)("div",{className:F.a.DIALOG_BODY,children:Object(C.jsxs)("div",{children:["There ",1===h?"is 1 partition ":"are ".concat(h," partitions "),"yet to be queued or launched."]})}),Object(C.jsx)("div",{className:F.a.DIALOG_FOOTER,children:Object(C.jsxs)("div",{className:F.a.DIALOG_FOOTER_ACTIONS,children:[Object(C.jsx)(p.c,{intent:"none",onClick:t,children:"Close"}),u?Object(C.jsx)(p.c,{intent:"danger",disabled:!0,children:"Canceling..."}):Object(C.jsx)(p.c,{intent:"danger",onClick:g,children:"Cancel backfill"})]})})]}),Object(C.jsx)(Kn.a,{isOpen:!!n&&(!h||"REQUESTED"!==n.status)&&!!b.length,onClose:t,onComplete:r,selectedRuns:f})]})},sr=Object(d.gql)(st||(st=Object(s.a)(["\n  mutation CancelBackfill($backfillId: String!) {\n    cancelPartitionBackfill(backfillId: $backfillId) {\n      __typename\n      ... on CancelBackfillSuccess {\n        backfillId\n      }\n      ... on PythonError {\n        message\n      }\n    }\n  }\n"]))),lr=function(e){var n=e.queryData,t=e.tab;return Object(C.jsxs)(b.a,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},border:{side:"bottom",width:1,color:j.a.LIGHT_GRAY3},children:[Object(C.jsxs)(p.C,{selectedTabId:t,children:[Object(C.jsx)(p.B,{id:"health",title:Object(C.jsx)(h.b,{to:"/instance/health",children:"Health"})}),Object(C.jsx)(p.B,{id:"schedules",title:Object(C.jsx)(h.b,{to:"/instance/schedules",children:"Schedules"})}),Object(C.jsx)(p.B,{id:"sensors",title:Object(C.jsx)(h.b,{to:"/instance/sensors",children:"Sensors"})}),Object(C.jsx)(p.B,{id:"backfills",title:Object(C.jsx)(h.b,{to:"/instance/backfills",children:"Backfills"})}),Object(C.jsx)(p.B,{id:"config",title:Object(C.jsx)(h.b,{to:"/instance/config",children:"Configuration"})})]}),n?Object(C.jsx)(b.a,{padding:{bottom:8},children:Object(C.jsx)(T.a,{pollInterval:15e3,queryResult:n})}):null]})},ur=function(){var e=Object(d.useQuery)(dr),n=Object(Dt.b)({query:mr,variables:{},pageSize:25,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[24])||void 0===n?void 0:n.backfillId:void 0},getResultArray:function(e){return"PartitionBackfills"===(null===e||void 0===e?void 0:e.partitionBackfillsOrError.__typename)?e.partitionBackfillsOrError.results:[]}}),t=n.queryResult,r=n.paginationProps;return Object(y.a)("Backfills"),Object(C.jsxs)(f.a,{direction:"column",spacing:20,children:[Object(C.jsx)(lr,{tab:"backfills"}),Object(C.jsx)(O.a,{queryResult:t,allowStaleData:!0,children:function(n){var i,o=n.partitionBackfillsOrError;if("PythonError"===o.__typename)return Object(C.jsx)(_.b,{error:o});if(!o.results.length)return Object(C.jsx)(p.r,{icon:"multi-select",title:"No backfills found",description:Object(C.jsx)("p",{children:"This instance does not have any backfill jobs."})});var c=((null===(i=e.data)||void 0===i?void 0:i.instance.daemonHealth.allDaemonStatuses)||[]).filter((function(e){return"BACKFILL"===e.daemonType})).map((function(e){return e.required&&e.healthy})),a=c.length&&c.every((function(e){return e}));return Object(C.jsxs)(C.Fragment,{children:[a?null:Object(C.jsx)(b.a,{margin:{bottom:8},children:Object(C.jsx)(_t.a,{intent:"warning",title:"The backfill daemon is not running.",description:Object(C.jsxs)("div",{children:["See the"," ",Object(C.jsx)("a",{href:"https://docs.dagster.io/overview/daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}),Object(C.jsx)(pr,{backfills:o.results.slice(0,25),refetch:t.refetch}),o.results.length>0?Object(C.jsx)("div",{style:{marginTop:"16px"},children:Object(C.jsx)(Tt.b,Object(H.a)({},r))}):null]})}})]})},dr=Object(d.gql)(lt||(lt=Object(s.a)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"])),Lt.a),pr=function(e){var n=e.backfills,t=e.refetch,r=c.useState(),i=Object(l.a)(r,2),o=i[0],a=i[1],s=Object(d.useMutation)(xr),u=Object(l.a)(s,1)[0],p=c.useState(),h=Object(l.a)(p,2),b=h[0],g=h[1],O=Object(R.c)().canCancelPartitionBackfill,m=null===o||void 0===o?void 0:o.backfillId;c.useEffect((function(){if(O&&m){var e=n.filter((function(e){return e.backfillId===m})),t=Object(l.a)(e,1)[0];a(t)}}),[n,m,O]);var x=function(){var e=Object(D.a)(A.a.mark((function e(n){var r,i,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({variables:{backfillId:n.backfillId}});case 2:r=e.sent,(i=r.data)&&"ResumeBackfillSuccess"===i.resumePartitionBackfill.__typename?t():i&&"UnauthorizedError"===i.resumePartitionBackfill.__typename?Fn.a.show({message:Object(C.jsx)(f.a,{direction:"column",spacing:4,children:Object(C.jsx)("div",{children:"Attempted to retry the backfill in read-only mode. This backfill was not retried."})}),icon:"error",intent:Dn.a.DANGER}):(o=i.resumePartitionBackfill,Fn.a.show({message:Object(C.jsxs)(f.a,{direction:"column",spacing:4,children:[Object(C.jsx)("div",{children:"An unexpected error occurred. This backfill was not retried."}),Object(C.jsx)(hn.a,{color:j.a.WHITE,underline:"always",onClick:function(){Object(Te.b)({body:Object(C.jsx)(_.b,{error:o})})},children:"View error"})]}),icon:"error",intent:Dn.a.DANGER}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=null===b||void 0===b?void 0:b.runs.filter((function(e){return!Un.b.has(null===e||void 0===e?void 0:e.status)&&e.canTerminate})),y=(null===b||void 0===b?void 0:b.runs.filter((function(e){return!Un.b.has(null===e||void 0===e?void 0:e.status)})).reduce((function(e,n){return Object(H.a)(Object(H.a)({},e),{},Object(K.a)({},n.id,n.canTerminate))}),{}))||{};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(L.a,{children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{style:{width:"120px"},children:"Backfill Id"}),Object(C.jsx)("th",{children:"Partition Set"}),Object(C.jsx)("th",{style:{textAlign:"right"},children:"Progress"}),Object(C.jsx)("th",{children:"Status"}),Object(C.jsx)("th",{children:"Created"}),Object(C.jsx)("th",{})]})}),Object(C.jsx)("tbody",{children:n.map((function(e){return Object(C.jsx)(jr,{backfill:e,onTerminateBackfill:a,onResumeBackfill:x},e.backfillId)}))})]}),Object(C.jsx)(ar,{backfill:o,onClose:function(){return a(void 0)},onComplete:function(){return t()}}),Object(C.jsx)(Kn.a,{isOpen:!!(null===v||void 0===v?void 0:v.length),onClose:function(){return g(void 0)},onComplete:function(){return t()},selectedRuns:y})]})},jr=function(e){var n=e.backfill,t=e.onTerminateBackfill,r=e.onResumeBackfill,i=Object(a.h)(),o=Object(R.c)(),s=o.canCancelPartitionBackfill,l=o.canLaunchPartitionBackfill,u=c.useMemo((function(){return hr(n)}),[n]),d="/instance/runs?".concat(or.a.stringify({q:Object(zn.b)([{token:"tag",value:"dagster/backfill=".concat(n.backfillId)}])})),j=n.partitionSet?Object(Zt.c)(n.partitionSet.repositoryOrigin.repositoryName,n.partitionSet.repositoryOrigin.repositoryLocationName,n.partitionSet.pipelineName,n.partitionSet.mode,"/partitions?".concat(or.a.stringify({partitionSet:n.partitionSet.name,q:Object(zn.b)([{token:"tag",value:"dagster/backfill=".concat(n.backfillId)}])}))):null,f=n.runs.some((function(e){return e.canTerminate}));return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{style:{width:"120px"},children:Object(C.jsx)(v.e,{children:j?Object(C.jsx)(h.b,{to:j,children:n.backfillId}):n.backfillId})}),Object(C.jsx)("td",{children:n.partitionSet?Object(C.jsx)(fr,{partitionSet:n.partitionSet}):n.partitionSetName}),Object(C.jsx)("td",{style:{textAlign:"right"},children:Object(C.jsx)(br,{backfill:n})}),Object(C.jsxs)("td",{children:[[Ke.a.CANCELED,Ke.a.FAILED].includes(n.status)?Object(C.jsx)(b.a,{margin:{bottom:12},children:Object(C.jsx)(p.D,{minimal:!0,intent:"danger",onClick:function(){return n.error&&Object(Te.b)({title:"Error",body:Object(C.jsx)(_.b,{error:n.error})})},style:{cursor:n.error?"pointer":"default"},children:n.status})}):null,Object(C.jsx)(gr,{backfill:n})]}),Object(C.jsx)("td",{children:n.timestamp?Object(C.jsx)(cr.a,{timestamp:n.timestamp}):"-"}),Object(C.jsx)("td",{style:{width:"100px"},children:Object(C.jsx)(p.t,{content:Object(C.jsxs)(p.n,{children:[s?Object(C.jsxs)(C.Fragment,{children:[u.numUnscheduled&&n.status===Ke.a.REQUESTED?Object(C.jsx)(p.p,{text:"Cancel backfill submission",icon:"stop",intent:"danger",onClick:function(){return t(n)}}):null,f?Object(C.jsx)(p.p,{text:"Terminate unfinished runs",icon:"stop",intent:"danger",onClick:function(){return t(n)}}):null]}):null,l&&n.status===Ke.a.FAILED&&n.partitionSet?Object(C.jsx)(p.p,{text:"Resume failed backfill",title:"Submits runs for all partitions in the backfill that do not have a corresponding run. Does not retry failed runs.",icon:"repeat",onClick:function(){return r(n)}}):null,j?Object(C.jsx)(p.p,{text:"View Partition Matrix",icon:"multi-select",onClick:function(){return i.push(j)}}):null,Object(C.jsx)(p.p,{text:"View Backfill Runs",icon:"history",onClick:function(){return i.push(d)}})]}),position:"bottom",children:Object(C.jsx)(p.c,{small:!0,minimal:!0,icon:"chevron-down",style:{marginLeft:"4px"}})})})]})},hr=function(e){var n={};e.runs.forEach((function(e){var t=e.tags.filter((function(e){return e.key===Gn.a.Partition})).map((function(e){return e.value})),r=Object(l.a)(t,1)[0];r&&!n[r]&&(n[r]=e)}));var t=Object.values(n),r=t.reduce((function(e,n){var t=n.status;return{numQueued:e.numQueued+(Un.e.has(t)?1:0),numInProgress:e.numInProgress+(Un.d.has(t)?1:0),numSucceeded:e.numSucceeded+(Un.f.has(t)?1:0),numFailed:e.numFailed+(Un.c.has(t)?1:0)}}),{numQueued:0,numInProgress:0,numSucceeded:0,numFailed:0});return{numQueued:r.numQueued,numInProgress:r.numInProgress,numSucceeded:r.numSucceeded,numFailed:r.numFailed,numUnscheduled:e.numTotal-e.numRequested,numSkipped:e.numRequested-t.length,numTotal:e.numTotal}},br=function(e){var n=e.backfill,t=c.useMemo((function(){return hr(n)}),[n]),r=t.numSucceeded,i=t.numFailed,o=t.numSkipped,a=t.numTotal,s=r+o+i;return Object(C.jsxs)("span",{style:{fontSize:36,fontWeight:"bold",color:j.a.GRAY1,fontVariantNumeric:"tabular-nums"},children:[a?Math.floor(100*s/a):"-","%"]})},fr=function(e){var n=e.partitionSet;return Object(C.jsxs)(f.a,{direction:"column",spacing:8,children:[Object(C.jsx)(h.b,{to:Object(Zt.c)(n.repositoryOrigin.repositoryName,n.repositoryOrigin.repositoryLocationName,n.pipelineName,n.mode,"/partitions?partitionSet=".concat(encodeURIComponent(n.name))),children:n.name}),Object(C.jsxs)("span",{style:{color:j.a.DARK_GRAY3,fontSize:12},children:[n.repositoryOrigin.repositoryName,"@",n.repositoryOrigin.repositoryLocationName]}),Object(C.jsx)(Ee.a,{showIcon:!0,fontSize:13,pipelineName:n.pipelineName,pipelineHrefContext:{name:n.repositoryOrigin.repositoryName,location:n.repositoryOrigin.repositoryLocationName},mode:n.mode})]})},gr=function(e){var n=e.backfill,t=c.useMemo((function(){return hr(n)}),[n]),r=t.numQueued,i=t.numInProgress,o=t.numSucceeded,a=t.numFailed,s=t.numSkipped,l=t.numUnscheduled,u=t.numTotal;return Object(C.jsx)(L.a,{style:{marginRight:20,maxWidth:250},children:Object(C.jsxs)("tbody",{children:[Object(C.jsx)(Or,{label:"Queued",count:r}),Object(C.jsx)(Or,{label:"In progress",count:i}),Object(C.jsx)(Or,{label:"Succeeded",count:o}),Object(C.jsx)(Or,{label:"Failed",count:a}),Object(C.jsx)(Or,{label:"Skipped",count:s}),n.status===Ke.a.CANCELED?Object(C.jsx)(Or,{label:"Unscheduled",count:l}):Object(C.jsx)(Or,{label:"To be scheduled",count:l}),Object(C.jsx)(Or,{label:"Total",count:u,isTotal:!0})]})})},Or=function(e){var n=e.label,t=e.count,r=e.isTotal;return!t||t<0?null:Object(C.jsxs)("tr",{style:{boxShadow:"none",fontVariant:"tabular-nums"},children:[Object(C.jsx)("td",{style:{borderTop:r?"1px solid ".concat(j.a.LIGHT_GRAY1):void 0,maxWidth:"100px",padding:"3px 5px"},children:Object(C.jsx)(f.a,{direction:"row",spacing:8,alignItems:"center",children:Object(C.jsx)("div",{children:n})})}),Object(C.jsx)("td",{style:{borderTop:r?"1px solid ".concat(j.a.LIGHT_GRAY1):void 0,maxWidth:"50px",padding:"3px 5px"},children:Object(C.jsx)(b.a,{flex:{justifyContent:"flex-end"},children:t})})]})},mr=Object(d.gql)(ut||(ut=Object(s.a)(["\n  query InstanceBackfillsQuery($cursor: String, $limit: Int) {\n    partitionBackfillsOrError(cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          backfillId\n          status\n          numRequested\n          numTotal\n          runs {\n            id\n            canTerminate\n            status\n            tags {\n              key\n              value\n            }\n          }\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),_.a),xr=Object(d.gql)(dt||(dt=Object(s.a)(["\n  mutation resumeBackfill($backfillId: String!) {\n    resumePartitionBackfill(backfillId: $backfillId) {\n      __typename\n      ... on ResumeBackfillSuccess {\n        backfillId\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n    }\n  }\n"]))),vr=t(15),yr=t(210),kr=Object(u.a)(pt||(pt=Object(s.a)(["\n  .hljs.yaml {\n    margin: 0;\n    padding: 0;\n  }\n\n  .hljs-attr {\n    color: ",";\n  }\n"])),j.a.BLUE1),Sr=c.memo((function(){var e=Object(a.h)(),n=Object(d.useQuery)(Er,{fetchPolicy:"cache-and-network"}).data,t=c.useState((function(){return document.location.hash})),r=Object(l.a)(t,2),i=r[0],o=r[1];if(c.useEffect((function(){if(n){var e=document.location.hash;if(e){var t,r=e.slice(1);null===(t=document.getElementById(r))||void 0===t||t.scrollIntoView({block:"start",inline:"nearest"})}}}),[n]),c.useEffect((function(){var n=e.listen((function(e){o(e.hash)}));return function(){return n()}}),[e]),!n)return Object(C.jsx)(Ue.a,{purpose:"section"});var s=n.instance.info.split(/\n(?=\w)/g);return Object(C.jsxs)(f.a,{direction:"column",spacing:20,children:[Object(C.jsx)(lr,{tab:"config"}),Object(C.jsxs)(f.a,{direction:"column",spacing:16,children:[Object(C.jsx)(v.f,{children:"Dagster ".concat(n.version)}),Object(C.jsx)(kr,{}),s.map((function(e){var n=e.split(/\:/),t=Object(l.a)(n,1)[0],r="#".concat(t);return Object(C.jsxs)(b.a,{flex:{direction:"row",alignItems:"flex-start"},id:t,children:[Object(C.jsx)(Cr,{to:"/instance/config".concat(r),children:Object(C.jsx)(g.a,{name:"link",color:vr.a.Gray300})},t),Object(C.jsx)(wr,{highlighted:i===r,children:Object(C.jsx)(yr.a,{value:e,language:"yaml"})})]},t)}))]})]})})),Cr=Object(u.c)(h.b).withConfig({displayName:"InstanceConfig__ConfigLink",componentId:"atoly3-0"})(["margin-right:12px;margin-top:-1px;user-select:none;transition:filter ease-in-out 100ms;&:hover{filter:brightness(0.4);}"]),wr=u.c.div.withConfig({displayName:"InstanceConfig__ConfigSection",componentId:"atoly3-1"})(["flex-grow:1;",";"],(function(e){return e.highlighted?Object(u.b)(jt||(jt=Object(s.a)(["\n          background-color: ",";\n          margin: -8px;\n          padding: 8px;\n        "])),j.a.LIGHT_GRAY3):null})),Er=Object(d.gql)(ht||(ht=Object(s.a)(["\n  query InstanceConfigQuery {\n    version\n    instance {\n      info\n    }\n  }\n"]))),Ir=t(298),Rr=function(){var e=Object(d.useQuery)(_r,{fetchPolicy:"cache-and-network",pollInterval:Dt.a,notifyOnNetworkStatusChange:!0}),n=e.loading,t=e.data;return Object(C.jsxs)(f.a,{direction:"column",spacing:20,children:[Object(C.jsx)(lr,{tab:"health",queryData:e}),Object(C.jsxs)(f.a,{direction:"column",spacing:16,children:[Object(C.jsx)(v.f,{children:"Daemon statuses"}),n&&!(null===t||void 0===t?void 0:t.instance)?Object(C.jsx)("div",{style:{color:j.a.GRAY3},children:"Loading\u2026"}):(null===t||void 0===t?void 0:t.instance)?Object(C.jsx)(Ir.b,{daemonHealth:t.instance.daemonHealth}):null]})]})},_r=Object(d.gql)(bt||(bt=Object(s.a)(["\n  query InstanceHealthQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    workspaceOrError {\n      ...RepositoryLocationsFragment\n    }\n  }\n\n  ","\n  ","\n"])),Lt.a,Xt.a),Tr=t(627),Lr=t(679),Pr=t(825),Nr=t(209),Ar=c.memo((function(){var e=Object(d.useQuery)(Fr,{fetchPolicy:"cache-and-network",pollInterval:15e3,notifyOnNetworkStatusChange:!0});return Object(C.jsxs)(f.a,{direction:"column",spacing:20,children:[Object(C.jsx)(lr,{tab:"schedules",queryData:e}),Object(C.jsx)(O.a,{queryResult:e,allowStaleData:!0,children:function(e){return Object(C.jsx)(Dr,{data:e})}})]})})),Dr=function(e){var n=e.data,t=n.instance,r=n.scheduler,i=n.repositoriesOrError,o=n.unloadableInstigationStatesOrError;if("PythonError"===i.__typename)return Object(C.jsx)(_.b,{error:i});if("PythonError"===o.__typename)return Object(C.jsx)(_.b,{error:o});var c=o.results,a=i.nodes.filter((function(e){return e.schedules.length})),s=a.length?Object(C.jsxs)(f.a,{direction:"column",spacing:32,children:[Object(C.jsxs)(f.a,{direction:"column",spacing:12,children:[Object(C.jsx)(Pt.d,{schedulerOrError:r}),Object(C.jsx)(Nt.b,{schedulerOrError:r,daemonHealth:t.daemonHealth})]}),a.map((function(e){return Object(C.jsxs)(f.a,{direction:"column",spacing:8,children:[Object(C.jsx)(v.f,{children:"".concat(Object(Re.b)(e.name,e.location.name))}),Object(C.jsx)(Pr.a,{repoAddress:Object(Re.a)(e.name,e.location.name),schedules:e.schedules})]},e.name)}))]}):null,l=c.filter((function(e){return e.instigationType===Ke.g.SCHEDULE})),u=l.length?Object(C.jsx)(Lr.a,{scheduleStates:l}):null;return s||u?Object(C.jsxs)(f.a,{direction:"column",spacing:32,children:[s,u]}):Object(C.jsx)(b.a,{margin:{top:32},children:Object(C.jsx)(p.r,{icon:"time",title:"No schedules found",description:Object(C.jsxs)("div",{children:["This instance does not have any schedules defined. Visit the"," ",Object(C.jsx)("a",{href:"https://docs.dagster.io/overview/schedules-sensors/schedules",target:"_blank",rel:"noreferrer",children:"scheduler documentation"})," ","for more information about scheduling runs in Dagster."]})})})},Fr=Object(d.gql)(ft||(ft=Object(s.a)(["\n  query InstanceSchedulesQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          schedules {\n            id\n            ...ScheduleFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    scheduler {\n      ...SchedulerFragment\n    }\n    unloadableInstigationStatesOrError {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),Lt.a,Nr.a,Pt.c,Nt.a,_.a,Tr.a),qr=t(718),Ur=t(719),Gr=t(811),Kr=c.memo((function(){var e=Object(d.useQuery)(Br,{fetchPolicy:"cache-and-network",pollInterval:15e3,notifyOnNetworkStatusChange:!0});return Object(C.jsxs)(f.a,{direction:"column",spacing:20,children:[Object(C.jsx)(lr,{tab:"sensors",queryData:e}),Object(C.jsx)(O.a,{queryResult:e,allowStaleData:!0,children:function(e){return Object(C.jsx)(Hr,{data:e})}})]})})),Hr=function(e){var n=e.data,t=n.instance,r=n.repositoriesOrError,i=n.unloadableInstigationStatesOrError;if("PythonError"===r.__typename)return Object(C.jsx)(_.b,{error:r});if("PythonError"===i.__typename)return Object(C.jsx)(_.b,{error:i});var o=i.results,c=r.nodes.filter((function(e){return e.sensors.length})),a=c.length?Object(C.jsxs)(f.a,{direction:"column",spacing:32,children:[Object(C.jsx)(Ur.a,{daemonHealth:t.daemonHealth}),c.map((function(e){return e.sensors.length?Object(C.jsxs)(f.a,{direction:"column",spacing:12,children:[Object(C.jsx)(v.f,{children:"".concat(Object(Re.b)(e.name,e.location.name))}),Object(C.jsx)(Gr.a,{repoAddress:Object(Re.a)(e.name,e.location.name),sensors:e.sensors})]},e.name):null}))]}):null,s=o.filter((function(e){return e.instigationType===Ke.g.SENSOR})),l=s.length?Object(C.jsx)(Lr.b,{sensorStates:s}):null;return a||l?Object(C.jsxs)(f.a,{direction:"column",spacing:32,children:[a,l]}):Object(C.jsx)(b.a,{margin:{top:32},children:Object(C.jsx)(p.r,{icon:"automatic-updates",title:"No sensors found",description:Object(C.jsxs)("p",{children:["This instance does not have any sensors defined. Visit the"," ",Object(C.jsx)("a",{href:"https://docs.dagster.io/overview/schedules-sensors/sensors",target:"_blank",rel:"noreferrer",children:"sensor documentation"})," ","for more information about setting up sensors in Dagster."]})})})},Br=Object(d.gql)(gt||(gt=Object(s.a)(["\n  query InstanceSensorsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    workspaceOrError {\n      ...RepositoryLocationsFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          sensors {\n            id\n            ...SensorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),Lt.a,Xt.a,Nr.a,_.a,qr.a,Tr.a),Qr=function(){return Object(C.jsx)(m.a,{children:Object(C.jsxs)(f.a,{direction:"column",spacing:12,children:[Object(C.jsx)(x.a,{title:Object(C.jsx)(v.d,{children:"Instance status"})}),Object(C.jsxs)(a.e,{children:[Object(C.jsx)(a.c,{path:"/instance/health",render:function(){return Object(C.jsx)(Rr,{})}}),Object(C.jsx)(a.c,{path:"/instance/schedules",render:function(){return Object(C.jsx)(Ar,{})}}),Object(C.jsx)(a.c,{path:"/instance/sensors",render:function(){return Object(C.jsx)(Kr,{})}}),Object(C.jsx)(a.c,{path:"/instance/backfills",render:function(){return Object(C.jsx)(ur,{})}}),Object(C.jsx)(a.c,{path:"/instance/config",render:function(){return Object(C.jsx)(Sr,{})}})]})]})})},Mr=function(){var e=Object(a.i)().pathname,n=c.useRef(null);return c.useEffect((function(){var e;null===(e=n.current)||void 0===e||e.scrollTo({top:0})}),[e]),Object(C.jsx)(rr.a,{ref:n,children:Object(C.jsxs)(a.e,{children:[Object(C.jsx)(a.c,{path:"/instance/assets",exact:!0,component:Ce}),Object(C.jsx)(a.c,{path:"/instance/assets/(/?.*)",component:ve}),Object(C.jsx)(a.c,{path:"/instance/runs",exact:!0,component:Kt}),Object(C.jsx)(a.c,{path:"/instance/runs/:runId",exact:!0,component:St}),Object(C.jsx)(a.c,{path:"/instance/snapshots/:pipelinePath/:tab?",component:tr}),Object(C.jsx)(a.c,{path:"/instance/:tab",component:Qr}),Object(C.jsx)(a.c,{path:"/instance",render:function(){return Object(C.jsx)(a.b,{to:"/instance/health"})}})]})})};n.default=Mr},768:function(e,n,t){"use strict";(function(e){t.d(n,"c",(function(){return y})),t.d(n,"b",(function(){return k})),t.d(n,"a",(function(){return S}));var r,i,o=t(11),c=t(47),a=t(48),s=t(64),l=t(63),u=t(6),d=t(10),p=t(22),j=t(898),h=t.n(j),b=t(1),f=t(15),g=t(21),O=t(18),m=t(71),x=t(41),v=t(0),y=5242880,k=function(n){Object(s.a)(r,n);var t=Object(l.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).timeout=null,e.contentContainer=b.createRef(),e.state={showScrollToTop:!1},e.hideWarning=function(){e.setState({showScrollToTop:!1}),e.timeout&&(clearTimeout(e.timeout),e.timeout=0)},e.scheduleHideWarning=function(){e.timeout=window.setTimeout(e.hideWarning,3e3)},e.cancelHideWarning=function(){e.timeout&&(clearTimeout(e.timeout),e.timeout=0)},e.onScrollUp=function(n){e.cancelHideWarning(),n?(e.setState({showScrollToTop:!0}),e.scheduleHideWarning()):e.hideWarning()},e.onScrollDown=function(n){e.hideWarning()},e.scrollToTop=function(){e.contentContainer.current&&e.contentContainer.current.scrollToTop()},e}return Object(a.a)(r,[{key:"renderScrollToTop",value:function(){var e=this;return this.state.showScrollToTop?Object(v.jsx)(F,{children:Object(v.jsx)(q,{onClick:function(){return e.scrollToTop()},onMouseOver:this.cancelHideWarning,onMouseOut:this.scheduleHideWarning,children:Object(v.jsxs)(g.a,{direction:"row",spacing:8,alignItems:"center",children:[Object(v.jsx)(O.a,{name:"arrow_upward",color:f.a.White}),"Scroll to top"]})})}):null}},{key:"render",value:function(){var n=this.props,t=n.logData,r=n.isLoading,i=n.isVisible,o=n.downloadUrl,c=null===t||void 0===t?void 0:t.data,a=c&&e.byteLength(c,"utf8")>=y;if(c&&a){var s=c.indexOf("\n")+1,l=s<c.length?c.slice(s):c;c="\x1b[33m...logs truncated...\x1b[39m\n"+l}var u=a?Object(v.jsx)(D,{children:Object(v.jsxs)(g.a,{direction:"row",spacing:8,alignItems:"center",children:[Object(v.jsx)(O.a,{name:"warning",color:f.a.Yellow500}),Object(v.jsxs)("div",{children:["This log has exceeded the 5MB limit."," ",o?Object(v.jsx)("a",{href:o,download:!0,children:"Download the full log file"}):null,"."]})]})}):null;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(E,{isVisible:i,children:[this.renderScrollToTop(),Object(v.jsxs)(P,{children:[u,Object(v.jsx)(N,{children:Object(v.jsx)(A,{isSelected:!0,content:c,onScrollUp:this.onScrollUp,onScrollDown:this.onScrollDown,ref:this.contentContainer})})]}),r?Object(v.jsx)(U,{children:Object(v.jsx)(m.a,{purpose:"page"})}):null]}),Object(v.jsx)(I,{isVisible:i,children:null===t||void 0===t?void 0:t.path})]})}}]),r}(b.Component),S=Object(d.gql)(r||(r=Object(o.a)(["\n  fragment ComputeLogContentFileFragment on ComputeLogFile {\n    path\n    cursor\n    data\n    downloadUrl\n  }\n"]))),C=function(e){Object(s.a)(t,e);var n=Object(l.a)(t);function t(){var e;Object(c.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).container=b.createRef(),e.lastScroll=0,e.onScroll=function(){if(e.container.current&&e.props.isSelected){var n=e.props,t=n.onScrollUp,r=n.onScrollDown,i=e.container.current,o=i.scrollHeight,c=i.scrollTop/(o-i.offsetHeight);e.container.current.scrollTop<e.lastScroll?t&&t(c):r&&r(c),e.lastScroll=e.container.current.scrollTop}},e}return Object(a.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom(),this.container.current&&(this.container.current.focus(),this.container.current.addEventListener("scroll",this.onScroll))}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container.current)return!1;var e=this.container.current,n=e.scrollHeight,t=e.scrollTop;return e.offsetHeight+t>=n}},{key:"componentDidUpdate",value:function(e,n,t){t&&this.scrollToBottom(),this.props.isSelected&&!e.isSelected&&this.container.current&&this.container.current.focus()}},{key:"focus",value:function(){var e=this.container.current;e&&e.focus()}},{key:"scrollToBottom",value:function(){var e=this.container.current;e&&(e.scrollTop=e.scrollHeight-e.offsetHeight)}},{key:"scrollToTop",value:function(){var e=this.container.current;e&&(e.scrollTop=0,e.focus())}},{key:"render",value:function(){var e=this.props,n=e.content,t=e.className;return n?Object(v.jsx)("div",{className:t,style:{outline:"none"},ref:this.container,tabIndex:0,children:Object(v.jsxs)(R,{children:[Object(v.jsx)(w,{content:n}),Object(v.jsxs)(_,{children:[Object(v.jsx)(L,{}),Object(v.jsx)(h.a,{linkify:!1,useClasses:!0,children:n})]})]})}):Object(v.jsx)("div",{className:t,ref:this.container,children:Object(v.jsx)(R,{style:{justifyContent:"center",alignItems:"center"},children:null==n?"No log file available":"No output"})})}}]),t}(b.Component),w=function(e){var n=e.content;if(!n)return null;var t=n.match(/\n/g),r=t?t.length:0;return Object(v.jsx)(T,{children:Array.from(Array(r),(function(e,n){return Object(v.jsx)("div",{children:String(n+1)},n)}))})},E=u.c.div.withConfig({displayName:"ComputeLogContent__FileContainer",componentId:"sc-1jh6g69-0"})(["flex:1;height:100%;position:relative;&:first-child{border-right:0.5px solid #5c7080;}display:flex;flex-direction:column;",""],(function(e){return e.isVisible?null:"display: none;"})),I=u.c.div.withConfig({displayName:"ComputeLogContent__FileFooter",componentId:"sc-1jh6g69-1"})(["display:flex;flex-direction:row;align-items:center;height:30px;background-color:",";border-top:0.5px solid #5c7080;color:#aaaaaa;padding:2px 5px;font-size:0.85em;",""],p.a.DARK_GRAY2,(function(e){return e.isVisible?null:"display: none;"})),R=u.c.div.withConfig({displayName:"ComputeLogContent__ContentContainer",componentId:"sc-1jh6g69-2"})(["display:flex;flex-direction:row;min-height:100%;background-color:",";"],p.a.DARK_GRAY2),_=u.c.div.withConfig({displayName:"ComputeLogContent__Content",componentId:"sc-1jh6g69-3"})(["padding:10px;background-color:",";"],p.a.DARK_GRAY2),T=u.c.div.withConfig({displayName:"ComputeLogContent__LineNumberContainer",componentId:"sc-1jh6g69-4"})(["display:flex;flex-direction:column;align-items:flex-end;border-right:1px solid #5c7080;padding:10px 10px 10px 20px;margin-right:5px;background-color:",";opacity:0.8;color:#858585;min-height:100%;"],p.a.DARK_GRAY2),L=Object(u.a)(i||(i=Object(o.a)(["\n  .ansi-black {\n    color: #586e75;\n  }\n  .ansi-red {\n    color: #dc322f;\n  }\n  .ansi-green {\n    color: #859900;\n  }\n  .ansi-yellow {\n    color: #b58900;\n  }\n  .ansi-blue {\n    color: #268bd2;\n  }\n  .ansi-magenta {\n    color: #d33682;\n  }\n  .ansi-cyan {\n    color: #2aa198;\n  }\n  .ansi-white {\n    color: #eee8d5;\n  }\n"]))),P=u.c.div.withConfig({displayName:"ComputeLogContent__FileContent",componentId:"sc-1jh6g69-5"})(["flex:1;display:flex;flex-direction:column;"]),N=u.c.div.withConfig({displayName:"ComputeLogContent__RelativeContainer",componentId:"sc-1jh6g69-6"})(["flex:1;position:relative;"]),A=Object(u.c)(C).withConfig({displayName:"ComputeLogContent__LogContent",componentId:"sc-1jh6g69-7"})(["color:#eeeeee;font-family:",";font-size:16px;white-space:pre;overflow:auto;position:absolute;top:0;bottom:0;left:0;right:0;"],x.a.monospace),D=u.c.div.withConfig({displayName:"ComputeLogContent__FileWarning",componentId:"sc-1jh6g69-8"})(["background-color:#fffae3;padding:10px 20px;margin:20px 70px;border-radius:5px;"]),F=u.c.div.withConfig({displayName:"ComputeLogContent__ScrollToast",componentId:"sc-1jh6g69-9"})(["position:absolute;height:30px;top:0;left:0;right:0;display:flex;flex-direction:row;justify-content:center;align-items:flex-start;z-index:1;"]),q=u.c.div.withConfig({displayName:"ComputeLogContent__ScrollToTop",componentId:"sc-1jh6g69-10"})(["background-color:black;padding:10px 20px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:white;border-bottom:0.5px solid #5c7080;border-left:0.5px solid #5c7080;border-right:0.5px solid #5c7080;cursor:pointer;"]),U=u.c.div.withConfig({displayName:"ComputeLogContent__LoadingContainer",componentId:"sc-1jh6g69-11"})(["display:flex;justifycontent:center;alignitems:center;position:absolute;top:0;bottom:0;left:0;right:0;backgroundcolor:",";opacity:0.3;"],p.a.DARK_GRAY3)}).call(this,t(331).Buffer)},898:function(e,n,t){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t(899)),c=t(900),a=i(t(1)),s=/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/;function l(e,n,t,r){var i=n?null:function(e){var n={};return e.bg&&(n.backgroundColor="rgb(".concat(e.bg,")")),e.fg&&(n.color="rgb(".concat(e.fg,")")),n}(t),o=n?function(e){var n="";return e.bg||e.fg?(e.bg&&(n+=e.bg+" "),e.fg&&(n+=e.fg+" "),n=n.substring(0,n.length-1)):null}(t):null;if(!e)return a.createElement("span",{style:i,key:r,className:o},t.content);var c=t.content.split(/(\s+)/).reduce((function(e,n,t){return t%2===1?(e.push(n),e):s.test(n)?(e.push(a.createElement("a",{key:t,href:n,target:"_blank"},"".concat(n))),e):(e.push(n),e)}),[]);return a.createElement("span",{style:i,key:r,className:o},c)}n.default=function(e){var n=e.className,t=e.useClasses,r=e.children,i=e.linkify;return a.createElement("code",{className:n},function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=c.escapeCarriageReturn(e),o.default.ansiToJson(e,{json:!0,remove_empty:!0,use_classes:n})}(r,!!t).map(l.bind(null,i,!!t)))}},899:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0}return r(e,null,[{key:"escapeForHtml",value:function(n){return(new e).escapeForHtml(n)}},{key:"linkify",value:function(n){return(new e).linkify(n)}},{key:"ansiToHtml",value:function(n,t){return(new e).ansiToHtml(n,t)}},{key:"ansiToJson",value:function(n,t){return(new e).ansiToJson(n,t)}},{key:"ansiToText",value:function(n){return(new e).ansiToText(n)}}]),r(e,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var e=0;e<2;++e)for(var n=0;n<8;++n)this.PALETTE_COLORS.push(i[e][n].color);for(var t=[0,95,135,175,215,255],r=function(e,n,r){return t[e]+", "+t[n]+", "+t[r]},o=0;o<6;++o)for(var c=0;c<6;++c)for(var a=0;a<6;++a)this.PALETTE_COLORS.push(r(o,c,a));for(var s=8,l=0;l<24;++l,s+=10)this.PALETTE_COLORS.push(r(s,s,s))}},{key:"escapeForHtml",value:function(e){return e.replace(/[&<>]/gm,(function(e){return"&"==e?"&amp;":"<"==e?"&lt;":">"==e?"&gt;":""}))}},{key:"linkify",value:function(e){return e.replace(/(https?:\/\/[^\s]+)/gm,(function(e){return'<a href="'+e+'">'+e+"</a>"}))}},{key:"ansiToHtml",value:function(e,n){return this.process(e,n,!0)}},{key:"ansiToJson",value:function(e,n){return(n=n||{}).json=!0,n.clearLine=!1,this.process(e,n,!0)}},{key:"ansiToText",value:function(e){return this.process(e,{},!1)}},{key:"process",value:function(e,n,t){var r=this,i=e.split(/\033\[/),o=i.shift();void 0!==n&&null!==n||(n={}),n.clearLine=/\r/.test(e);var c=i.map((function(e){return r.processChunk(e,n,t)}));if(n&&n.json){var a=this.processChunkJson("");return a.content=o,a.clearLine=n.clearLine,c.unshift(a),n.remove_empty&&(c=c.filter((function(e){return!e.isEmpty()}))),c}return c.unshift(o),c.join("")}},{key:"processChunkJson",value:function(e,n,t){var r=(n="undefined"==typeof n?{}:n).use_classes="undefined"!=typeof n.use_classes&&n.use_classes,o=n.key=r?"class":"color",c={content:e,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,clearLine:n.clearLine,decoration:null,was_processed:!1,isEmpty:function(){return!c.content}},a=e.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!a)return c;c.content=a[4];var s=a[2].split(";");if(""!==a[1]||"m"!==a[3])return c;if(!t)return c;var l=this;for(l.decoration=null;s.length>0;){var u=s.shift(),d=parseInt(u);if(isNaN(d)||0===d)l.fg=l.bg=l.decoration=null;else if(1===d)l.decoration="bold";else if(2===d)l.decoration="dim";else if(3==d)l.decoration="italic";else if(4==d)l.decoration="underline";else if(5==d)l.decoration="blink";else if(7===d)l.decoration="reverse";else if(8===d)l.decoration="hidden";else if(9===d)l.decoration="strikethrough";else if(39==d)l.fg=null;else if(49==d)l.bg=null;else if(d>=30&&d<38)l.fg=i[0][d%10][o];else if(d>=90&&d<98)l.fg=i[1][d%10][o];else if(d>=40&&d<48)l.bg=i[0][d%10][o];else if(d>=100&&d<108)l.bg=i[1][d%10][o];else if(38===d||48===d){var p=38===d;if(s.length>=1){var j=s.shift();if("5"===j&&s.length>=1){var h=parseInt(s.shift());if(h>=0&&h<=255)if(r){var b=h>=16?"ansi-palette-"+h:i[h>7?1:0][h%8].class;p?l.fg=b:l.bg=b}else this.PALETTE_COLORS||l.setupPalette(),p?l.fg=this.PALETTE_COLORS[h]:l.bg=this.PALETTE_COLORS[h]}else if("2"===j&&s.length>=3){var f=parseInt(s.shift()),g=parseInt(s.shift()),O=parseInt(s.shift());if(f>=0&&f<=255&&g>=0&&g<=255&&O>=0&&O<=255){var m=f+", "+g+", "+O;r?p?(l.fg="ansi-truecolor",l.fg_truecolor=m):(l.bg="ansi-truecolor",l.bg_truecolor=m):p?l.fg=m:l.bg=m}}}}}if(null===l.fg&&null===l.bg&&null===l.decoration)return c;return c.fg=l.fg,c.bg=l.bg,c.fg_truecolor=l.fg_truecolor,c.bg_truecolor=l.bg_truecolor,c.decoration=l.decoration,c.was_processed=!0,c}},{key:"processChunk",value:function(e,n,t){var r=this;n=n||{};var i=this.processChunkJson(e,n,t);if(n.json)return i;if(i.isEmpty())return"";if(!i.was_processed)return i.content;var o=n.use_classes,c=[],a=[],s={},l=function(e){var n=[],t=void 0;for(t in e)e.hasOwnProperty(t)&&n.push("data-"+t+'="'+r.escapeForHtml(e[t])+'"');return n.length>0?" "+n.join(" "):""};return i.fg&&(o?(a.push(i.fg+"-fg"),null!==i.fg_truecolor&&(s["ansi-truecolor-fg"]=i.fg_truecolor,i.fg_truecolor=null)):c.push("color:rgb("+i.fg+")")),i.bg&&(o?(a.push(i.bg+"-bg"),null!==i.bg_truecolor&&(s["ansi-truecolor-bg"]=i.bg_truecolor,i.bg_truecolor=null)):c.push("background-color:rgb("+i.bg+")")),i.decoration&&(o?a.push("ansi-"+i.decoration):"bold"===i.decoration?c.push("font-weight:bold"):"dim"===i.decoration?c.push("opacity:0.5"):"italic"===i.decoration?c.push("font-style:italic"):"reverse"===i.decoration?c.push("filter:invert(100%)"):"hidden"===i.decoration?c.push("visibility:hidden"):"strikethrough"===i.decoration?c.push("text-decoration:line-through"):c.push("text-decoration:"+i.decoration)),o?'<span class="'+a.join(" ")+'"'+l(s)+">"+i.content+"</span>":'<span style="'+c.join(";")+'"'+l(s)+">"+i.content+"</span>"}}]),e}();e.exports=o},900:function(e,n){function t(e){if(!e)return"";if(!/\r/.test(e))return e;for(e=e.replace(/\r+\n/gm,"\n");/\r[^$]/.test(e);){var n=/^(.*)\r+/m.exec(e)[1],t=/\r+(.*)$/m.exec(e)[1];t+=n.slice(t.length,n.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,t)}return e}function r(e){for(var n=0,t=0;t<e.length;t++)e[n].length<=e[t].length&&(n=t);return n}function i(e){if(!/\r/.test(e))return e;for(var n=e.split("\r"),t=[];n.length>0;){var i=r(n);t.push(n[i]),n=n.slice(i+1)}return t.join("\r")}e.exports=t,e.exports.escapeCarriageReturn=t,e.exports.escapeCarriageReturnSafe=function(e){if(!e)return"";if(!/\r/.test(e))return e;if(!/\n/.test(e))return i(e);var n=(e=e.replace(/\r+\n/gm,"\n")).lastIndexOf("\n");return t(e.slice(0,n))+"\n"+i(e.slice(n+1))}},901:function(e,n,t){var r=t(222),i=t(140);e.exports=function(e,n,t){var o=!0,c=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(t)&&(o="leading"in t?!!t.leading:o,c="trailing"in t?!!t.trailing:c),r(e,n,{leading:o,maxWait:n,trailing:c})}}}]);
//# sourceMappingURL=8.0e73a7e4.chunk.js.map