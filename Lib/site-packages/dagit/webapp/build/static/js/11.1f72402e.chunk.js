(this["webpackJsonp@dagit/app"]=this["webpackJsonp@dagit/app"]||[]).push([[11],{1067:function(e,n,t){"use strict";t.r(n);var i=t(11),r=t(62),o=t.n(r),a=t(94),c=t(27),s=t(77),l=t(17),u=t(9),d=t(6),p=t(10),f=t(22),m=t(29),g=t(158),h=t.n(g),v=t(1),y=t(213),b=t(73),j=t(46),C=t(142),x=t(36),O=t(65),A=t(47),E=t(48),k=t(64),_=t(63),S=(t(1042),t(680),t(1043),t(1045),t(1046),t(816),t(1047),t(1048),t(1049),t(817),t(681),t(1050),t(1052),t(614)),w=t.n(S),R="CodeMirror-lint-markers";function T(e){e.parentNode&&e.parentNode.removeChild(e)}function N(e,n,t){var i=function(e,n,t){var i=document.createElement("div"),r=t.getBoundingClientRect();return i.className="CodeMirror-lint-tooltip",i.appendChild(n.cloneNode(!0)),document.body.appendChild(i),r.top>i.clientHeight?(i.style.top=r.top-i.clientHeight-5+"px",i.style.left=r.left+5+"px"):(i.style.top=r.top+5+"px",i.style.left=r.right+10+"px"),null!=i.style.opacity&&(i.style.opacity=1),i}(0,n,t);function r(){var e;w.a.off(t,"mouseout",r),i&&((e=i).parentNode&&(null==e.style.opacity&&T(e),e.style.opacity=0,setTimeout((function(){T(e)}),600)),i=null)}var o=setInterval((function(){if(i)for(var e=t;;e=e.parentNode){if(e&&11===e.nodeType&&(e=e.host),e===document.body)return;if(!e){r();break}}if(!i)return clearInterval(o)}),400);w.a.on(t,"mouseout",r)}function I(e){var n=e.state.lint;n.hasGutter&&e.clearGutter(R);for(var t=0;t<n.marked.length;++t)n.marked[t].clear();n.marked.length=0}function P(e,n,t,i){var r=document.createElement("div"),o=r;return r.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+n,t&&((o=r.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),!1!==i&&w.a.on(o,"mouseover",(function(n){N(0,e,o)})),r}function M(e){var n=e.severity;n||(n="error");var t=document.createElement("div");return t.className="CodeMirror-lint-message CodeMirror-lint-message-"+n,"undefined"!==typeof e.messageHTML?t.innerHTML=e.messageHTML:t.appendChild(document.createTextNode(e.message)),t}function F(e,n){I(e);for(var t,i,r=e.state.lint,o=r.options,a=function(e){for(var n=[],t=0;t<e.length;++t){var i=e[t],r=i.from.line;(n[r]||(n[r]=[])).push(i)}return n}(n),c=0;c<a.length;++c){var s=a[c];if(s){for(var l=null,u=r.hasGutter&&document.createDocumentFragment(),d=0;d<s.length;++d){var p=s[d],f=p.severity;f||(f="error"),i=f,l="error"===(t=l)?t:i,o.formatAnnotation&&(p=o.formatAnnotation(p)),r.hasGutter&&u.appendChild(M(p)),p.to&&r.marked.push(e.markText(p.from,p.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+f,__annotation:p}))}r.hasGutter&&e.setGutterMarker(c,R,P(u,l,s.length>1,r.options.tooltips))}}o.onUpdateLinting&&o.onUpdateLinting(n,a,e)}function L(e){var n=e.state.lint.options,t=n.options||n,i=n.getAnnotations||e.getHelper(w.a.Pos(0,0),"lint");if(i)if(n.async||i.async)!function(e,n,t){var i=e.state.lint,r=++i.waitingFor;function o(){r=-1,e.off("change",o)}e.on("change",o),n(e.getValue(),(function(n,t){e.off("change",o),i.waitingFor===r&&(t&&n instanceof w.a&&(n=t),e.operation((function(){F(e,n)})))}),t,e)}(e,i,t);else{var r=i(e.getValue(),t,e);if(!r)return;r.then?r.then((function(n){e.operation((function(){F(e,n)}))})):e.operation((function(){F(e,r)}))}}function D(e){var n=e.state.lint;n&&(clearTimeout(n.timeout),n.timeout=setTimeout((function(){L(e)}),n.options.delay||500))}function Y(e,n){for(var t=(n.target||n.srcElement).getBoundingClientRect(),i=(t.left+t.right)/2,r=(t.top+t.bottom)/2,o=e.coordsChar({left:i,top:r},"client"),a=e.findMarksAt(o),c=e.getHelper(w.a.Pos(0,0),"dagster-docs")(e,o),s=[],l=0;l<a.length;++l){var u=a[l].__annotation;u&&s.push(u)}(c||s.length)&&function(e,n,t){var i=t.target||t.srcElement,r=document.createDocumentFragment();if(e){var o=document.createElement("div");o.textContent=e,r.appendChild(o),n.length&&(o.style.paddingBottom="4px",o.style.marginBottom="4px",o.style.borderBottom="1px solid rgba(0,0,0,0.25)")}for(var a=0;a<n.length;a++){var c=n[a];r.appendChild(M(c))}N(0,r,i)}(c,s,n)}function B(e,n,t){this.marked=[],this.options=n,this.timeout=null,this.hasGutter=t,this.onMouseOver=function(n){Y(e,n)},this.waitingFor=0}w.a.defineOption("lint",!1,(function(e,n,t){if(t&&t!==w.a.Init&&(I(e),!1!==e.state.lint.options.lintOnChange&&e.off("change",D),w.a.off(e.getWrapperElement(),"mouseover",e.state.lint.onMouseOver),clearTimeout(e.state.lint.timeout),delete e.state.lint),n){for(var i=e.getOption("gutters"),r=!1,o=0;o<i.length;++o)i[o]===R&&(r=!0);var a=e.state.lint=new B(e,(c=n)instanceof Function?{getAnnotations:c}:(c&&!0!==c||(c={}),c),r);!1!==a.options.lintOnChange&&e.on("change",D),!1!==a.options.tooltips&&"gutter"!==a.options.tooltips&&w.a.on(e.getWrapperElement(),"mouseover",a.onMouseOver)}var c})),w.a.defineExtension("performLint",(function(){this.state.lint&&L(this)}));var K;t(1053);function G(e,n,t){return e=function(e,n){if(0===e.length)return[];var t=e[e.length-1];return[].concat(Object(c.a)(e.slice(0,e.length-1)),[{key:t.key,indent:t.indent,childKeys:[].concat(Object(c.a)(t.childKeys),[n])}])}(e=function(e,n){for(;e.length>0&&e[e.length-1].indent>=n;)e=e.slice(0,e.length-1);return e}(e,t),n),e=[].concat(Object(c.a)(e),[{key:n,indent:t,childKeys:[]}])}!function(e){e.Dict="dict",e.List="list"}(K||(K={}));var V={KEYWORD:new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i"),DICT_COLON:/^:\s*/,DICT_KEY:/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^# ,]*?(?=\s*:)/,QUOTED_STRING:/^('([^']|\\.)*'?|"([^"\\]|\\.)*"?)/,BLOCKSTART_PIPE_OR_ARROW:/^\s*(\||\>)\s*/,NUMBER:/^\s*-?[0-9\.]+(?![0-9\.]+)$/,VARIABLE:/^\s*(\&|\*)[a-z0-9\._-]+$/i};function H(e,n,t){var i=(n=n.filter((function(e){var n=e.indent;return t>n})))[n.length-1];if(e){var r=e.allConfigTypes.find((function(n){return n.key===e.rootConfigType.key}));if(!r||"CompositeConfigType"!==r.__typename)return null;var o=r.fields,a=r,c=!1;if(o&&n.length>0){var l,u=Object(s.a)(n);try{var d=function(){var n=l.value,t=o.find((function(e){var t=e.name;return n.key===t}));if(!t)return{v:null};var s=e.allConfigTypes.find((function(e){return e.key===t.configTypeKey})),u=s.key,d=!0;if((c="ArrayConfigType"===s.__typename)&&(u=s.typeParamKeys[0],d=!1),!(r=e.allConfigTypes.find((function(e){return e.key===u}))))return{v:null};if("ScalarUnionConfigType"===r.__typename){o=[];var p=r.nonScalarTypeKey,f=e.allConfigTypes.find((function(e){return e.key===p}));f&&"CompositeConfigType"===f.__typename&&(o=f.fields)}else"CompositeConfigType"===r.__typename?(a=r,o=r.fields,n===i&&d&&(o=o.filter((function(e){return-1===i.childKeys.indexOf(e.name)})))):o=[]};for(u.s();!(l=u.n()).done;){var p=d();if("object"===typeof p)return p.v}}catch(f){u.e(f)}finally{u.f()}}return{type:r,closestCompositeType:a,availableFields:o,inArray:c}}}function z(e){var n,t,i=e.options.hintOptions.schema,r=e.getCursor(),o=e.getTokenAt(r),a=e.getTokenAt({line:r.line,ch:o.start});return"whitespace"===o.type||o.string.startsWith(":")?(n="",t=o.end):(n=o.string,t=o.start),{start:t,cursor:r,searchString:n,token:o,prevToken:a,context:H(i,o.state.parents,t)}}function W(e,n,t){var i="RUNTIME_TYPE_MISMATCH"===e.reason?"value":"key",r=Q(n,e.path,i);return null===r?null:{message:e.message,severity:"error",type:"syntax",from:t.posFromIndex(r?r.start:0),to:t.posFromIndex(r?r.end:Number.MAX_SAFE_INTEGER)}}function Q(e,n,t){var i=function(e,n){for(var t=e.contents,i=function(e){var i=n[e];if(t&&t.type&&"PAIR"===t.type&&(t=t.value),t&&t.type&&("SEQ"===t.type||"FLOW_SEQ"===t.type)){var r=Number.parseInt(i);if(Number.isNaN(r))return{v:null};t=t.items[r]}else{if(!t||!t.type||"FLOW_MAP"!==t.type&&"MAP"!==t.type)return{v:null};var o=t.items.find((function(e){return e.key.value===i}));if(!o||!o.type||"PAIR"!==o.type)return{v:null};t=o}},r=0;r<n.length;r++){var o=i(r);if("object"===typeof o)return o.v}return t}(e,n);return i&&"type"in i?("PAIR"===i.type&&(i="value"===t&&i.value?i.value:i.key),i&&i.range?{start:i.range[0],end:i.range[1]}:null):null}S.defineMode("yaml",(function(){return{lineComment:"#",fold:"indent",startState:function(){return{trailingSpace:!1,escaped:!1,inValue:!1,inBlockLiteral:!1,inBlockLiteralIndentation:0,inlineContainers:[],parents:[]}},token:function(e,n){var t=e.peek(),i=n.escaped,r=n.trailingSpace;if(n.escaped=!1,n.trailingSpace=!1,e.eatSpace())return n.trailingSpace=!0,"whitespace";if("\\"===t)return n.escaped=!0,e.next(),null;if("#"===t&&(e.sol()||r))return e.skipToEnd(),"comment";if(n.inBlockLiteral){if(e.indentation()>n.inBlockLiteralIndentation)return e.skipToEnd(),"string";n.inBlockLiteralIndentation=0,n.inBlockLiteral=!1}if(e.match(/-/))return n.inValue=!0,"meta";if(e.sol()&&(n.inValue=!1,n.parents=[],e.match(/---/)||e.match(/\.\.\./)))return"def";if(e.match(/^(\{|\}|\[|\])/))return"{"===t?(n.inlineContainers=[].concat(Object(c.a)(n.inlineContainers),[K.Dict]),n.inValue=!1):"}"===t?(n.inlineContainers=n.inlineContainers.slice(0,n.inlineContainers.length-1),n.parents=n.parents.slice(0,n.parents.length-1),n.inValue=n.inlineContainers.length>0):"["===t?(n.inlineContainers=[].concat(Object(c.a)(n.inlineContainers),[K.List]),n.inValue=!0):"]"===t&&(n.inlineContainers=n.inlineContainers.slice(0,n.inlineContainers.length-1),n.inValue=n.inlineContainers.length>0),n.trailingSpace=!1,"meta";if(n.inlineContainers&&!i&&","===t)return n.inlineContainers[n.inlineContainers.length-1]===K.Dict&&(n.parents=n.parents.slice(0,n.parents.length-1),n.inValue=!1),e.next(),"meta";if(e.match(V.DICT_COLON))return n.inValue=!e.eol(),"meta";if(!n.inValue){var o=e.match(V.DICT_KEY);if(o){var a=o[0],s=e.pos-a.length;return n.parents=G(n.parents,a,s),"atom"}}if(n.inValue){var l=null,u=!e.string.match(/[^\s]:[^\s]/)&&e.match(V.DICT_KEY);if(u){var d=u[0],p=e.pos-d.length;n.inValue=!1,n.parents=G(n.parents,d,p),l="atom"}if(e.match(V.BLOCKSTART_PIPE_OR_ARROW)&&(n.inBlockLiteralIndentation=e.indentation(),n.inBlockLiteral=!0,l="meta"),!l){var f=e.match(V.QUOTED_STRING);if(!f){var m=n.inlineContainers[n.inlineContainers.length-1];f=m===K.List?e.match(/^[^,\]]+/):m===K.Dict?e.match(/^[^,\}]+/):e.match(/^.+$/)}var g=f?f[0]:"";l=g.match(V.VARIABLE)?"variable-2":g.match(V.NUMBER)?"number":g.match(V.KEYWORD)?"keyword":"string"}return e.eol()&&!n.inBlockLiteral&&(n.inValue=!1),l}return e.skipToEnd(),null}}})),S.registerHelper("hint","yaml",(function(e,n){if(!n.schema)return{list:[]};var t=z(e),i=t.cursor,r=t.context,o=t.token,a=t.start,s=t.searchString,l=t.prevToken;if(!r)return{list:[]};var u=function(e,t,i,r,o){var a="".concat(e.name),c=t,s=" "===r.string||"-"===r.string;if(o&&!s&&(a="- ".concat(a),c+=2),i.string.startsWith(":")){var l=r.start+2;a="\n".concat(" ".repeat(l)).concat(a),c=l}return a+=function(e){if(!n.schema)return!1;var t=n.schema.allConfigTypes.find((function(n){return n.key===e}));return!!t&&("ArrayConfigType"===t.__typename||"CompositeConfigType"===t.__typename)}(e.configTypeKey)?":\n".concat(" ".repeat(c+2)):": "},d=function(e,n,t){return{text:n,render:function(n){var i=document.createElement("div");if(i.textContent=e,t){var r=document.createElement("div");r.innerText=t.length<90?t:t.substr(0,87)+"...",r.style.opacity="0.5",r.style.overflow="hidden",r.style.maxHeight="33px",r.style.maxWidth="360px",r.style.whiteSpace="normal",i.appendChild(r)}n.appendChild(i)},from:{line:i.line,ch:a},to:{line:i.line,ch:o.end}}},p="ScalarUnionConfigType"===r.type.__typename&&!l.end;if(r.availableFields.length&&("CompositeConfigType"===r.type.__typename||p))return{list:r.availableFields.filter((function(e){return e.name.startsWith(s)})).map((function(e){return d(e.name,u(e,a,o,l,r.inArray),e.description)}))};if("EnumConfigType"===r.type.__typename){var f=s.startsWith('"')?s.substr(1):s;return{list:r.type.values.filter((function(e){return e.value.startsWith(f)})).map((function(e){return d(e.value,'"'.concat(e.value,'"'),null)}))}}if("RegularConfigType"===r.type.__typename&&"Bool"===r.type.givenName)return{list:["True","False"].filter((function(e){return e.startsWith(s)})).map((function(e){return d(e,e,null)}))};var m=r.type;if("ScalarUnionConfigType"===m.__typename){var g=n.schema.allConfigTypes.find((function(e){return e.key===m.scalarTypeKey})),h=n.schema.allConfigTypes.find((function(e){return e.key===m.nonScalarTypeKey})),v=[];g&&"RegularConfigType"===g.__typename&&"Bool"===g.givenName&&(v=["True","False"].filter((function(e){return e.startsWith(s)})).map((function(e){return d(e,e,null)})));var y=[];return h&&"CompositeConfigType"===h.__typename&&(y=h.fields.filter((function(e){return e.name.startsWith(s)})).map((function(e){return d(e.name,u(e,a,o,l,!1),e.description)}))),{list:[].concat(Object(c.a)(v),Object(c.a)(y))}}return{list:[]}})),S.registerHelper("dagster-docs","yaml",(function(e,n){var t=e.getTokenAt(n),i=e.options.hintOptions.schema;if("atom"!==t.type)return null;var r=H(i,t.state.parents,t.start),o=r&&"CompositeConfigType"===r.type.__typename&&r.type.fields.find((function(e){return e.name===t.string}));return o&&o.description?o.description:null})),S.registerHelper("lint","yaml",function(){var e=Object(a.a)(o.a.mark((function e(n,t,i){var r,a,c,s,l,u,d,p,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.checkConfig,a=i.getDoc(),c=y.parseDocument(n),s=[],l=c.errors.length>10,c.errors.slice(0,10).forEach((function(e){var n,t,i=a.posFromIndex((null===(n=e.source)||void 0===n?void 0:n.range)?e.source.range.start:0),r=a.posFromIndex((null===(t=e.source)||void 0===t?void 0:t.range)?e.source.range.end:Number.MAX_SAFE_INTEGER);(!u||u.line<i.line)&&(u=i),s.push({message:e.message,severity:"error",type:"syntax",from:i,to:r})})),l&&u&&(d={line:u.line+1,ch:0},s.push({message:"".concat(c.errors.length-s.length," more errors - bailed out."),severity:"warning",type:"syntax",from:d,to:d})),0!==c.errors.length){e.next=13;break}return p=c.toJSON()||{},e.next=11,r(p);case 11:(f=e.sent).isValid||f.errors.forEach((function(e){var n=W(e,c,a);n&&s.push(n)}));case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(n,t,i){return e.apply(this,arguments)}}());var U,q,$,X,J=t(222),Z=t.n(J),ee=t(1054),ne=t(41),te=t(0),ie=/^[a-zA-Z0-9_@(]$/,re=Z()((function(e){e.performLint()}),1e3),oe=Object(d.a)(U||(U=Object(i.a)(["\n  .react-codemirror2 {\n    height: 100%;\n    flex: 1;\n    position: relative;\n  }\n  .react-codemirror2 .CodeMirror {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: initial;\n    font-family: ",";\n    font-size: 16px;\n\n    /* Note: Theme overrides */\n    &.cm-s-default .cm-comment {\n      color: #999;\n    }\n  }\n\n  .CodeMirror-hint,\n  .CodeMirror-lint-marker-error,\n  .CodeMirror-lint-marker-warning,\n  .CodeMirror-lint-message-error,\n  .CodeMirror-lint-message-warning {\n    font-family: ",";\n    font-size: 16px;\n  }\n"])),ne.a.monospace,ne.a.monospace),ae=Object(d.a)(q||(q=Object(i.a)(["\n.cm-whitespace {\n  /*\n    Note: background is a 16x16px PNG containing a semi-transparent gray dot. 8.4px\n    is the exact width of a character in Codemirror's monospace font. It's consistent\n    in Firefox and Chrome and doesn't change on zoom in / out, but may need to be\n    modified if we change the Codemirror font.\n  */\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAm0lEQVQ4Ee2RMQ7DIAxFMVIvBEvm7FXXniIXak4RhnTujMSBkKDfCgPCzg2whAzf9hN8jJlBmgUxxgf0DWvFykR0Ouc+yGXsFwAeRuOv1rr0zdACIC/k2uu2P7T9Ng6zDu2ZUnqP/RqAr61GKUXUNEBWpy9R1AQAbzzvAFpNAJrbQYHs3nuhi1/gQRhGbFh7c7bWfgE+FOiU4MAfhpIwd0LjE+wAAAAASUVORK5CYII=') center left / 8.4px 8.4px repeat-x;\n}\n.cm-whitespace.CodeMirror-lint-mark-error {\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAm0lEQVQ4Ee2RMQ7DIAxFMVIvBEvm7FXXniIXak4RhnTujMSBkKDfCgPCzg2whAzf9hN8jJlBmgUxxgf0DWvFykR0Ouc+yGXsFwAeRuOv1rr0zdACIC/k2uu2P7T9Ng6zDu2ZUnqP/RqAr61GKUXUNEBWpy9R1AQAbzzvAFpNAJrbQYHs3nuhi1/gQRhGbFh7c7bWfgE+FOiU4MAfhpIwd0LjE+wAAAAASUVORK5CYII=') center left / 8.4px 8.4px repeat-x;\n}\n"]))),ce=function(e){Object(k.a)(t,e);var n=Object(_.a)(t);function t(){var e;Object(A.a)(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r)))._editor=void 0,e.moveCursor=function(n,t){var i;if(e._editor){e._editor.setCursor(n,t,{scroll:!1});var r=e._editor.getScrollInfo().clientHeight,o=e._editor.cursorCoords(!0,"local"),a=o.left,c=o.top;null===(i=e._editor)||void 0===i||i.scrollIntoView({left:a,right:a,top:c-20,bottom:c+(r-20)}),e._editor.focus()}},e.moveCursorToPath=function(n){if(e._editor){var t=e._editor.getDoc(),i=Q(y.parseDocument(e.props.configCode),n,"key");if(i){var r=t.posFromIndex(i?i.start:0);e.moveCursor(r.line,r.ch)}}},e}return Object(E.a)(t,[{key:"componentDidUpdate",value:function(e){this._editor&&e.runConfigSchema!==this.props.runConfigSchema&&this.performInitialPass()}},{key:"shouldComponentUpdate",value:function(e){return e.configCode!==this.props.configCode||e.readOnly!==this.props.readOnly||e.runConfigSchema!==this.props.runConfigSchema||e.showWhitespace!==this.props.showWhitespace}},{key:"performInitialPass",value:function(){re(this._editor);var e=z(this._editor).context;this.props.onHelpContextChange(e?{type:e.closestCompositeType}:null)}},{key:"render",value:function(){var e=this;return Object(te.jsxs)("div",{style:{flex:1,position:"relative"},children:[Object(te.jsx)(oe,{}),this.props.showWhitespace?Object(te.jsx)(ae,{}):null,Object(te.jsx)(ee.Controlled,{value:this.props.configCode,options:{mode:"yaml",theme:"default",lineNumbers:!0,readOnly:this.props.readOnly,indentUnit:2,smartIndent:!0,showCursorWhenSelecting:!0,lintOnChange:!1,lint:{checkConfig:this.props.checkConfig,lintOnChange:!1,onUpdateLinting:!1},hintOptions:{completeSingle:!1,closeOnUnfocus:!1,schema:this.props.runConfigSchema},keyMap:"sublime",extraKeys:{"Cmd-Space":function(e){return e.showHint({completeSingle:!0})},"Ctrl-A":function(e){e.execCommand("goLineStartSmart")},"Ctrl-E":function(e){return e.execCommand("goLineEnd")},"Ctrl-Space":function(e){return e.showHint({completeSingle:!0})},"Alt-Space":function(e){return e.showHint({completeSingle:!0})},"Shift-Tab":function(e){return e.execCommand("indentLess")},Tab:function(e){return e.execCommand("indentMore")},"Cmd-F":"findPersistent","Ctrl-F":"findPersistent","Cmd-Z":function(e){return e.undo()},"Cmd-Y":function(e){return e.redo()}},gutters:["CodeMirror-foldgutter","CodeMirror-lint-markers","CodeMirror-linenumbers"],foldGutter:!0},editorDidMount:function(n){e._editor=n,e.performInitialPass()},onBeforeChange:function(n,t,i){e.props.onConfigChange(i)},onCursorActivity:function(n){if(n.getSelection().length)e.props.onHelpContextChange(null);else{var t=z(n).context;e.props.onHelpContextChange(t?{type:t.closestCompositeType}:null)}},onChange:function(e){re(e)},onBlur:function(e){re(e)},onKeyUp:function(e,n){ie.test(n.key)&&e.execCommand("autocomplete")}})]})}}]),t}(v.Component),se=Object(p.gql)($||($=Object(i.a)(["\n  fragment ConfigEditorRunConfigSchemaFragment on RunConfigSchema {\n    rootConfigType {\n      key\n    }\n    allConfigTypes {\n      __typename\n      key\n      description\n      isSelector\n      typeParamKeys\n      ... on RegularConfigType {\n        givenName\n      }\n      ... on EnumConfigType {\n        givenName\n        values {\n          value\n          description\n        }\n      }\n      ... on CompositeConfigType {\n        fields {\n          name\n          description\n          isRequired\n          configTypeKey\n        }\n      }\n      ... on ScalarUnionConfigType {\n        key\n        scalarTypeKey\n        nonScalarTypeKey\n      }\n    }\n  }\n"]))),le=Object(p.gql)(X||(X=Object(i.a)(["\n  fragment ConfigEditorValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on PipelineConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function ue(e){return e.map((function(e){return"EvaluationStackPathEntry"===e.__typename?e.fieldName:"".concat(e.listIndex)}))}function de(e,n){if("PipelineConfigValidationInvalid"!==n.__typename)return{isValid:!0};var t=n.errors.map((function(e){return{message:e.message,reason:e.reason,path:ue(e.stack.entries)}})),i=Object.keys(e);return t.forEach((function(e){0===e.path.length&&i.length&&(e.path=[i[0]])})),{isValid:!1,errors:t}}var pe,fe=function(e,n){return(e&&e.type.key)===(n&&n.type.key)},me=t(86),ge=t(19),he=t(78),ve=t(15),ye=t(21),be=t(18),je=t(626),Ce=t(139),xe=t(813),Oe=t(677),Ae=v.memo((function(e){var n=e.context,t=e.allInnerTypes;return n?Object(te.jsxs)(_e,{children:[Object(te.jsx)(ke,{children:Object(te.jsx)(Oe.b,{type:n.type,typesInScope:t,maxDepth:2})}),Object(te.jsx)(Ee,{children:"Ctrl+Space to show auto-completions inline."})]}):Object(te.jsx)(_e,{})}),(function(e,n){return fe(e.context,n.context)})),Ee=d.c.div.withConfig({displayName:"ConfigEditorHelp__AutocompletionsNote",componentId:"sc-1jfs6n4-0"})(["font-size:0.75rem;text-align:center;padding:4px;border-top:1px solid ",";background:rgba(238,238,238,0.9);color:rgba(0,0,0,0.7);"],f.a.LIGHT_GRAY1),ke=d.c.div.withConfig({displayName:"ConfigEditorHelp__ConfigScrollWrap",componentId:"sc-1jfs6n4-1"})(["padding:8px;color:black;flex:1;pointer-events:initial;max-height:100%;overflow-y:auto;"]),_e=d.c.div.withConfig({displayName:"ConfigEditorHelp__Container",componentId:"sc-1jfs6n4-2"})(["position:relative;display:flex;flex-direction:column;background-color:#e1e8edd1;height:100%;"]),Se=t(81),we=t(595),Re=t(1061),Te=Re.a.ofType(),Ne=function(e){var n=e.modeName?e.modes.find((function(n){return n.name===e.modeName})):e.modes[0];v.useEffect((function(){var t;n&&n.name!==e.modeName&&(null===(t=e.onModeChange)||void 0===t||t.call(e,n.name))}),[n,e.modeName]);var t=1===e.modes.length,i=!e.modeError,r=t&&i;return Object(te.jsx)(Te,{activeItem:n,filterable:!0,disabled:t&&i,items:e.modes,itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemRenderer:function(e,n){return Object(te.jsx)(m.n.Item,{active:n.modifiers.active,text:e.name,onClick:n.handleClick},e.name)},onItemSelect:function(n){var t;null===(t=e.onModeChange)||void 0===t||t.call(e,n.name)},children:Object(te.jsx)(m.c,{icon:i?void 0:we.a.ERROR,intent:i?Se.a.NONE:Se.a.DANGER,title:r?"To add a mode, add a ModeDefinition to the pipeline.":"Current execution mode",text:i?n?"Mode: ".concat(n.name):"Select Mode":"Invalid Mode Selection",disabled:r,rightIcon:"caret-down","data-test-id":"mode-picker-button"})})},Ie=t(215),Pe=function(e){var n=e.canRemove,t=e.title,i=e.onChange,r=e.onClick,o=e.onRemove,a=e.active,c=v.useRef(null),s=v.useState(!1),u=Object(l.a)(s,2),d=u[0],p=u[1],f=v.useState(t),m=Object(l.a)(f,2),g=m[0],h=m[1],y=v.useCallback((function(){i&&p(!0)}),[i]),b=v.useCallback((function(e){e.stopPropagation(),o&&o()}),[o]),j=v.useCallback((function(){p(!1),i&&i(g)}),[i,g]),C=v.useCallback((function(e){return h(e.target.value)}),[]);return v.useEffect((function(){var e=c.current;e&&d&&(e.focus(),e.select())}),[d]),Object(te.jsxs)(Le,{active:a||!1,onDoubleClick:y,onClick:r,children:[d?Object(te.jsx)("input",{ref:c,type:"text",onKeyDown:function(e){return"Enter"===e.key&&e.currentTarget.blur()},onChange:C,onBlur:j,value:g}):t,n&&!d&&o?Object(te.jsx)(De,{onClick:b,children:Object(te.jsx)(be.a,{name:"close"})}):null]})},Me=function(e){var n=e.data,t=e.onCreate,i=e.onSave,r=n.sessions,c=Object.keys(r),s=c.length,l=Object(Ie.b)(),u=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];i(e.apply(void 0,[n].concat(r)))},d=function(){var e=Object(a.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s>1)){e.next=4;break}return e.next=3,l({title:"Discard tab?",description:"The configuration for ".concat(n?'"'.concat(r[n].name,'"'):"this tab"," will be discarded.")});case 3:u(C.c,n);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(te.jsxs)(Fe,{children:[c.map((function(e){return Object(te.jsx)(Pe,{canRemove:s>1,active:e===n.current,title:r[e].name,onClick:function(){return u(C.d,e)},onChange:function(n){return u(C.a,e,{name:n})},onRemove:function(){return d(e)}},e)})),Object(te.jsx)(Pe,{title:"Add...",onClick:t})]})},Fe=d.c.div.withConfig({displayName:"ExecutionTabs__ExecutionTabsContainer",componentId:"sc-10xvd30-0"})(["padding-left:20px;padding-top:12px;display;flex;z-index:1;flex-direction:row;border-bottom:1px solid ",";"],f.a.GRAY5),Le=d.c.div.withConfig({displayName:"ExecutionTabs__TabContainer",componentId:"sc-10xvd30-1"})(["position:relative;padding:6px 8px;display:inline-flex;flex-direction:row;align-items:center;background:",";color:",";user-select:none;top:1px;border:1px solid ",";border-bottom:1px solid ",";border-right:0;&:last-child{border-right:1px solid ",";}&:hover{background:",";}input{line-height:1.28581;font-size:14px;border:0;outline:none;}cursor:",";"],(function(e){return e.active?f.a.WHITE:f.a.LIGHT_GRAY3}),(function(e){return e.active?f.a.BLACK:f.a.DARK_GRAY3}),f.a.GRAY5,(function(e){return e.active?"transparent":f.a.GRAY5}),f.a.GRAY5,(function(e){return e.active?f.a.WHITE:f.a.LIGHT_GRAY5}),(function(e){return e.active?"inherit":"pointer"})),De=d.c.button.withConfig({displayName:"ExecutionTabs__RemoveButton",componentId:"sc-10xvd30-2"})(["border:0;cursor:pointer;margin-left:4px;opacity:0.2;padding:0;&:hover{opacity:0.6;}"]),Ye=t(106),Be=t(52),Ke=t(171),Ge=t(708),Ve=t(702),He=function(e){var n=Object(Be.c)().canLaunchPipelineExecution,t=Object(p.useMutation)(Ke.b),i=Object(l.a)(t,1)[0],r=v.useContext(Ye.a).basePath,c=function(){var n=Object(a.a)(o.a.mark((function n(){var t,a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=(t=e.getVariables())){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,i({variables:t});case 6:a=n.sent,Object(Ke.j)(r,e.pipelineName,a),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),Object(Ve.a)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(){return n.apply(this,arguments)}}();return Object(te.jsx)("div",{style:{marginRight:20},children:Object(te.jsx)(Ge.a,{runCount:1,config:{icon:"send-to",onClick:c,title:"Launch Execution",disabled:e.disabled||!n,tooltip:n?void 0:Be.a}})})},ze=t(814),We=t(219),Qe=t(59),Ue=t(39),qe=t(82);function $e(e){return!(!e||"object"!==typeof e||!("__typename"in e))}var Xe={invalid:{title:"You need to fix this configuration section.",intent:Se.a.DANGER},missing:{title:"You need to add this configuration section.",intent:Se.a.DANGER},present:{title:"This section is present and valid.",intent:Se.a.SUCCESS},none:{title:"This section is empty and valid.",intent:Se.a.PRIMARY}},Je=function(e){var n,t=e.onRemoveExtraPaths,i=e.extraNodes,r=Object(Ie.b)(),c={},u=[],d=Object(s.a)(i);try{for(d.s();!(n=d.n()).done;){var p=n.value,f=p.split(".");if(2===f.length){var g=Object(l.a)(f,2),h=g[0],v=g[1];c[h]||(c[h]=[]),c[h].push(v)}else u.push(p)}}catch(y){d.e(y)}finally{d.f()}return Object(te.jsx)("div",{style:{marginTop:5},children:Object(te.jsx)(m.c,{small:!0,onClick:Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({title:"Remove extra config",description:Object(te.jsxs)("div",{children:[Object(te.jsxs)("p",{children:["You have provided extra configuration in your run config which does not conform to your pipeline","'","s config schema."]}),Object.entries(c).length>0&&Object.entries(c).map((function(e){var n=Object(l.a)(e,2),t=n[0],i=n[1];return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsxs)("p",{children:["Extra ",t,":"]}),Object(te.jsx)("ul",{children:i.map((function(e){return Object(te.jsx)("li",{children:Object(te.jsx)(m.f,{children:e})},e)}))})]})})),u.length>0&&Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("p",{children:"Other extra paths:"}),Object(te.jsx)("ul",{children:u.map((function(e){return Object(te.jsx)("li",{children:Object(te.jsx)(m.f,{children:e})},e)}))})]}),Object(te.jsx)("p",{children:"Clicking confirm will automatically remove this extra configuration from your run config."})," "]})});case 2:t(i);case 3:case"end":return e.stop()}}),e)}))),children:"Remove Extra Config"})})},Ze=function(e){var n=e.onScaffoldMissingConfig,t=e.missingNodes,i=Object(Ie.b)(),r=Object(te.jsxs)("div",{children:[t.length>0&&Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("p",{children:"Missing paths:"}),Object(te.jsx)("ul",{children:t.map((function(e){return Object(te.jsx)("li",{children:Object(te.jsx)(m.f,{children:e})},e)}))})]}),Object(te.jsx)("p",{children:"Clicking confirm will automatically scaffold this missing configuration into your run config with default values. You will need to change the values appropriately."})]}),c=function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({title:"Scaffold extra config",description:r});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(te.jsx)("div",{style:{marginTop:5},children:Object(te.jsx)(m.c,{small:!0,onClick:c,children:"Scaffold Missing Config"})})},en=function(e){var n=e.document,t=e.validation,i=e.onHighlightPath,r=e.onRemoveExtraPaths,o=e.onScaffoldMissingConfig,a=e.solidSelection,u=e.runConfigSchema,d=v.useState(!1),p=Object(l.a)(d,2),f=p[0],g=p[1],h=Object(j.e)().flagPipelineModeTuples,y=v.useMemo((function(){if(!u)return{};var e=u.allConfigTypes,n=u.rootConfigType,t={},i=e.find((function(e){return e.key===n.key}));return"CompositeConfigType"!==(null===i||void 0===i?void 0:i.__typename)||i.fields.forEach((function(n){var i=e.find((function(e){return e.key===n.configTypeKey}));"CompositeConfigType"===(null===i||void 0===i?void 0:i.__typename)&&(t[n.name]=i)})),t}),[u]),C=[],O=[],A=[];if(t&&"PipelineConfigValidationInvalid"===t.__typename&&t.errors.forEach((function(e){var n=ue(e.stack.entries);if(A.push({pathKey:n.join("."),error:e}),"MissingFieldConfigError"===e.__typename)O.push([].concat(Object(c.a)(n),[e.field.name]).join("."));else if("MissingFieldsConfigError"===e.__typename){var t,i=Object(s.a)(e.fields);try{for(i.s();!(t=i.n()).done;){var r=t.value;O.push([].concat(Object(c.a)(n),[r.name]).join("."))}}catch(u){i.e(u)}finally{i.f()}}else if("FieldNotDefinedConfigError"===e.__typename)C.push([].concat(Object(c.a)(n),[e.fieldName]).join("."));else if("FieldsNotDefinedConfigError"===e.__typename){var o,a=Object(s.a)(e.fieldNames);try{for(a.s();!(o=a.n()).done;){var l=o.value;C.push([].concat(Object(c.a)(n),[l]).join("."))}}catch(u){a.e(u)}finally{a.f()}}else"RuntimeMismatchConfigError"===e.__typename&&O.push(n.join("."))})),"InvalidSubsetError"===(null===t||void 0===t?void 0:t.__typename)&&A.push({pathKey:"",error:t.message}),"PythonError"===(null===t||void 0===t?void 0:t.__typename)){var E=Object(te.jsx)(x.b,{error:t});A.push({pathKey:"",error:Object(te.jsxs)("span",{children:["PythonError:"," ",Object(te.jsx)(he.a,{onClick:function(){return Object(b.b)({body:E})},children:"Click for details"})]})})}var k=y.resources,_=y.solids,S=Object(Qe.a)(y,["resources","solids"]),w=function(e,t){var r=t.map((function(t){if((null===a||void 0===a?void 0:a.length)&&!(null===a||void 0===a?void 0:a.includes(t.name)))return null;var r=[].concat(Object(c.a)(e),[t.name]),o=r.join("."),s=A.filter((function(e){return e.pathKey===o||e.pathKey.startsWith("".concat(o,"."))})).map((function(e){return e.error})),l=hn(r,n),u=O.some((function(e){return e.includes(r.join("."))})),d=s.length||u,p=r.some((function(e,n){return O.includes(r.slice(0,n+1).join("."))}));if(f&&!d)return!1;var m=p&&t.isRequired?"missing":d?"invalid":l?"present":"none";return Object(te.jsx)(qe.a,{position:Ue.a.BOTTOM,content:Xe[m].title,intent:Xe[m].intent,children:Object(te.jsx)(dn,{state:m,onClick:function(){var e=s.find($e);i(e?ue(e.stack.entries):r)},children:t.name},t.name)},t.name)})).filter(Boolean);return r.length?r:Object(te.jsx)(an,{children:"Nothing to display."})};return Object(te.jsx)(je.c,{identifier:"run-preview",axis:"horizontal",first:Object(te.jsxs)(pn,{children:[Object(te.jsxs)(rn,{children:[Object(te.jsx)(tn,{children:"Errors"}),A.map((function(e,n){return Object(te.jsx)(gn,{error:e.error,onHighlight:i},n)}))]}),(C.length>0||O.length>0)&&Object(te.jsxs)(rn,{children:[Object(te.jsx)(tn,{children:"Bulk Actions:"}),C.length?Object(te.jsx)(Je,{onRemoveExtraPaths:r,extraNodes:C}):null,O.length?Object(te.jsx)(Ze,{onScaffoldMissingConfig:o,missingNodes:O}):null]})]}),firstInitialPercent:50,firstMinSize:150,second:Object(te.jsxs)(te.Fragment,{children:[Object(te.jsxs)("div",{style:{overflowY:"scroll",width:"100%",height:"100%"},children:[Object(te.jsxs)(mn,{children:[Object(te.jsxs)(rn,{children:[Object(te.jsx)(tn,{children:"Runtime"}),Object(te.jsx)(on,{children:w([],Object.keys(S).map((function(e){return{name:e,isRequired:!1}})))})]}),((null===k||void 0===k?void 0:k.fields.length)||0)>0&&Object(te.jsxs)(rn,{children:[Object(te.jsx)(tn,{children:"Resources"}),Object(te.jsx)(on,{children:w(["resources"],(null===k||void 0===k?void 0:k.fields)||[])})]})]}),Object(te.jsxs)(rn,{children:[Object(te.jsx)(tn,{children:h?"Ops":"Solids"}),Object(te.jsx)(on,{children:w(["solids"],(null===_||void 0===_?void 0:_.fields)||[])})]}),Object(te.jsx)("div",{style:{height:50}})]}),Object(te.jsx)("div",{style:{position:"absolute",top:0,right:0,padding:"12px 15px 0px 10px",background:"rgba(255,255,255,0.7)"},children:Object(te.jsx)(m.e,{label:"Errors Only",checked:f,onChange:function(){return g(!f)}})})]})})},nn=Object(p.gql)(pe||(pe=Object(i.a)(["\n  fragment RunPreviewValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on PipelineConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n          }\n        }\n        ... on MissingFieldConfigError {\n          field {\n            name\n          }\n        }\n        ... on MissingFieldsConfigError {\n          fields {\n            name\n          }\n        }\n        ... on FieldNotDefinedConfigError {\n          fieldName\n        }\n        ... on FieldsNotDefinedConfigError {\n          fieldNames\n        }\n      }\n    }\n    ... on PipelineNotFoundError {\n      message\n    }\n    ... on InvalidSubsetError {\n      message\n    }\n    ...PythonErrorFragment\n  }\n\n  ","\n"])),x.a),tn=d.c.div.withConfig({displayName:"RunPreview__SectionTitle",componentId:"sc-4bfs7z-0"})(["color:",";text-transform:uppercase;font-size:12px;"],f.a.GRAY3),rn=d.c.div.withConfig({displayName:"RunPreview__Section",componentId:"sc-4bfs7z-1"})(["margin-top:14px;margin-left:10px;"]),on=d.c.div.withConfig({displayName:"RunPreview__ItemSet",componentId:"sc-4bfs7z-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;"]),an=d.c.div.withConfig({displayName:"RunPreview__ItemsEmptyNotice",componentId:"sc-4bfs7z-3"})(["font-size:13px;padding-top:7px;padding-bottom:7px;"]),cn={invalid:"1px solid #CE1126",missing:"1px solid #CE1126",present:"1px solid #AFCCE1",none:"1px solid ".concat(f.a.LIGHT_GRAY2)},sn={invalid:f.a.RED5,missing:f.a.RED5,present:"#C8E1F4",none:f.a.LIGHT_GRAY4},ln={invalid:"#E15858",missing:"#E15858",present:"#AFCCE1",none:f.a.LIGHT_GRAY4},un={invalid:f.a.WHITE,missing:f.a.WHITE,present:f.a.BLACK,none:f.a.BLACK},dn=d.c.div.withConfig({displayName:"RunPreview__Item",componentId:"sc-4bfs7z-4"})(["white-space:nowrap;font-size:13px;color:",";background:",";border-radius:3px;border:",";padding:3px 5px;margin:3px;transition:background 150ms linear,color 150ms linear;cursor:",";overflow:hidden;text-overflow:ellipsis;&:hover{transition:none;background:",";}"],(function(e){var n=e.state;return un[n]}),(function(e){var n=e.state;return sn[n]}),(function(e){var n=e.state;return cn[n]}),(function(e){return"present"===e.state?"default":"not-allowed"}),(function(e){var n=e.state;return ln[n]})),pn=d.c.div.withConfig({displayName:"RunPreview__ErrorListContainer",componentId:"sc-4bfs7z-5"})(["margin-left:10px;overflow-y:scroll;height:100%;"]),fn=d.c.div.withConfig({displayName:"RunPreview__ErrorRowContainer",componentId:"sc-4bfs7z-6"})(["text-align:left;font-size:13px;white-space:pre-wrap;word-break:break-word;display:flex;flex-direction:row;align-items:flex-start;border-bottom:1px solid #ccc;padding:7px 0;padding-right:7px;margin-bottom:8px;&:last-child{border-bottom:0;margin-bottom:15px;}",""],(function(e){return e.hoverable&&"&:hover {\n      background: ".concat(f.a.LIGHT_GRAY5,";\n    }\n  ")})),mn=d.c.div.withConfig({displayName:"RunPreview__RuntimeAndResourcesSection",componentId:"sc-4bfs7z-7"})(["display:flex;@media (max-width:800px){flex-direction:column;}"]),gn=function(e){var n=e.error,t=e.onHighlight,i=n,r=null;$e(n)&&(i=n.message,r=n);var o=i;return"string"===typeof i&&i.length>400&&(o=function(e){var n=e.indexOf("{");-1===n&&(n=e.indexOf(". "));-1===n&&(n=400);return e.substr(0,n)+"... "}(i)),Object(te.jsxs)(fn,{hoverable:!!r,onClick:function(){return r&&t(ue(r.stack.entries))},children:[Object(te.jsx)("div",{style:{paddingRight:4},children:Object(te.jsx)(be.a,{name:"error",color:ve.a.Red500})}),Object(te.jsxs)("div",{children:[o,o!==i&&Object(te.jsxs)(te.Fragment,{children:["\xa0",Object(te.jsx)(he.a,{onClick:function(){return Object(b.b)({body:Object(te.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:i})})},children:"View all"})]})]})]})};function hn(e,n){if(!n||"object"!==typeof n)return!1;if(0===e.length)return!0;var t=Object(We.a)(e),i=t[0];return hn(t.slice(1),n[i])}var vn,yn,bn,jn,Cn=t(720),xn=t(632),On=t(722),An=t(712),En=t(723),kn=t(649),_n=function(e){Object(k.a)(t,e);var n=Object(_.a)(t);function t(){var e;Object(A.a)(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).graphRef=v.createRef(),e}return Object(E.a)(t,[{key:"render",value:function(){var e=this.props,n=e.pipelineOrError,t=e.queryResultSolids,i=e.errorMessage;return"Pipeline"!==n.__typename?Object(te.jsx)(Rn,{children:i&&Object(te.jsx)(Tn,{children:i})}):Object(te.jsxs)(Rn,{children:[i&&Object(te.jsx)(Tn,{children:i}),Object(te.jsx)(On.b,{ref:this.graphRef,backgroundColor:f.a.WHITE,pipelineName:n.name,solids:t,layout:Object(En.b)(t),interactor:An.b.Interactors.None,focusSolids:[],highlightedSolids:[]})]})}}]),t}(v.PureComponent),Sn=Object(p.gql)(vn||(vn=Object(i.a)(["\n  query SolidSelectorQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solids {\n          name\n          ...PipelineGraphSolidFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n    }\n  }\n  ","\n"])),On.a),wn=function(e){var n=e.serverProvidedSubsetError,t=e.query,i=e.onChange,r=e.pipelineName,o=e.repoAddress,a=v.useState(t||"*"),c=Object(l.a)(a,2),s=c[0],d=c[1],f=v.useState(!1),g=Object(l.a)(f,2),h=g[0],y=g[1],b=Object(u.a)(Object(u.a)({},Object(Ce.a)(o)),{},{pipelineName:r}),C=Object(j.e)().flagPipelineModeTuples,x=Object(p.useQuery)(Sn,{variables:{selector:b},fetchPolicy:"cache-and-network"}),A=x.data,E=x.loading;v.useEffect((function(){d(t||"*")}),[t,h]);var k="Pipeline"===(null===A||void 0===A?void 0:A.pipelineOrError.__typename)?Object(xn.a)(A.pipelineOrError.solids,s).all:[],_="Pipeline"!==(null===A||void 0===A?void 0:A.pipelineOrError.__typename)&&(null===A||void 0===A?void 0:A.pipelineOrError.message)||null;_&&console.error("Could not load pipeline ".concat(e.pipelineName));var S=!E&&(0===k.length||0===s.length),w=v.useMemo((function(){return S?C?"You must provide a valid op query or * to execute the entire job.":"You must provide a valid solid query or * to execute the entire pipeline.":n?n.message:_}),[C,S,_,n]);return Object(te.jsx)("div",{style:{position:"relative"},children:Object(te.jsxs)(m.t,{autoFocus:!1,isOpen:h,minimal:!0,modifiers:{arrow:{enabled:!1},offset:{enabled:!0,offset:"0, 8px"}},position:"bottom-left",children:[Object(te.jsx)(O.a,{shortcutLabel:"\u2325S",shortcutFilter:function(e){return 83===e.keyCode&&e.altKey},children:Object(te.jsx)(kn.a,{width:"*"!==s&&""!==s||h?350:90,intent:w?Se.a.DANGER:Se.a.NONE,items:"Pipeline"===(null===A||void 0===A?void 0:A.pipelineOrError.__typename)?null===A||void 0===A?void 0:A.pipelineOrError.solids:[],value:s,placeholder:C?"Type an op subset":"Type a solid subset",onChange:d,onBlur:function(e){!function(e){if("Pipeline"===(null===A||void 0===A?void 0:A.pipelineOrError.__typename)){""===e&&(e="*");var n=Object(xn.a)(A.pipelineOrError.solids,e).all;n.length===A.pipelineOrError.solids.length?i(null,e):i(n.map((function(e){return e.name})),e)}}(e),y(!1)},onFocus:function(){return y(!0)},onKeyDown:function(e){e.isDefaultPrevented()||"Enter"!==e.key&&"Return"!==e.key&&"Escape"!==e.key||e.currentTarget.blur()}})}),(null===A||void 0===A?void 0:A.pipelineOrError)&&Object(te.jsx)(_n,{pipelineOrError:null===A||void 0===A?void 0:A.pipelineOrError,errorMessage:w,queryResultSolids:k})]})})},Rn=d.c.div.withConfig({displayName:"SolidSelector__SolidSelectorModalContainer",componentId:"xtoac0-0"})(["border-radius:4px;width:60vw;height:60vh;background:",";& > div{border-radius:4px;}"],f.a.WHITE),Tn=d.c.div.withConfig({displayName:"SolidSelector__ModalErrorOverlay",componentId:"xtoac0-1"})(["position:absolute;margin:5px;padding:4px 8px;z-index:2;border-radius:2px;border:1px solid ",";background:",";color:white;"],f.a.RED3,f.a.RED5),Nn=t(815),In=t(79),Pn=function e(n,t){var i=t[n];switch(i.__typename){case"CompositeConfigType":if(i.isSelector)return"<selector>";var r,o={},a=Object(s.a)(i.fields);try{for(a.s();!(r=a.n()).done;){var c=r.value,l=c.name,u=c.isRequired,d=c.configTypeKey;u&&(o[l]=e(d,t))}}catch(p){a.e(p)}finally{a.f()}return o;case"ArrayConfigType":return[];case"NullableConfigType":return e(i.typeParamKeys[0],t);case"EnumConfigType":return i.values.map((function(e){return e.value})).join("|");case"ScalarUnionConfigType":return e(i.scalarTypeKey,t);case"RegularConfigType":return{String:"",Int:0,Bool:!0,Any:"AnyType"}[i.key];default:Object(In.a)(i)}},Mn=function(e){var n=e.allConfigTypes,t=e.rootConfigType;console.log(n);var i=function(e){var n,t={},i=Object(s.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;t[r.key]=r}}catch(o){i.e(o)}finally{i.f()}return t}(n);return Pn(t.key,i)},Fn="The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.",Ln=function(e,n){switch(n.type){case"preview-loading":return Object(u.a)(Object(u.a)({},e),{},{previewLoading:n.payload});case"set-preview":var t=n.payload,i=t.preview,r=t.previewedDocument,o=t.previewLoading;return Object(u.a)(Object(u.a)({},e),{},{preview:i,previewedDocument:r,previewLoading:o});case"toggle-tag-editor":return Object(u.a)(Object(u.a)({},e),{},{tagEditorOpen:n.payload});case"toggle-config-loading":return Object(u.a)(Object(u.a)({},e),{},{configLoading:n.payload});case"set-editor-help-context":return Object(u.a)(Object(u.a)({},e),{},{editorHelpContext:n.payload});case"toggle-whitepsace":return Object(u.a)(Object(u.a)({},e),{},{showWhitespace:n.payload});default:return e}},Dn={preview:null,previewLoading:!1,previewedDocument:null,configLoading:!1,showWhitespace:!0,editorHelpContext:null,tagEditorOpen:!1},Yn=(n.default=function(e){var n,t,i=e.partitionSets,r=e.pipeline,d=e.pipelineMode,g=e.repoAddress,A=Object(p.useApolloClient)(),E=v.useReducer(Ln,Dn),k=Object(l.a)(E,2),_=k[0],S=k[1],w=v.useRef(!1),R=v.useRef(null),T=v.useRef(null),N=v.useRef(0),I=Object(j.e)().flagPipelineModeTuples,P=r.presets,M=v.useMemo((function(){if(I){var e=P.filter((function(e){return e.mode===d})),n=i.results.filter((function(e){return e.mode===d}));if(1===e.length&&0===n.length)return{runConfigYaml:e[0].runConfigYaml};if(!e.length&&1===n.length)return{base:{partitionsSetName:n[0].name,partitionName:null}}}return{}}),[I,i,d,P]),F=Object(C.g)(g.name||"",I?"".concat(r.name,":").concat(d):r.name,M),L=Object(l.a)(F,2),D=L[0],Y=L[1],B=D.sessions[D.current],K=Object(u.a)(Object(u.a)({},Object(Ce.a)(g)),{},{pipelineName:r.name,solidSelection:(null===B||void 0===B?void 0:B.solidSelection)||void 0}),G=Object(p.useQuery)(Gn,{variables:{selector:K,mode:null===B||void 0===B?void 0:B.mode},fetchPolicy:"cache-and-network",partialRefetch:!0}),V=null===G||void 0===G||null===(n=G.data)||void 0===n?void 0:n.runConfigSchemaOrError;v.useEffect((function(){return w.current=!0,function(){w.current=!1}}));var H=function(e){Y(Object(C.a)(D,D.current,e))},z="RunConfigSchema"===(null===V||void 0===V?void 0:V.__typename)?V:void 0,W="ModeNotFoundError"===(null===V||void 0===V?void 0:V.__typename)?V:void 0,Q=function(){var e=Object(a.a)(o.a.mark((function e(n){var t,i,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.current+=1,t=N.current,S({type:"preview-loading",payload:!0}),e.next=5,A.query({fetchPolicy:"no-cache",query:Yn,variables:{runConfigData:n,pipeline:K,mode:d||B.mode||"default"}});case 5:return i=e.sent,r=i.data,w.current&&(a=t===N.current,S({type:"set-preview",payload:{preview:r,previewedDocument:n,previewLoading:!a&&_.previewLoading}})),e.abrupt("return",de(n,r.isPipelineConfigValid));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=Object(a.a)(o.a.mark((function e(n){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[].concat(Object(c.a)((null===r||void 0===r?void 0:r.tags)||[]),Object(c.a)(n.tags)).reduce((function(e,n){return e[n.key]=n.value,e}),{}),H({base:{presetName:n.name},name:n.name,runConfigYaml:n.runConfigYaml||"",solidSelection:n.solidSelection,solidSelectionQuery:null===n.solidSelection?"*":n.solidSelection.join(","),mode:n.mode,tags:Object.entries(t).map((function(e){var n=Object(l.a)(e,2);return{key:n[0],value:n[1]}})),needsRefresh:!1});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=Object(a.a)(o.a.mark((function e(n,t,i,a){var s,l,u,d,p,f,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(),e.prev=1,s=B.base,e.next=5,A.query({query:xe.c,variables:{repositorySelector:n,partitionSetName:t,partitionName:i}});case 5:if(l=e.sent,(u=l.data)&&u.partitionSetOrError&&"PartitionSet"===u.partitionSetOrError.__typename){e.next=10;break}return Z(),e.abrupt("return");case 10:"PythonError"===(d=u.partitionSetOrError.partition).tagsOrError.__typename?(p=((null===r||void 0===r?void 0:r.tags)||[]).slice(),Object(b.b)({body:Object(te.jsx)(x.b,{error:d.tagsOrError})})):p=[].concat(Object(c.a)((null===r||void 0===r?void 0:r.tags)||[]),Object(c.a)(d.tagsOrError.results)),"PythonError"===d.runConfigOrError.__typename?(f="",Object(b.b)({body:Object(te.jsx)(x.b,{error:d.runConfigOrError})})):f=d.runConfigOrError.yaml,m=a||d.solidSelection,H({name:d.name,base:Object.assign({},s,{partitionName:d.name}),runConfigYaml:f,solidSelection:m,solidSelectionQuery:null===m?"*":m.join(","),mode:d.mode,tags:p,needsRefresh:!1}),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(1);case 19:Z();case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(n,t,i,r){return e.apply(this,arguments)}}(),$=function(){var e=Object(a.a)(o.a.mark((function e(n){var t,i,a,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("presetName"in n)){e.next=5;break}return t=n.presetName,(i=r.presets.find((function(e){return e.name===t})))&&U(Object(u.a)(Object(u.a)({},i),{},{solidSelection:B.solidSelection||i.solidSelection})),e.abrupt("return");case 5:if(a=n.partitionName,c=n.partitionsSetName,s=Object(Ce.a)(g),!a){e.next=12;break}return J(),e.next=11,q(s,c,a,B.solidSelection);case 11:Z();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),X=function(){return S({type:"toggle-tag-editor",payload:!0})},J=function(){return S({type:"toggle-config-loading",payload:!0})},Z=function(){return S({type:"toggle-config-loading",payload:!1})},ee=_.preview,ne=_.previewLoading,ie=_.previewedDocument,re=_.configLoading,oe=_.editorHelpContext,ae=_.showWhitespace,se=_.tagEditorOpen,le=v.useMemo((function(){return r.tags||[]}),[r]),ue=v.useMemo((function(){return B.tags||[]}),[B]),pe=v.useMemo((function(){return{fromDefinition:le,fromSession:ue}}),[le,ue]),Oe=v.useMemo((function(){var e=B.base,n=B.needsRefresh;return e&&n&&("presetName"in e||e.partitionsSetName&&e.partitionName)?e:null}),[B]);return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(Me,{data:D,onCreate:function(){Y(Object(C.b)(D,M))},onSave:Y}),Object(te.jsx)(je.c,{axis:"vertical",identifier:"execution",firstMinSize:100,firstInitialPercent:75,first:Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(ze.a,{isLoading:re,message:"Generating configuration..."}),Object(te.jsxs)(Cn.a,{children:[Object(te.jsx)(xe.d,{pipeline:r,pipelineMode:d,partitionSets:i.results,base:B.base,onSaveSession:H,onSelectPreset:U,onSelectPartition:q,repoAddress:g}),Object(te.jsx)(Bn,{}),Object(te.jsx)(wn,{serverProvidedSubsetError:"InvalidSubsetError"===(null===ee||void 0===ee?void 0:ee.isPipelineConfigValid.__typename)?ee.isPipelineConfigValid:void 0,pipelineName:r.name,value:B.solidSelection||null,query:B.solidSelectionQuery||null,onChange:function(e,n){H({solidSelection:e,solidSelectionQuery:n})},repoAddress:g}),d?Object(te.jsx)("span",{}):Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(Bn,{}),Object(te.jsx)(Ne,{modes:r.modes,modeError:W,onModeChange:function(e){H({mode:e})},modeName:B.mode})]}),ue.length?null:Object(te.jsx)(ge.a,{margin:{left:12},children:Object(te.jsx)(O.a,{shortcutLabel:"\u2325T",shortcutFilter:function(e){return 84===e.keyCode&&e.altKey},onShortcut:X,children:Object(te.jsx)(he.a,{color:{link:f.a.GRAY3,hover:f.a.DARK_GRAY3},onClick:X,underline:"always",children:"+ Add tags"})})}),Object(te.jsx)(Nn.b,{tagsFromDefinition:le,tagsFromSession:ue,onChange:function(e){var n={},t=[];e.forEach((function(e){e.key in n||(n[e.key]=e.value,t.push(e))})),H({tags:t})},open:se,onRequestClose:function(){return S({type:"toggle-tag-editor",payload:!1})}}),Object(te.jsx)("div",{style:{flex:1}}),Object(te.jsx)(m.c,{icon:"paragraph",small:!0,active:ae,style:{marginLeft:"auto"},onClick:function(){return S({type:"toggle-whitepsace",payload:!ae})}}),Object(te.jsx)(Bn,{}),Object(te.jsx)(je.b,{axis:"horizontal",container:T})]}),pe.fromDefinition.length||pe.fromSession.length?Object(te.jsx)(Nn.a,{tags:pe,onRequestEdit:X}):null,Oe?Object(te.jsx)(ge.a,{padding:{vertical:8,horizontal:12},border:{side:"bottom",width:1,color:f.a.LIGHT_GRAY1},children:Object(te.jsxs)(ye.a,{direction:"row",spacing:8,alignItems:"center",children:[Object(te.jsx)(be.a,{name:"warning",color:ve.a.Yellow500}),Object(te.jsx)("div",{children:"Your repository has been manually refreshed, and this configuration may now be out of date."}),Object(te.jsx)(m.c,{small:!0,intent:"primary",onClick:function(){return $(Oe)},disabled:_.configLoading,children:"Refresh config"}),Object(te.jsx)(m.c,{small:!0,onClick:function(){H({needsRefresh:!1})},children:"Dismiss"})]})}):null,Object(te.jsx)(je.c,{ref:T,axis:"horizontal",identifier:"execution-editor",firstMinSize:100,firstInitialPercent:70,first:Object(te.jsx)(ce,{ref:R,readOnly:!1,runConfigSchema:z,configCode:B.runConfigYaml,onConfigChange:function(e){H({runConfigYaml:e})},onHelpContextChange:function(e){fe(oe,e)||S({type:"set-editor-help-context",payload:e})},showWhitespace:ae,checkConfig:Q}),second:Object(te.jsx)(Ae,{context:oe,allInnerTypes:(null===z||void 0===z?void 0:z.allConfigTypes)||[]})})]}),second:Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(ze.a,{isLoading:ne,message:z?"Checking config...":"Loading config schema..."}),Object(te.jsx)(en,{document:ie,validation:ee?ee.isPipelineConfigValid:null,solidSelection:B.solidSelection,runConfigSchema:z,onHighlightPath:function(e){var n;return null===(n=R.current)||void 0===n?void 0:n.moveCursorToPath(e)},onRemoveExtraPaths:function(e){return function(e){var n=function(e,n){for(var t=n.split("."),i=0;i<t.length-1;i++)if("undefined"===typeof(e=e[t[i]]))return;var r=t.pop();r&&delete e[r]},t={};try{t=y.parse(B.runConfigYaml||"")||{};var i,r=Object(s.a)(e);try{for(r.s();!(i=r.n()).done;)n(t,i.value)}catch(a){r.e(a)}finally{r.f()}var o=y.stringify(t);H({runConfigYaml:o})}catch(a){return void Object(b.b)({title:"Invalid YAML",body:Fn})}}(e)},onScaffoldMissingConfig:function(){var e=z?Mn(z):{};try{var n=y.parse(B.runConfigYaml||"")||{},t=h()(e,n),i=y.stringify(t);H({runConfigYaml:i})}catch(r){Object(b.b)({title:"Invalid YAML",body:Fn})}}})]})}),Object(te.jsx)("div",{style:{position:"absolute",bottom:14,right:14,zIndex:1},children:Object(te.jsx)(He,{pipelineName:r.name,getVariables:function(){var e,n;if(B){var t=d||B.mode;if(t){var i=B.tags||[],r={};try{r=y.parse(B.runConfigYaml||"")||{}}catch(o){return void Object(b.b)({title:"Invalid YAML",body:Fn})}return{executionParams:{runConfigData:r,selector:K,mode:t,executionMetadata:{tags:[].concat(Object(c.a)(i.map((function(e){return{key:e.key,value:e.value}}))),Object(c.a)(B.solidSelectionQuery?[{key:me.a.SolidSelection,value:B.solidSelectionQuery}]:[]),Object(c.a)((null===B||void 0===B||null===(e=B.base)||void 0===e?void 0:e.presetName)?[{key:me.a.PresetName,value:null===B||void 0===B||null===(n=B.base)||void 0===n?void 0:n.presetName}]:[]))}}}}}},disabled:"PipelineConfigValidationValid"!==(null===ee||void 0===ee||null===(t=ee.isPipelineConfigValid)||void 0===t?void 0:t.__typename)})})]})},Object(p.gql)(yn||(yn=Object(i.a)(["\n  query PreviewConfigQuery(\n    $pipeline: PipelineSelector!\n    $runConfigData: RunConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(pipeline: $pipeline, runConfigData: $runConfigData, mode: $mode) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewValidationFragment\n    }\n  }\n  ","\n  ","\n"])),nn,le)),Bn=d.c.div.withConfig({displayName:"ExecutionSessionContainer__SessionSettingsSpacer",componentId:"sc-114jt33-0"})(["width:5px;"]),Kn=Object(p.gql)(bn||(bn=Object(i.a)(["\n  fragment ExecutionSessionContainerRunConfigSchemaFragment on RunConfigSchemaOrError {\n    __typename\n    ... on RunConfigSchema {\n      ...ConfigEditorRunConfigSchemaFragment\n    }\n    ... on ModeNotFoundError {\n      message\n    }\n  }\n  ","\n"])),se),Gn=Object(p.gql)(jn||(jn=Object(i.a)(["\n  query PipelineExecutionConfigSchemaQuery($selector: PipelineSelector!, $mode: String) {\n    runConfigSchemaOrError(selector: $selector, mode: $mode) {\n      ...ExecutionSessionContainerRunConfigSchemaFragment\n    }\n  }\n\n  ","\n"])),Kn)}}]);
//# sourceMappingURL=11.1f72402e.chunk.js.map